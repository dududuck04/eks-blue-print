# AWS EKS Terraform

[![Terraform](https://img.shields.io/badge/Terraform-%235835CC.svg?style=for-the-badge&logo=terraform&logoColor=white)](https://www.terraform.io/)
[![AWS](https://img.shields.io/badge/AWS-%23FF9900.svg?style=for-the-badge&logo=amazon-aws&logoColor=white)](https://aws.amazon.com/)
[![Kubernetes](https://img.shields.io/badge/kubernetes-%23326ce5.svg?style=for-the-badge&logo=kubernetes&logoColor=white)](https://kubernetes.io/)
[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg?style=for-the-badge)](LICENSE)

AWS EKS(Elastic Kubernetes Service) í´ëŸ¬ìŠ¤í„°ë¥¼ Terraformì„ ì‚¬ìš©í•˜ì—¬ ë°°í¬í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ ì½”ë“œ(IaC) í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. ì´ í”„ë¡œì íŠ¸ëŠ” ëª¨ë“ˆí™”ëœ êµ¬ì¡°ë¡œ ì„¤ê³„ë˜ì–´ ìˆì–´ ë‹¤ì–‘í•œ í™˜ê²½(ê°œë°œ, ìŠ¤í…Œì´ì§•, í”„ë¡œë•ì…˜ ë“±)ì—ì„œ ì¬ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.

---

## ğŸ“‹ ëª©ì°¨

- [ğŸš€ ì†Œê°œ](#-ì†Œê°œ)
- [âœ¨ ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°](#ï¸-í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ğŸ“‹ ì‚¬ì „ ìš”êµ¬ì‚¬í•­](#-ì‚¬ì „-ìš”êµ¬ì‚¬í•­)
- [âš™ï¸ ì„¤ì¹˜ ë° êµ¬ì„±](#ï¸-ì„¤ì¹˜-ë°-êµ¬ì„±)
- [ğŸ’» ì‚¬ìš© ë°©ë²•](#-ì‚¬ìš©-ë°©ë²•)
- [ğŸŒ í™˜ê²½ë³„ ì„¤ì •](#-í™˜ê²½ë³„-ì„¤ì •)
- [ğŸ”§ ë¬¸ì œ í•´ê²°](#-ë¬¸ì œ-í•´ê²°)
- [ğŸ¤ ê¸°ì—¬ ë°©ë²•](#-ê¸°ì—¬-ë°©ë²•)
- [ğŸ“„ ë¼ì´ì„¼ìŠ¤](#-ë¼ì´ì„¼ìŠ¤)

---

## ğŸš€ ì†Œê°œ

ì´ í”„ë¡œì íŠ¸ëŠ” AWS EKS(Elastic Kubernetes Service) í´ëŸ¬ìŠ¤í„°ë¥¼ Terraformì„ ì‚¬ìš©í•˜ì—¬ ë°°í¬í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì¢…í•©ì ì¸ ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ ì½”ë“œ(IaC)ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ëª¨ë“ˆí™”ëœ ì ‘ê·¼ ë°©ì‹ì„ í†µí•´ ë‹¤ì–‘í•œ í™˜ê²½(ê°œë°œ, ìŠ¤í…Œì´ì§•, í”„ë¡œë•ì…˜)ì—ì„œ ì¼ê´€ë˜ê³  ë°˜ë³µ ê°€ëŠ¥í•œ Kubernetes ì¸í”„ë¼ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ğŸ† AWS EKSì™€ Terraformì„ ì‚¬ìš©í•˜ëŠ” ì´ì 

#### **AWS EKSì˜ ì´ì :**
- **ê´€ë¦¬í˜• Kubernetes**: AWSê°€ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì„ ê´€ë¦¬í•˜ë¯€ë¡œ Kubernetes í´ëŸ¬ìŠ¤í„° ìš´ì˜ ë¶€ë‹´ ê°ì†Œ
- **ê³ ê°€ìš©ì„±**: ì—¬ëŸ¬ ê°€ìš© ì˜ì—­ì— ê±¸ì³ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ êµ¬ì„± ìš”ì†Œ ìë™ ë°°í¬
- **AWS ì„œë¹„ìŠ¤ í†µí•©**: IAM, VPC, ELB, ECR ë“± ë‹¤ë¥¸ AWS ì„œë¹„ìŠ¤ì™€ ì›í™œí•œ í†µí•©
- **ë³´ì•ˆ ê°•í™”**: AWS ë³´ì•ˆ ëª¨ë¸ê³¼ í†µí•©ëœ Kubernetes ë³´ì•ˆ ê¸°ëŠ¥ ì œê³µ
- **í™•ì¥ì„±**: ì›Œí¬ë¡œë“œ ìš”êµ¬ ì‚¬í•­ì— ë”°ë¼ ì‰½ê²Œ í™•ì¥ ê°€ëŠ¥í•œ ë…¸ë“œ ê·¸ë£¹ ê´€ë¦¬

#### **Terraformì„ ì‚¬ìš©í•˜ëŠ” ì´ì :**
- **ì¸í”„ë¼ ì½”ë“œí™”(IaC)**: ì¸í”„ë¼ë¥¼ ì½”ë“œë¡œ ì •ì˜í•˜ì—¬ ë²„ì „ ê´€ë¦¬ ë° í˜‘ì—… ìš©ì´
- **ì„ ì–¸ì  êµ¬ì„±**: ì›í•˜ëŠ” ìµœì¢… ìƒíƒœë¥¼ ì •ì˜í•˜ê³  Terraformì´ í•„ìš”í•œ ë³€ê²½ ì‚¬í•­ ì²˜ë¦¬
- **ë©±ë“±ì„±**: ë™ì¼í•œ ì½”ë“œë¥¼ ì—¬ëŸ¬ ë²ˆ ì ìš©í•´ë„ ë™ì¼í•œ ê²°ê³¼ ë³´ì¥
- **ëª¨ë“ˆí™”**: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“ˆì„ í†µí•´ ì¸í”„ë¼ êµ¬ì„± ìš”ì†Œ ì¶”ìƒí™”
- **ìƒíƒœ ê´€ë¦¬**: ì¸í”„ë¼ ìƒíƒœë¥¼ ì¶”ì í•˜ì—¬ ë³€ê²½ ì‚¬í•­ ê´€ë¦¬ ë° ë“œë¦¬í”„íŠ¸ ê°ì§€

### ğŸ¯ í”„ë¡œì íŠ¸ì˜ ì£¼ìš” ëª©í‘œ

1. **ìë™í™”ëœ EKS ë°°í¬**: Terraformì„ ì‚¬ìš©í•˜ì—¬ EKS í´ëŸ¬ìŠ¤í„° ë° ê´€ë ¨ AWS ë¦¬ì†ŒìŠ¤ì˜ ë°°í¬ ìë™í™”
2. **í™˜ê²½ ì¼ê´€ì„±**: ê°œë°œ, ìŠ¤í…Œì´ì§•, í”„ë¡œë•ì…˜ ë“± ëª¨ë“  í™˜ê²½ì—ì„œ ì¼ê´€ëœ ì¸í”„ë¼ êµ¬ì„± ìœ ì§€
3. **ëª¨ë“ˆí™” ë° ì¬ì‚¬ìš©ì„±**: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“ˆì„ í†µí•´ ì¸í”„ë¼ êµ¬ì„± ìš”ì†Œ ì¶”ìƒí™” ë° ìœ ì§€ë³´ìˆ˜ ìš©ì´ì„± í–¥ìƒ
4. **ë³´ì•ˆ ê°•í™”**: IAM ì—­í• , ë³´ì•ˆ ê·¸ë£¹, KMS ì•”í˜¸í™” ë“±ì„ í†µí•œ ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€ êµ¬í˜„
5. **í™•ì¥ì„±**: ë‹¤ì–‘í•œ ì›Œí¬ë¡œë“œ ìš”êµ¬ ì‚¬í•­ì— ë§ê²Œ í™•ì¥ ê°€ëŠ¥í•œ ì¸í”„ë¼ êµ¬ì¶•
6. **ìš´ì˜ íš¨ìœ¨ì„±**: Kubernetes ì• ë“œì˜¨ ë° ë„êµ¬ë¥¼ í†µí•œ í´ëŸ¬ìŠ¤í„° ìš´ì˜ ë° ê´€ë¦¬ íš¨ìœ¨ì„± í–¥ìƒ

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ğŸ“š ëª¨ë“ˆí™”ëœ ì¸í”„ë¼ êµ¬ì„±
- **ìœ ì—°í•œ ë„¤íŠ¸ì›Œí¬ ì„¤ê³„**: VPC, ì„œë¸Œë„·, NAT ê²Œì´íŠ¸ì›¨ì´, VPC ì—”ë“œí¬ì¸íŠ¸ ë“±ì„ í¬í•¨í•œ ì™„ì „í•œ ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ êµ¬ì„±ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ìµœì í™”ëœ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ ì œê³µ
- **ë‹¤ì–‘í•œ ë…¸ë“œ ìœ í˜• ì§€ì›**: EKS Managed Node Group, Self Managed Node Group, Fargate Profile ë“± ë‹¤ì–‘í•œ ì»´í“¨íŒ… ì˜µì…˜ì„ ì œê³µí•˜ì—¬ ì›Œí¬ë¡œë“œ íŠ¹ì„±ì— ë§ëŠ” ìµœì ì˜ ì¸í”„ë¼ ì„ íƒ ê°€ëŠ¥
- **í™˜ê²½ë³„ êµ¬ì„±**: ê°œë°œ, ìŠ¤í…Œì´ì§•, í”„ë¡œë•ì…˜ ë“± ë‹¤ì–‘í•œ í™˜ê²½ì— ëŒ€í•œ ë¶„ë¦¬ëœ ì„¤ì • ê´€ë¦¬ë¡œ í™˜ê²½ ê°„ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ë©´ì„œ í™˜ê²½ë³„ íŠ¹ì„± ë°˜ì˜ ê°€ëŠ¥
- **ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“ˆ**: í‘œì¤€í™”ëœ ëª¨ë“ˆì„ í†µí•´ ì¸í”„ë¼ êµ¬ì„± ìš”ì†Œë¥¼ ì¶”ìƒí™”í•˜ì—¬ ì½”ë“œ ì¤‘ë³µì„ ì¤„ì´ê³  ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

### âš™ï¸ ê°•ë ¥í•œ Kubernetes ê¸°ëŠ¥
- **í¬ê´„ì ì¸ ì• ë“œì˜¨ ì§€ì›**: AWS Load Balancer Controller, EBS/EFS CSI Driver, Metrics Server, CoreDNS ë“± ë‹¤ì–‘í•œ Kubernetes ì• ë“œì˜¨ì„ ì‰½ê²Œ ë°°í¬í•˜ê³  ê´€ë¦¬í•˜ì—¬ í´ëŸ¬ìŠ¤í„° ê¸°ëŠ¥ í™•ì¥
- **ìë™ í™•ì¥**: Cluster Autoscaler, Karpenter ë“±ì„ í†µí•œ ì›Œí¬ë¡œë“œ ê¸°ë°˜ ìë™ í™•ì¥ ê¸°ëŠ¥ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš© ìµœì í™” ë° ë¹„ìš© ì ˆê°
- **GitOps ì§€ì›**: ArgoCDë¥¼ í†µí•œ ì„ ì–¸ì  ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ë° ê´€ë¦¬ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ í”„ë¡œì„¸ìŠ¤ ìë™í™” ë° ì¼ê´€ì„± ìœ ì§€
- **ì›Œí¬ë¡œë“œ ê´€ë¦¬**: ë‹¤ì–‘í•œ Kubernetes ì›Œí¬ë¡œë“œ(Deployment, StatefulSet, DaemonSet ë“±)ë¥¼ ì‰½ê²Œ ë°°í¬í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” êµ¬ì¡° ì œê³µ

### ğŸ”’ ë³´ì•ˆ ë° ì ‘ê·¼ ì œì–´
- **IRSA(IAM Roles for Service Accounts)**: Kubernetes ì„œë¹„ìŠ¤ ê³„ì •ì— IAM ì—­í•  ì—°ê²°ì„ í†µí•œ ì„¸ë¶„í™”ëœ ê¶Œí•œ ê´€ë¦¬ë¡œ ìµœì†Œ ê¶Œí•œ ì›ì¹™ êµ¬í˜„
- **KMS ì•”í˜¸í™”**: EKS í´ëŸ¬ìŠ¤í„° ë° ê´€ë ¨ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì•”í˜¸í™” ì§€ì›ìœ¼ë¡œ ë°ì´í„° ë³´ì•ˆ ê°•í™”
- **ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ**: ì„¸ë¶„í™”ëœ ë³´ì•ˆ ê·¸ë£¹ ë° ë„¤íŠ¸ì›Œí¬ ì •ì±…ì„ í†µí•œ íŠ¸ë˜í”½ ì œì–´ë¡œ í´ëŸ¬ìŠ¤í„° ë‚´/ì™¸ë¶€ í†µì‹  ë³´ì•ˆ ê°•í™”
- **ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€**: AWS ë° Kubernetes ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€ë¥¼ ê¸°ë³¸ìœ¼ë¡œ êµ¬í˜„í•˜ì—¬ ë³´ì•ˆ ì·¨ì•½ì  ìµœì†Œí™”
- **ì¸ì¦ ë° ê¶Œí•œ ê´€ë¦¬**: AWS IAMê³¼ Kubernetes RBACì˜ í†µí•©ì„ í†µí•œ ê°•ë ¥í•œ ì¸ì¦ ë° ê¶Œí•œ ê´€ë¦¬ ì²´ê³„ êµ¬ì¶•

### ğŸ“ˆ ìš´ì˜ íš¨ìœ¨ì„±
- **ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§**: AWS CloudWatch, Fluent Bit ë“±ì„ í†µí•œ í†µí•© ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„° ìƒíƒœ ë° ì„±ëŠ¥ ì‹¤ì‹œê°„ íŒŒì•…
- **ë°±ì—… ë° ë³µêµ¬**: Veleroë¥¼ í†µí•œ í´ëŸ¬ìŠ¤í„° ë¦¬ì†ŒìŠ¤ ë°±ì—… ë° ë³µêµ¬ ì§€ì›ìœ¼ë¡œ ë°ì´í„° ì†ì‹¤ ë°©ì§€ ë° ì‹ ì†í•œ ë³µêµ¬ ê°€ëŠ¥
- **ë¹„ìš© ìµœì í™”**: ì ì ˆí•œ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜• ì„ íƒ ë° ìë™ í™•ì¥ì„ í†µí•œ ë¹„ìš© íš¨ìœ¨ì„± í–¥ìƒìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ë¦¬ì†ŒìŠ¤ ë¹„ìš© ì ˆê°
- **ìš´ì˜ ìë™í™”**: ë°˜ë³µì ì¸ ìš´ì˜ ì‘ì—…ì„ ìë™í™”í•˜ì—¬ ìš´ì˜ ë¶€ë‹´ ê°ì†Œ ë° ì¸ì  ì˜¤ë¥˜ ìµœì†Œí™”
- **ë¬¸ì œ í•´ê²° ë„êµ¬**: í´ëŸ¬ìŠ¤í„° ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ë¬¸ì œë¥¼ ì‹ ì†í•˜ê²Œ ì§„ë‹¨í•˜ê³  í•´ê²°í•  ìˆ˜ ìˆëŠ” ë„êµ¬ ë° í”„ë¡œì„¸ìŠ¤ ì œê³µ

### ğŸ‘¨â€ğŸ’» ê°œë°œì ê²½í—˜
- **ì¼ê´€ëœ í™˜ê²½**: ê°œë°œë¶€í„° í”„ë¡œë•ì…˜ê¹Œì§€ ì¼ê´€ëœ í™˜ê²½ ì œê³µìœ¼ë¡œ ê°œë°œì ê²½í—˜ í–¥ìƒ ë° "works on my machine" ë¬¸ì œ í•´ì†Œ
- **ì¸í”„ë¼ ì½”ë“œí™”**: ì¸í”„ë¼ë¥¼ ì½”ë“œë¡œ ê´€ë¦¬í•˜ì—¬ ë²„ì „ ê´€ë¦¬ ë° í˜‘ì—…ì´ ìš©ì´í•˜ê³  ì¸í”„ë¼ ë³€ê²½ ì´ë ¥ ì¶”ì  ê°€ëŠ¥
- **ìë™í™”ëœ ì›Œí¬í”Œë¡œìš°**: CI/CD íŒŒì´í”„ë¼ì¸ê³¼ì˜ í†µí•©ì„ í†µí•œ ìë™í™”ëœ ë°°í¬ ì›Œí¬í”Œë¡œìš°ë¡œ ê°œë°œ-í…ŒìŠ¤íŠ¸-ë°°í¬ ì£¼ê¸° ë‹¨ì¶•
- **ì…€í”„ ì„œë¹„ìŠ¤ ì¸í”„ë¼**: ê°œë°œìê°€ í•„ìš”í•œ ì¸í”„ë¼ë¥¼ ì…€í”„ ì„œë¹„ìŠ¤ë¡œ í”„ë¡œë¹„ì €ë‹í•  ìˆ˜ ìˆëŠ” ê¸°ë°˜ ì œê³µ
- **í‘œì¤€í™”ëœ ê°œë°œ í™˜ê²½**: ëª¨ë“  ê°œë°œìì—ê²Œ ë™ì¼í•œ ê°œë°œ í™˜ê²½ì„ ì œê³µí•˜ì—¬ í˜‘ì—… íš¨ìœ¨ì„± í–¥ìƒ ë° ì˜¨ë³´ë”© ì‹œê°„ ë‹¨ì¶•

---

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

ì´ í”„ë¡œì íŠ¸ëŠ” ëª¨ë“ˆí™”ëœ êµ¬ì¡°ë¡œ ì„¤ê³„ë˜ì–´ ìˆì–´ ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ë©°, ê° ëª¨ë“ˆì€ íŠ¹ì • AWS ë¦¬ì†ŒìŠ¤ ë˜ëŠ” ê´€ë ¨ ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. ì•„ë˜ëŠ” í”„ë¡œì íŠ¸ì˜ ì£¼ìš” ë””ë ‰í† ë¦¬ êµ¬ì¡°ì…ë‹ˆë‹¤.

### ğŸ“Š ë””ë ‰í† ë¦¬ êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨

ì•„ë˜ëŠ” í”„ë¡œì íŠ¸ì˜ ì£¼ìš” ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¥¼ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„í•œ ë‹¤ì´ì–´ê·¸ë¨ì…ë‹ˆë‹¤:

```mermaid
flowchart TD
    classDef rootNode fill:#f9f,stroke:#333,stroke-width:2px
    classDef envNode fill:#bbf,stroke:#33f,stroke-width:1px
    classDef moduleNode fill:#dfd,stroke:#3a3,stroke-width:1px
    classDef chartNode fill:#ffd,stroke:#aa3,stroke-width:1px
    classDef templateNode fill:#ddd,stroke:#333,stroke-width:1px

    Root["AWS EKS Terraform"] --> ENV["ENV\ní™˜ê²½ë³„ ì„¤ì • ë””ë ‰í† ë¦¬"]
    Root --> modules["modules\nì¬ì‚¬ìš© ê°€ëŠ¥í•œ Terraform ëª¨ë“ˆ"]
    Root --> charts["all-k8s-addon-charts\nKubernetes ì• ë“œì˜¨ Helm ì°¨íŠ¸"]
    Root --> templates["templates\ní…œí”Œë¦¿ íŒŒì¼"]

    %% ENV ë””ë ‰í† ë¦¬ êµ¬ì¡°
    ENV --> DEV["DEV\nê°œë°œ í™˜ê²½ ì„¤ì •"]
    DEV --> ECR["00_ECR\nECR ì„¤ì •"]
    DEV --> Network["01_Network\në„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ ì„¤ì •"]
    DEV --> EKS["02_EKS\nEKS í´ëŸ¬ìŠ¤í„° ì„¤ì •"]
    DEV --> Workload["03_Workload\nì›Œí¬ë¡œë“œ ê´€ë ¨ ì„¤ì •"]
    DEV --> S3["04_S3\nS3 ë²„í‚· ì„¤ì •"]

    %% modules ë””ë ‰í† ë¦¬ êµ¬ì¡°
    modules --> acm["acm\nAWS Certificate Manager"]
    modules --> aws_kms["aws-kms\nAWS Key Management Service"]
    modules --> eks_addons["eks-addons\nEKS ì• ë“œì˜¨"]
    modules --> eks_cluster["eks-cluster\nEKS í´ëŸ¬ìŠ¤í„°"]
    modules --> iam["iam\nIAM ê´€ë¦¬"]
    modules --> irsa["irsa\nIAM Roles for Service Accounts"]
    modules --> irsa_workloads["irsa_workloads\nì›Œí¬ë¡œë“œìš© IRSA"]
    modules --> kms["kms\nKey Management Service"]
    modules --> k8s_addons["kubernetes_addons\nKubernetes ì• ë“œì˜¨"]
    modules --> k8s_workloads["kubernetes_workloads\nKubernetes ì›Œí¬ë¡œë“œ"]
    modules --> network["network\në„¤íŠ¸ì›Œí¬ ì¸í”„ë¼"]
    modules --> secret_manager["secret_manager\nAWS Secrets Manager"]
    modules --> security_group["security_group\në³´ì•ˆ ê·¸ë£¹"]

    %% all-k8s-addon-charts ë””ë ‰í† ë¦¬ êµ¬ì¡°
    charts --> addon_apps["addon-apps\nì• ë“œì˜¨ ì• í”Œë¦¬ì¼€ì´ì…˜"]
    charts --> addon_charts["addon-charts\nì• ë“œì˜¨ ì°¨íŠ¸"]

    %% ì£¼ìš” ëª¨ë“ˆ ê°„ì˜ ê´€ê³„
    EKS -.-> Network
    EKS -.-> ECR
    Workload -.-> EKS

    %% ìŠ¤íƒ€ì¼ ì ìš©
    class Root rootNode
    class ENV,DEV,ECR,Network,EKS,Workload,S3 envNode
    class modules,acm,aws_kms,eks_addons,eks_cluster,iam,irsa,irsa_workloads,kms,k8s_addons,k8s_workloads,network,secret_manager,security_group moduleNode
    class charts,addon_apps,addon_charts chartNode
    class templates templateNode
```

í…ìŠ¤íŠ¸ í˜•ì‹ì˜ ë””ë ‰í† ë¦¬ êµ¬ì¡°:

```
.
â”œâ”€â”€ ENV                     # í™˜ê²½ë³„ ì„¤ì • ë””ë ‰í† ë¦¬
â”‚   â””â”€â”€ DEV                 # ê°œë°œ í™˜ê²½ ì„¤ì •
â”‚       â”œâ”€â”€ 00_ECR          # ECR(Elastic Container Registry) ì„¤ì •
â”‚       â”œâ”€â”€ 01_Network      # ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ ì„¤ì •(VPC, ì„œë¸Œë„· ë“±)
â”‚       â”œâ”€â”€ 02_EKS          # EKS í´ëŸ¬ìŠ¤í„° ì„¤ì •
â”‚       â”œâ”€â”€ 03_Workload     # ì›Œí¬ë¡œë“œ ê´€ë ¨ ì„¤ì •(ArgoCD, Karpenter ë“±)
â”‚       â””â”€â”€ 04_S3           # S3 ë²„í‚· ì„¤ì •
â”œâ”€â”€ modules                 # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ Terraform ëª¨ë“ˆ
â”‚   â”œâ”€â”€ acm                 # AWS Certificate Manager ëª¨ë“ˆ
â”‚   â”œâ”€â”€ aws-kms             # AWS Key Management Service ëª¨ë“ˆ
â”‚   â”œâ”€â”€ eks-addons          # EKS ì• ë“œì˜¨ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ eks-cluster         # EKS í´ëŸ¬ìŠ¤í„° ëª¨ë“ˆ
â”‚   â”œâ”€â”€ iam                 # IAM(Identity and Access Management) ëª¨ë“ˆ
â”‚   â”œâ”€â”€ irsa                # IRSA(IAM Roles for Service Accounts) ëª¨ë“ˆ
â”‚   â”œâ”€â”€ irsa_workloads      # ì›Œí¬ë¡œë“œìš© IRSA ëª¨ë“ˆ
â”‚   â”œâ”€â”€ kms                 # KMS(Key Management Service) ëª¨ë“ˆ
â”‚   â”œâ”€â”€ kubernetes_addons   # Kubernetes ì• ë“œì˜¨ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ kubernetes_workloads # Kubernetes ì›Œí¬ë¡œë“œ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ network             # ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ secret_manager      # AWS Secrets Manager ëª¨ë“ˆ
â”‚   â””â”€â”€ security_group      # ë³´ì•ˆ ê·¸ë£¹ ëª¨ë“ˆ
â”œâ”€â”€ all-k8s-addon-charts    # Kubernetes ì• ë“œì˜¨ Helm ì°¨íŠ¸
â”‚   â”œâ”€â”€ addon-apps          # ì• ë“œì˜¨ ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â””â”€â”€ addon-charts        # ì• ë“œì˜¨ ì°¨íŠ¸(argo-rbac, aws-load-balancer-controller ë“±)
â””â”€â”€ templates               # í…œí”Œë¦¿ íŒŒì¼(ì‚¬ìš©ì ë°ì´í„° ìŠ¤í¬ë¦½íŠ¸ ë“±)
```

### ğŸ“ ì£¼ìš” ëª¨ë“ˆ ë° ë””ë ‰í† ë¦¬ ì„¤ëª…

#### ğŸ† í•µì‹¬ ëª¨ë“ˆ

1. **eks-cluster**: AWS EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.
    - **ì£¼ìš” íŒŒì¼**: `01_eks.tf`, `02_eks_addon.tf`, `03_eks_iam.tf`, `04_eks_security_group.tf`, `05_eks_node_group.tf`
    - **ê¸°ëŠ¥**:
        - ë‹¤ì–‘í•œ ë…¸ë“œ ìœ í˜• ì§€ì›(EKS Managed Node Group, Self Managed Node Group, Fargate Profile)
        - í´ëŸ¬ìŠ¤í„° ì• ë“œì˜¨ ê´€ë¦¬(CoreDNS, kube-proxy, VPC CNI)
        - IAM ì—­í•  ë° ì •ì±… ì„¤ì •ì„ í†µí•œ ê¶Œí•œ ê´€ë¦¬
        - ë³´ì•ˆ ê·¸ë£¹ êµ¬ì„±ìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ì œì–´
        - KMS ì•”í˜¸í™”ë¥¼ í†µí•œ ë°ì´í„° ë³´ì•ˆ ê°•í™”
    - **ì‚¬ìš© ì‚¬ë¡€**: ì™„ì „ ê´€ë¦¬í˜• Kubernetes í´ëŸ¬ìŠ¤í„° ë°°í¬ ë° êµ¬ì„±

2. **network**: VPC, ì„œë¸Œë„·, ë¼ìš°íŒ… í…Œì´ë¸”, NAT ê²Œì´íŠ¸ì›¨ì´, VPC ì—”ë“œí¬ì¸íŠ¸ ë“± ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ë¥¼ êµ¬ì„±í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.
    - **ì£¼ìš” íŒŒì¼**: `01_vpc.tf`, `02_subnet.tf`, `03_igw.tf`, `05_nat.tf`, `06_route_table.tf`, `09_vpc_endpoint.tf`, `10_security_group.tf`
    - **ê¸°ëŠ¥**:
        - VPC ë° ì„œë¸Œë„· ìƒì„±(í¼ë¸”ë¦­, í”„ë¼ì´ë¹—, íŒŒë“œ, ë°ì´í„°ë² ì´ìŠ¤ ì„œë¸Œë„·)
        - ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ ë° NAT ê²Œì´íŠ¸ì›¨ì´ ì„¤ì •ìœ¼ë¡œ ì¸í„°ë„· ì—°ê²° ê´€ë¦¬
        - VPC ì—”ë“œí¬ì¸íŠ¸ êµ¬ì„±ìœ¼ë¡œ AWS ì„œë¹„ìŠ¤ì— ëŒ€í•œ ë¹„ê³µê°œ ì—°ê²° ì œê³µ
        - ë³´ì•ˆ ê·¸ë£¹ ì„¤ì •ì„ í†µí•œ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ì œì–´
        - EFS(Elastic File System) êµ¬ì„±ìœ¼ë¡œ ì˜êµ¬ ìŠ¤í† ë¦¬ì§€ ì œê³µ
    - **ì‚¬ìš© ì‚¬ë¡€**: EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìœ„í•œ ì•ˆì „í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ êµ¬ì¶•

3. **irsa**: Kubernetes ì„œë¹„ìŠ¤ ê³„ì •ì— ëŒ€í•œ IAM ì—­í• ì„ ìƒì„±í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ Kubernetes íŒŒë“œê°€ AWS ì„œë¹„ìŠ¤ì— ì•ˆì „í•˜ê²Œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - **ì£¼ìš” íŒŒì¼**: `main.tf`, `outputs.tf`, `variables.tf`
    - **ê¸°ëŠ¥**:
        - Kubernetes ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë° ì„œë¹„ìŠ¤ ê³„ì • ìƒì„±
        - IAM ì—­í•  ë° ì •ì±… ì„¤ì •ìœ¼ë¡œ ì„¸ë¶„í™”ëœ ê¶Œí•œ ê´€ë¦¬
        - OIDC(OpenID Connect) ê¸°ë°˜ ì¸ì¦ êµ¬ì„±ìœ¼ë¡œ ì•ˆì „í•œ ì¸ì¦ ì œê³µ
        - ìµœì†Œ ê¶Œí•œ ì›ì¹™ êµ¬í˜„ì„ í†µí•œ ë³´ì•ˆ ê°•í™”
    - **ì‚¬ìš© ì‚¬ë¡€**: Kubernetes íŒŒë“œê°€ AWS ì„œë¹„ìŠ¤(S3, DynamoDB, SQS ë“±)ì— ì•ˆì „í•˜ê²Œ ì•¡ì„¸ìŠ¤í•´ì•¼ í•˜ëŠ” ê²½ìš°

4. **kubernetes_addons**: EKS í´ëŸ¬ìŠ¤í„°ì— ë‹¤ì–‘í•œ Kubernetes ì• ë“œì˜¨ì„ ë°°í¬í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.
    - **ì£¼ìš” íŒŒì¼**: `main.tf`, `locals.tf`, `variables.tf`, ê° ì• ë“œì˜¨ë³„ ë””ë ‰í† ë¦¬
    - **ê¸°ëŠ¥**:
        - AWS Load Balancer Controller: Kubernetes ì„œë¹„ìŠ¤ë¥¼ AWS ALB/NLBì™€ í†µí•©
        - AWS EBS CSI Driver: EBS ë³¼ë¥¨ì„ Kubernetes PersistentVolumeìœ¼ë¡œ ì‚¬ìš©
        - AWS EFS CSI Driver: EFS íŒŒì¼ ì‹œìŠ¤í…œì„ Kubernetes PersistentVolumeìœ¼ë¡œ ì‚¬ìš©
        - Metrics Server: íŒŒë“œ ë° ë…¸ë“œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ìˆ˜ì§‘
        - CoreDNS: Kubernetes í´ëŸ¬ìŠ¤í„° ë‚´ DNS ì„œë¹„ìŠ¤ ì œê³µ
        - Cluster Autoscaler: ì›Œí¬ë¡œë“œ ìš”êµ¬ì— ë”°ë¼ ë…¸ë“œ ìë™ í™•ì¥
        - ê¸°íƒ€ ë‹¤ì–‘í•œ ì• ë“œì˜¨(ArgoCD, Cert Manager, External DNS ë“±)
    - **ì‚¬ìš© ì‚¬ë¡€**: EKS í´ëŸ¬ìŠ¤í„° ê¸°ëŠ¥ í™•ì¥ ë° ìš´ì˜ íš¨ìœ¨ì„± í–¥ìƒ

5. **kubernetes_workloads**: Kubernetes ì›Œí¬ë¡œë“œë¥¼ ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.
    - **ì£¼ìš” íŒŒì¼**: `main.tf`, `locals.tf`, `variables.tf`
    - **ê¸°ëŠ¥**:
        - ArgoCD Application ë¦¬ì†ŒìŠ¤ ê´€ë¦¬
        - External Secrets êµ¬ì„±
        - ë‹¤ì–‘í•œ Kubernetes ì›Œí¬ë¡œë“œ ë°°í¬ ë° ê´€ë¦¬
    - **ì‚¬ìš© ì‚¬ë¡€**: GitOps ë°©ì‹ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ë° ê´€ë¦¬

#### ğŸ”§ ì§€ì› ëª¨ë“ˆ

1. **aws-kms**: AWS KMS(Key Management Service) í‚¤ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.
    - **ì£¼ìš” íŒŒì¼**: `main.tf`, `outputs.tf`, `variables.tf`
    - **ê¸°ëŠ¥**:
        - KMS í‚¤ ìƒì„± ë° ê´€ë¦¬
        - í‚¤ ì •ì±… ë° ë³„ì¹­ ì„¤ì •
        - í‚¤ íšŒì „ êµ¬ì„±
    - **ì‚¬ìš© ì‚¬ë¡€**: EKS í´ëŸ¬ìŠ¤í„° ë° ê´€ë ¨ ë¦¬ì†ŒìŠ¤ì˜ ì•”í˜¸í™”ì— ì‚¬ìš©

2. **acm**: AWS Certificate Manager ì¸ì¦ì„œë¥¼ ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.
    - **ì£¼ìš” íŒŒì¼**: `01_acm.tf`, `data.tf`, `outputs.tf`, `variables.tf`
    - **ê¸°ëŠ¥**:
        - SSL/TLS ì¸ì¦ì„œ ìš”ì²­ ë° ê´€ë¦¬
        - ë„ë©”ì¸ ê²€ì¦ êµ¬ì„±
        - ì¸ì¦ì„œ ê°±ì‹  ìë™í™”
    - **ì‚¬ìš© ì‚¬ë¡€**: HTTPS í†µì‹ ì„ ìœ„í•œ ì¸ì¦ì„œ ê´€ë¦¬

3. **iam**: IAM ì—­í• , ì •ì±…, ì‚¬ìš©ì, ê·¸ë£¹ ë“±ì„ ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.
    - **ì£¼ìš” íŒŒì¼**: `01_role.tf`, `02_user.tf`, `03_group.tf`, `04_policy.tf`
    - **ê¸°ëŠ¥**:
        - IAM ì—­í•  ë° ì •ì±… ìƒì„±
        - ì‚¬ìš©ì ë° ê·¸ë£¹ ê´€ë¦¬
        - ê¶Œí•œ ê²½ê³„ ì„¤ì •
        - ìµœì†Œ ê¶Œí•œ ì›ì¹™ êµ¬í˜„
    - **ì‚¬ìš© ì‚¬ë¡€**: AWS ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ì œì–´ ë° ê¶Œí•œ ê´€ë¦¬

4. **security_group**: AWS ë³´ì•ˆ ê·¸ë£¹ì„ ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.
    - **ì£¼ìš” íŒŒì¼**: `main.tf`, `rules.tf`, `outputs.tf`, `variable.tf`
    - **ê¸°ëŠ¥**:
        - ë³´ì•ˆ ê·¸ë£¹ ìƒì„± ë° ê´€ë¦¬
        - ì¸ë°”ìš´ë“œ ë° ì•„ì›ƒë°”ìš´ë“œ ê·œì¹™ ì„¤ì •
        - ë³´ì•ˆ ê·¸ë£¹ ê°„ ì°¸ì¡° ê´€ë¦¬
    - **ì‚¬ìš© ì‚¬ë¡€**: EC2 ì¸ìŠ¤í„´ìŠ¤, RDS ë°ì´í„°ë² ì´ìŠ¤, EKS í´ëŸ¬ìŠ¤í„° ë“±ì˜ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ì œì–´

5. **secret_manager**: AWS Secrets Managerë¥¼ í†µí•´ ë¹„ë°€ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.
    - **ì£¼ìš” íŒŒì¼**: `01_secret_manager.tf`, `outputs.tf`, `variables.tf`
    - **ê¸°ëŠ¥**:
        - ë¹„ë°€ ì •ë³´ ìƒì„± ë° ê´€ë¦¬
        - ë¹„ë°€ ì •ë³´ íšŒì „ êµ¬ì„±
        - ì•¡ì„¸ìŠ¤ ì •ì±… ì„¤ì •
    - **ì‚¬ìš© ì‚¬ë¡€**: ë°ì´í„°ë² ì´ìŠ¤ ìê²© ì¦ëª…, API í‚¤, í† í° ë“±ì˜ ë¯¼ê°í•œ ì •ë³´ ê´€ë¦¬

6. **eks-addons**: EKS í´ëŸ¬ìŠ¤í„°ì— ì¶”ê°€ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.
    - **ì£¼ìš” íŒŒì¼**: `06_karpenter.tf`, `output.tf`, `variable.tf`
    - **ê¸°ëŠ¥**:
        - Karpenter ì„¤ì • ë° êµ¬ì„±
        - ê¸°íƒ€ EKS ê´€ë ¨ ì• ë“œì˜¨ ê´€ë¦¬
    - **ì‚¬ìš© ì‚¬ë¡€**: EKS í´ëŸ¬ìŠ¤í„°ì˜ ìë™ í™•ì¥ ë° ê´€ë¦¬ ê¸°ëŠ¥ í–¥ìƒ

7. **irsa_workloads**: ì›Œí¬ë¡œë“œë³„ IRSA(IAM Roles for Service Accounts)ë¥¼ ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.
    - **ì£¼ìš” íŒŒì¼**: `main.tf`, `outputs.tf`, `variables.tf`
    - **ê¸°ëŠ¥**:
        - ì›Œí¬ë¡œë“œë³„ IAM ì—­í•  ë° ì •ì±… ì„¤ì •
        - ì„œë¹„ìŠ¤ ê³„ì •ê³¼ IAM ì—­í•  ì—°ê²°
    - **ì‚¬ìš© ì‚¬ë¡€**: íŠ¹ì • ì›Œí¬ë¡œë“œì— ëŒ€í•œ ì„¸ë¶„í™”ëœ ê¶Œí•œ ê´€ë¦¬

### ê¸°íƒ€ ë””ë ‰í† ë¦¬ ì„¤ëª…

1. **all-k8s-addon-charts**: Kubernetes ì• ë“œì˜¨ì„ ìœ„í•œ Helm ì°¨íŠ¸ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
    - **addon-apps**: ì• ë“œì˜¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì •ì˜í•˜ëŠ” ì°¨íŠ¸
        - **ì£¼ìš” íŒŒì¼**: `Chart.yaml`, `values.yaml`, `templates/Applications.yaml`
        - **ê¸°ëŠ¥**: ArgoCDë¥¼ í†µí•´ ë°°í¬í•  ì• í”Œë¦¬ì¼€ì´ì…˜ ì •ì˜
    - **addon-charts**: ê° ì• ë“œì˜¨ì— ëŒ€í•œ êµ¬ì²´ì ì¸ ì°¨íŠ¸ ì •ì˜
        - **í¬í•¨ëœ ì°¨íŠ¸**: argo-rbac, aws-load-balancer-controller, cert-manager, external-dns, kyverno ë“±
        - **ê¸°ëŠ¥**: ê° ì• ë“œì˜¨ì˜ êµ¬ì„± ë° ë°°í¬ ì •ì˜
    - **ì‚¬ìš© ì‚¬ë¡€**: GitOps ë°©ì‹ìœ¼ë¡œ Kubernetes ì• ë“œì˜¨ ê´€ë¦¬

2. **templates**: ì‚¬ìš©ì ë°ì´í„° ìŠ¤í¬ë¦½íŠ¸ ë“± ë‹¤ì–‘í•œ í…œí”Œë¦¿ íŒŒì¼ì„ í¬í•¨í•©ë‹ˆë‹¤.
    - **ì£¼ìš” íŒŒì¼**: `al2023_user_data.tpl`, `bottlerocket_user_data.tpl`, `linux_user_data.tpl`, `windows_user_data.tpl`
    - **ê¸°ëŠ¥**:
        - EC2 ì¸ìŠ¤í„´ìŠ¤ ë° ë…¸ë“œ ê·¸ë£¹ ì´ˆê¸°í™”ë¥¼ ìœ„í•œ ì‚¬ìš©ì ë°ì´í„° ìŠ¤í¬ë¦½íŠ¸ ì œê³µ
        - ë‹¤ì–‘í•œ ìš´ì˜ ì²´ì œ(Amazon Linux 2023, Bottlerocket, Linux, Windows) ì§€ì›
    - **ì‚¬ìš© ì‚¬ë¡€**: EKS ë…¸ë“œ ê·¸ë£¹ ìƒì„± ì‹œ ì´ˆê¸° ì„¤ì • ìë™í™”

### í™˜ê²½ ì„¤ì • ë””ë ‰í† ë¦¬(ENV) ì„¤ëª…

ENV ë””ë ‰í† ë¦¬ëŠ” ë‹¤ì–‘í•œ í™˜ê²½(ê°œë°œ, ìŠ¤í…Œì´ì§•, í”„ë¡œë•ì…˜ ë“±)ì— ëŒ€í•œ ì„¤ì •ì„ í¬í•¨í•©ë‹ˆë‹¤. í˜„ì¬ëŠ” DEV(ê°œë°œ) í™˜ê²½ë§Œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, í•„ìš”ì— ë”°ë¼ STG(ìŠ¤í…Œì´ì§•), PRD(í”„ë¡œë•ì…˜) ë“±ì˜ í™˜ê²½ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### DEV í™˜ê²½ êµ¬ì¡°

1. **00_ECR**:
    - ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ECR(Elastic Container Registry) ë¦¬í¬ì§€í† ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
    - ì´ë¯¸ì§€ ìŠ¤ìº” ë° íƒœê·¸ ë¶ˆë³€ì„± ì„¤ì •ì„ í¬í•¨í•©ë‹ˆë‹¤.
    - `Makefile`ì„ í†µí•´ ì‰½ê²Œ ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

2. **01_Network**:
    - VPC, ì„œë¸Œë„·, ë¼ìš°íŒ… í…Œì´ë¸”, NAT ê²Œì´íŠ¸ì›¨ì´ ë“± ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.
    - í¼ë¸”ë¦­ ë° í”„ë¼ì´ë¹— ì„œë¸Œë„·, íŒŒë“œ ì„œë¸Œë„·, ë°ì´í„°ë² ì´ìŠ¤ ì„œë¸Œë„· ë“±ì„ ì„¤ì •í•©ë‹ˆë‹¤.
    - VPC ì—”ë“œí¬ì¸íŠ¸, Direct Connect, Route53 ë“±ì˜ ì„¤ì •ì„ í¬í•¨í•©ë‹ˆë‹¤.
    - `terraform.tfvars.example` íŒŒì¼ì„ í†µí•´ í™˜ê²½ë³„ ë³€ìˆ˜ë¥¼ ì‰½ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

3. **02_EKS**:
    - EKS í´ëŸ¬ìŠ¤í„° ë° ë…¸ë“œ ê·¸ë£¹ì„ êµ¬ì„±í•©ë‹ˆë‹¤.
    - í´ëŸ¬ìŠ¤í„° ë²„ì „, ì—”ë“œí¬ì¸íŠ¸ ì•¡ì„¸ìŠ¤, ë³´ì•ˆ ê·¸ë£¹, IAM ì—­í•  ë“±ì„ ì„¤ì •í•©ë‹ˆë‹¤.
    - í´ëŸ¬ìŠ¤í„° ì• ë“œì˜¨(CoreDNS, kube-proxy, VPC CNI ë“±)ì„ êµ¬ì„±í•©ë‹ˆë‹¤.
    - ë…¸ë“œ ê·¸ë£¹ ì„¤ì •(ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•, í¬ê¸°, ìš©ëŸ‰ ìœ í˜• ë“±)ì„ í¬í•¨í•©ë‹ˆë‹¤.
    - `env` ë””ë ‰í† ë¦¬ì—ì„œ í™˜ê²½ë³„ ë³€ìˆ˜ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

4. **03_Workload**:
    - ArgoCD, Karpenter, Cluster Autoscaler ë“± Kubernetes ì›Œí¬ë¡œë“œë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
    - ì´ëŸ¬í•œ ì›Œí¬ë¡œë“œëŠ” í´ëŸ¬ìŠ¤í„°ì˜ ìš´ì˜ ë° ê´€ë¦¬ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.
    - GitOps ë°©ì‹ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ArgoCD ì„¤ì •ì„ í¬í•¨í•©ë‹ˆë‹¤.
    - ìë™ í™•ì¥ì„ ìœ„í•œ Karpenter ë° Cluster Autoscaler ì„¤ì •ì„ í¬í•¨í•©ë‹ˆë‹¤.

5. **04_S3**:
    - S3 ë²„í‚·ì„ ìƒì„±í•˜ê³  êµ¬ì„±í•©ë‹ˆë‹¤.
    - ì´ ë²„í‚·ì€ ë¡œê·¸, ë°±ì—…, ì •ì  íŒŒì¼ ë“±ì„ ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - `terraform.tfvars.example` íŒŒì¼ì„ í†µí•´ ë²„í‚· êµ¬ì„±ì„ ì‰½ê²Œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### í™˜ê²½ë³„ ì„¤ì • ë°©ë²•

í™˜ê²½ë³„ ì„¤ì •ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

1. **í™˜ê²½ë³„ ë””ë ‰í† ë¦¬ êµ¬ì¡°**:
    - ê° í™˜ê²½(DEV, STG, PRD ë“±)ì— ëŒ€í•´ ENV ë””ë ‰í† ë¦¬ ì•„ë˜ì— ë³„ë„ì˜ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
    - ê° í™˜ê²½ì€ ë™ì¼í•œ êµ¬ì¡°ë¥¼ ê°€ì§€ì§€ë§Œ í™˜ê²½ë³„ íŠ¹ì„±ì— ë§ê²Œ êµ¬ì„±ë©ë‹ˆë‹¤.

2. **í™˜ê²½ë³„ ë³€ìˆ˜ íŒŒì¼**:
    - `terraform.tfvars` íŒŒì¼ì„ í†µí•´ í™˜ê²½ë³„ ë³€ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
    - ì˜ˆì œ íŒŒì¼(`terraform.tfvars.example`)ì„ ì œê³µí•˜ì—¬ ì‚¬ìš©ìê°€ ì‰½ê²Œ ìì‹ ì˜ í™˜ê²½ì— ë§ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

3. **Makefileì„ í†µí•œ ìë™í™”**:
    - ê° ë””ë ‰í† ë¦¬ì—ëŠ” `Makefile`ì´ í¬í•¨ë˜ì–´ ìˆì–´ ì¼ê´€ëœ ëª…ë ¹ì–´ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - `make init`, `make plan`, `make apply`, `make destroy` ë“±ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ Terraform ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

4. **ìˆœì°¨ì  ë°°í¬**:
    - ë¦¬ì†ŒìŠ¤ëŠ” ìˆœì°¨ì ìœ¼ë¡œ ë°°í¬í•´ì•¼ í•©ë‹ˆë‹¤(00_ECR â†’ 01_Network â†’ 02_EKS â†’ 03_Workload â†’ 04_S3).
    - ì´ëŠ” ë¦¬ì†ŒìŠ¤ ê°„ì˜ ì˜ì¡´ì„±ì„ ê³ ë ¤í•œ ê²ƒìœ¼ë¡œ, ì˜ˆë¥¼ ë“¤ì–´ EKS í´ëŸ¬ìŠ¤í„°ëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ê°€ êµ¬ì„±ëœ í›„ì— ë°°í¬í•´ì•¼ í•©ë‹ˆë‹¤.

ì´ëŸ¬í•œ êµ¬ì¡°ë¥¼ í†µí•´ ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ì¼ê´€ëœ ë°©ì‹ìœ¼ë¡œ ì¸í”„ë¼ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìœ¼ë©°, í™˜ê²½ë³„ íŠ¹ì„±ì„ ì‰½ê²Œ ë°˜ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ“‹ ì‚¬ì „ ìš”êµ¬ì‚¬í•­

ì´ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ë„êµ¬ì™€ ê³„ì •ì´ í•„ìš”í•©ë‹ˆë‹¤:

### ğŸ› ï¸ í•„ìˆ˜ ë„êµ¬

| ë„êµ¬ | ë²„ì „ | ì„¤ëª… | ì„¤ì¹˜ ë§í¬ |
|:-----|:-----|:-----|:-----|
| [**Terraform**](https://www.terraform.io/downloads.html) | `>= 1.5.0` | ì¸í”„ë¼ë¥¼ ì½”ë“œë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë„êµ¬ | [ì„¤ì¹˜ ê°€ì´ë“œ](https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli) |
| [**AWS CLI**](https://aws.amazon.com/cli/) | `>= 2.11.0` | AWS ì„œë¹„ìŠ¤ì™€ ìƒí˜¸ ì‘ìš©í•˜ê¸° ìœ„í•œ ëª…ë ¹ì¤„ ì¸í„°í˜ì´ìŠ¤ | [ì„¤ì¹˜ ê°€ì´ë“œ](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html) |
| [**kubectl**](https://kubernetes.io/docs/tasks/tools/) | `>= 1.27.0` | Kubernetes í´ëŸ¬ìŠ¤í„°ì™€ ìƒí˜¸ ì‘ìš©í•˜ê¸° ìœ„í•œ ëª…ë ¹ì¤„ ë„êµ¬ | [ì„¤ì¹˜ ê°€ì´ë“œ](https://kubernetes.io/docs/tasks/tools/install-kubectl/) |
| [**Helm**](https://helm.sh/docs/intro/install/) | `>= 3.12.0` | Kubernetes íŒ¨í‚¤ì§€ ê´€ë¦¬ì | [ì„¤ì¹˜ ê°€ì´ë“œ](https://helm.sh/docs/intro/install/) |
| [**jq**](https://stedolan.github.io/jq/download/) | `>= 1.6` | JSON ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ëª…ë ¹ì¤„ ë„êµ¬ | [ì„¤ì¹˜ ê°€ì´ë“œ](https://stedolan.github.io/jq/download/) |
| [**Git**](https://git-scm.com/downloads) | `>= 2.40.0` | ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œ | [ì„¤ì¹˜ ê°€ì´ë“œ](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git) |
| [**eksctl**](https://eksctl.io/) | `>= 0.150.0` | EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•œ ëª…ë ¹ì¤„ ë„êµ¬ | [ì„¤ì¹˜ ê°€ì´ë“œ](https://eksctl.io/installation/) |
| [**aws-iam-authenticator**](https://docs.aws.amazon.com/eks/latest/userguide/install-aws-iam-authenticator.html) | `>= 0.6.0` | AWS IAM ìê²© ì¦ëª…ì„ ì‚¬ìš©í•˜ì—¬ Kubernetes í´ëŸ¬ìŠ¤í„°ì— ì¸ì¦í•˜ê¸° ìœ„í•œ ë„êµ¬ | [ì„¤ì¹˜ ê°€ì´ë“œ](https://docs.aws.amazon.com/eks/latest/userguide/install-aws-iam-authenticator.html) |

### ğŸ’» ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

| ìš”êµ¬ì‚¬í•­ | ìµœì†Œ ì‚¬ì–‘ | ê¶Œì¥ ì‚¬ì–‘ |
|:-----|:-----|:-----|
| **CPU** | 2 ì½”ì–´ | 4 ì½”ì–´ ì´ìƒ |
| **ë©”ëª¨ë¦¬** | 4 GB | 8 GB ì´ìƒ |
| **ë””ìŠ¤í¬ ê³µê°„** | 10 GB | 20 GB ì´ìƒ |
| **ìš´ì˜ ì²´ì œ** | Linux, macOS, Windows 10/11 with WSL2 | Linux, macOS |
| **ì¸í„°ë„· ì—°ê²°** | í•„ìˆ˜ (AWS API ë° íŒ¨í‚¤ì§€ ë‹¤ìš´ë¡œë“œìš©) | ê³ ì† ì—°ê²° ê¶Œì¥ |

### â˜ï¸ AWS ê³„ì • ìš”êµ¬ì‚¬í•­

#### ê¸°ë³¸ ìš”êµ¬ì‚¬í•­

- í™œì„±í™”ëœ AWS ê³„ì •
- AWS ê³„ì •ì— ëŒ€í•œ ê´€ë¦¬ì ì•¡ì„¸ìŠ¤ ê¶Œí•œ ë˜ëŠ” ì•„ë˜ ë‚˜ì—´ëœ ì„œë¹„ìŠ¤ì— ëŒ€í•œ íŠ¹ì • ê¶Œí•œ
- AWS ì„œë¹„ìŠ¤ í• ë‹¹ëŸ‰ì´ EKS í´ëŸ¬ìŠ¤í„° ë° ê´€ë ¨ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•˜ê¸°ì— ì¶©ë¶„í•œì§€ í™•ì¸
- ê²°ì œ ì•Œë¦¼ ì„¤ì • (ë¹„ìš© ê´€ë¦¬ë¥¼ ìœ„í•´ ê¶Œì¥)

#### í•„ìš”í•œ AWS ì„œë¹„ìŠ¤ ê¶Œí•œ

ë‹¤ìŒ ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê¶Œí•œì„ ê°€ì§„ IAM ì‚¬ìš©ì ë˜ëŠ” ì—­í• ì´ í•„ìš”í•©ë‹ˆë‹¤:

| AWS ì„œë¹„ìŠ¤ | í•„ìš”í•œ ì´ìœ  | ì£¼ìš” ê¶Œí•œ |
|------|------|------|
| EC2 | ë…¸ë“œ ì¸ìŠ¤í„´ìŠ¤, ë³´ì•ˆ ê·¸ë£¹, VPC ê´€ë¦¬ | ì¸ìŠ¤í„´ìŠ¤ ìƒì„±/ê´€ë¦¬, ë³´ì•ˆ ê·¸ë£¹ êµ¬ì„±, VPC ì„¤ì • |
| EKS | Kubernetes í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ | í´ëŸ¬ìŠ¤í„° ìƒì„±/ê´€ë¦¬, ë…¸ë“œ ê·¸ë£¹ ê´€ë¦¬ |
| IAM | ì—­í•  ë° ì •ì±… ê´€ë¦¬ | ì—­í•  ìƒì„±/ê´€ë¦¬, ì •ì±… ì—°ê²° |
| S3 | Terraform ìƒíƒœ íŒŒì¼ ë° ê¸°íƒ€ ë°ì´í„° ì €ì¥ | ë²„í‚· ìƒì„±/ê´€ë¦¬, ê°ì²´ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ |
| ECR | ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ì €ì¥ | ë¦¬í¬ì§€í† ë¦¬ ìƒì„±/ê´€ë¦¬, ì´ë¯¸ì§€ í‘¸ì‹œ/í’€ |
| CloudWatch | ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§ | ë¡œê·¸ ê·¸ë£¹ ìƒì„±/ê´€ë¦¬, ë©”íŠ¸ë¦­ ìˆ˜ì§‘ |
| KMS | ë°ì´í„° ì•”í˜¸í™” | í‚¤ ìƒì„±/ê´€ë¦¬, ì•”í˜¸í™”/ë³µí˜¸í™” |
| Route53 | DNS ê´€ë¦¬ | í˜¸ìŠ¤íŒ… ì˜ì—­ ìƒì„±/ê´€ë¦¬, ë ˆì½”ë“œ ì„¤ì • |
| ACM | SSL/TLS ì¸ì¦ì„œ ê´€ë¦¬ | ì¸ì¦ì„œ ìš”ì²­/ê´€ë¦¬, ë„ë©”ì¸ ê²€ì¦ |
| EFS | ì˜êµ¬ ìŠ¤í† ë¦¬ì§€ ì œê³µ | íŒŒì¼ ì‹œìŠ¤í…œ ìƒì„±/ê´€ë¦¬, ë§ˆìš´íŠ¸ ëŒ€ìƒ ì„¤ì • |
| ELB/ALB | ë¡œë“œ ë°¸ëŸ°ì‹± | ë¡œë“œ ë°¸ëŸ°ì„œ ìƒì„±/ê´€ë¦¬, ëŒ€ìƒ ê·¸ë£¹ ì„¤ì • |
| AutoScaling | ë…¸ë“œ ìë™ í™•ì¥ | ìŠ¤ì¼€ì¼ë§ ê·¸ë£¹ ìƒì„±/ê´€ë¦¬, ì •ì±… ì„¤ì • |

### IAM ê¶Œí•œ ì„¤ì •

#### ê´€ë¦¬ì ì•¡ì„¸ìŠ¤ (ê°œë°œ/í…ŒìŠ¤íŠ¸ í™˜ê²½ìš©)

ê°œë°œ ë˜ëŠ” í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” `AdministratorAccess` ê´€ë¦¬í˜• ì •ì±…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ìµœì†Œ ê¶Œí•œ ì›ì¹™ì— ë”°ë¼ ë” ì œí•œì ì¸ ê¶Œí•œì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

#### ìµœì†Œ ê¶Œí•œ ì •ì±… (í”„ë¡œë•ì…˜ í™˜ê²½ ê¶Œì¥)

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "ec2:*",
        "eks:*",
        "iam:GetRole",
        "iam:GetRolePolicy",
        "iam:ListAttachedRolePolicies",
        "iam:ListRolePolicies",
        "iam:ListRoles",
        "iam:PassRole",
        "iam:CreateRole",
        "iam:CreatePolicy",
        "iam:AttachRolePolicy",
        "iam:DetachRolePolicy",
        "iam:DeleteRole",
        "iam:DeletePolicy",
        "iam:TagRole",
        "iam:TagPolicy",
        "s3:*",
        "ecr:*",
        "cloudwatch:*",
        "logs:*",
        "kms:*",
        "route53:*",
        "acm:*",
        "elasticloadbalancing:*",
        "autoscaling:*",
        "elasticfilesystem:*"
      ],
      "Resource": "*"
    }
  ]
}
```

> **âš ï¸ ì£¼ì˜**
>
> í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ìœ„ ì •ì±…ì„ ë” ì„¸ë¶„í™”í•˜ì—¬ íŠ¹ì • ë¦¬ì†ŒìŠ¤ì—ë§Œ ì ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, íŠ¹ì • VPC, íŠ¹ì • S3 ë²„í‚· ë“±ì—ë§Œ ê¶Œí•œì„ ë¶€ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë„¤íŠ¸ì›Œí¬ ìš”êµ¬ì‚¬í•­

#### ê¸°ë³¸ ë„¤íŠ¸ì›Œí¬ ìš”êµ¬ì‚¬í•­

- **ì¸í„°ë„· ì—°ê²°**: Terraformì´ AWS APIì™€ í†µì‹ í•˜ê³  í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê¸° ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤.
- **ë°©í™”ë²½ ì„¤ì •**: ë‹¤ìŒ ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•œ ì•„ì›ƒë°”ìš´ë“œ ì•¡ì„¸ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤:
    - AWS API ì—”ë“œí¬ì¸íŠ¸ (ë¦¬ì „ë³„ ì„œë¹„ìŠ¤ ì—”ë“œí¬ì¸íŠ¸)
    - GitHub (Terraform ëª¨ë“ˆ ë° í”„ë¡œë°”ì´ë” ë‹¤ìš´ë¡œë“œ)
    - Docker Hub ë˜ëŠ” ê¸°íƒ€ ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬
    - Helm ì°¨íŠ¸ ë¦¬í¬ì§€í† ë¦¬

#### EKS í´ëŸ¬ìŠ¤í„° ë„¤íŠ¸ì›Œí¬ ìš”êµ¬ì‚¬í•­

- **VPC ì„¤ì •**: ê¸°ì¡´ VPCë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ì´ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ìƒˆ VPCë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ì„œë¸Œë„· êµ¬ì„±**: EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìœ„í•œ ë‹¤ìŒ ì„œë¸Œë„·ì´ í•„ìš”í•©ë‹ˆë‹¤:
    - **í¼ë¸”ë¦­ ì„œë¸Œë„·**: ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ë¥¼ í†µí•´ ì¸í„°ë„·ì— ì§ì ‘ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ì„œë¸Œë„·
    - **í”„ë¼ì´ë¹— ì„œë¸Œë„·**: NAT ê²Œì´íŠ¸ì›¨ì´ë¥¼ í†µí•´ ì¸í„°ë„·ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ì„œë¸Œë„·
    - **íŒŒë“œ ì„œë¸Œë„·** (ì„ íƒ ì‚¬í•­): íŒŒë“œ IP ì£¼ì†Œ í• ë‹¹ì„ ìœ„í•œ ë³„ë„ì˜ ì„œë¸Œë„·
    - **ë°ì´í„°ë² ì´ìŠ¤ ì„œë¸Œë„·** (ì„ íƒ ì‚¬í•­): ë°ì´í„°ë² ì´ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìœ„í•œ ë³„ë„ì˜ ì„œë¸Œë„·
- **ê°€ìš© ì˜ì—­**: ê³ ê°€ìš©ì„±ì„ ìœ„í•´ ìµœì†Œ 2ê°œì˜ ê°€ìš© ì˜ì—­ì— ì„œë¸Œë„·ì„ ë°°í¬í•´ì•¼ í•©ë‹ˆë‹¤. í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” 3ê°œ ì´ìƒì˜ ê°€ìš© ì˜ì—­ì„ ê¶Œì¥í•©ë‹ˆë‹¤.
- **CIDR ë¸”ë¡**: VPC ë° ì„œë¸Œë„·ì— ì¶©ë¶„í•œ IP ì£¼ì†Œ ê³µê°„ì„ í• ë‹¹í•´ì•¼ í•©ë‹ˆë‹¤. ê¶Œì¥ ì„¤ì •:
    - VPC CIDR: /16 (ì˜ˆ: 10.0.0.0/16)
    - ì„œë¸Œë„· CIDR: /20 (ì˜ˆ: 10.0.0.0/20, 10.0.16.0/20 ë“±)

#### ë³´ì•ˆ ê·¸ë£¹ ìš”êµ¬ì‚¬í•­

- **EKS í´ëŸ¬ìŠ¤í„° ë³´ì•ˆ ê·¸ë£¹**: ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ê³¼ ë…¸ë“œ ê°„ì˜ í†µì‹ ì„ í—ˆìš©
- **ë…¸ë“œ ë³´ì•ˆ ê·¸ë£¹**: ë…¸ë“œ ê°„ í†µì‹  ë° í•„ìš”í•œ ì•„ì›ƒë°”ìš´ë“œ íŠ¸ë˜í”½ í—ˆìš©
- **ì¶”ê°€ ë³´ì•ˆ ê·¸ë£¹**: ë°ì´í„°ë² ì´ìŠ¤, ìºì‹œ ë“± ë‹¤ë¥¸ AWS ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ì œì–´

### ë„ë©”ì¸ ë° DNS ìš”êµ¬ì‚¬í•­ (ì„ íƒ ì‚¬í•­)

- **ë“±ë¡ëœ ë„ë©”ì¸ ì´ë¦„**: ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì‚¬ìš©ì ì¹œí™”ì ì¸ URL ì œê³µ
- **Route53 í˜¸ìŠ¤íŒ… ì˜ì—­**: DNS ë ˆì½”ë“œ ê´€ë¦¬
- **ACM ì¸ì¦ì„œ**: HTTPS í†µì‹ ì„ ìœ„í•œ SSL/TLS ì¸ì¦ì„œ

### ë¹„ìš© ê³ ë ¤ì‚¬í•­

ì´ í”„ë¡œì íŠ¸ë¥¼ ë°°í¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ AWS ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ë¹„ìš©ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- **EKS í´ëŸ¬ìŠ¤í„°**: ì‹œê°„ë‹¹ ìš”ê¸ˆ (ì»¨íŠ¸ë¡¤ í”Œë ˆì¸)
- **EC2 ì¸ìŠ¤í„´ìŠ¤**: ë…¸ë“œ ê·¸ë£¹ì— ì‚¬ìš©ë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ ìœ í˜• ë° ìˆ˜ëŸ‰ì— ë”°ë¼ ë‹¤ë¦„
- **EBS ë³¼ë¥¨**: ë…¸ë“œ ë° ì˜êµ¬ ë³¼ë¥¨ì— ì‚¬ìš©ë˜ëŠ” ìŠ¤í† ë¦¬ì§€
- **NAT ê²Œì´íŠ¸ì›¨ì´**: ì‹œê°„ë‹¹ ìš”ê¸ˆ ë° ë°ì´í„° ì²˜ë¦¬ ìš”ê¸ˆ
- **ë¡œë“œ ë°¸ëŸ°ì„œ**: ALB/NLB ì‚¬ìš© ì‹œ ì‹œê°„ë‹¹ ìš”ê¸ˆ ë° ë°ì´í„° ì²˜ë¦¬ ìš”ê¸ˆ
- **Route53**: í˜¸ìŠ¤íŒ… ì˜ì—­ ë° ì¿¼ë¦¬ ìš”ê¸ˆ
- **S3**: ìŠ¤í† ë¦¬ì§€ ë° ìš”ì²­ ìš”ê¸ˆ
- **CloudWatch**: ë¡œê·¸ ìŠ¤í† ë¦¬ì§€ ë° ëŒ€ì‹œë³´ë“œ ìš”ê¸ˆ

> **ğŸ’° ë¹„ìš© ìµœì í™” íŒ**
>
> ê°œë°œ í™˜ê²½ì—ì„œëŠ” Spot ì¸ìŠ¤í„´ìŠ¤, ìë™ í™•ì¥, ë¦¬ì†ŒìŠ¤ ì œí•œ ë“±ì„ í™œìš©í•˜ì—¬ ë¹„ìš©ì„ ì ˆê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. AWS Cost Explorer ë° Budgetsë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ìš©ì„ ëª¨ë‹ˆí„°ë§í•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”.

## âš™ï¸ ì„¤ì¹˜ ë° êµ¬ì„±

ì´ ì„¹ì…˜ì—ì„œëŠ” AWS EKS Terraform í”„ë¡œì íŠ¸ë¥¼ ì„¤ì¹˜í•˜ê³  êµ¬ì„±í•˜ëŠ” ë‹¨ê³„ë³„ ì§€ì¹¨ì„ ì œê³µí•©ë‹ˆë‹¤. ê° ë‹¨ê³„ë¥¼ ìˆœì„œëŒ€ë¡œ ë”°ë¼ ì™„ì „í•œ EKS í™˜ê²½ì„ êµ¬ì¶•í•˜ì„¸ìš”.

### 1. ë¦¬í¬ì§€í† ë¦¬ í´ë¡ 

ë¨¼ì € Gitì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ë¡œì»¬ ì‹œìŠ¤í…œì— í´ë¡ í•©ë‹ˆë‹¤:

```bash
# ë¦¬í¬ì§€í† ë¦¬ í´ë¡ 
git clone https://github.com/your-username/aws-eks-terraform.git

# í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd aws-eks-terraform
```

### 2. AWS ìê²© ì¦ëª… êµ¬ì„±

AWS ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ë©´ ì ì ˆí•œ ìê²© ì¦ëª…ì´ í•„ìš”í•©ë‹ˆë‹¤. ë‹¤ìŒ ë°©ë²• ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬ ìê²© ì¦ëª…ì„ êµ¬ì„±í•˜ì„¸ìš”.

#### 2.1 AWS CLI ì‚¬ìš©

AWS CLIë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€í™”í˜•ìœ¼ë¡œ ìê²© ì¦ëª…ì„ êµ¬ì„±í•©ë‹ˆë‹¤:

```bash
# AWS CLI ìê²© ì¦ëª… êµ¬ì„±
aws configure
```

í”„ë¡¬í”„íŠ¸ì— ë”°ë¼ ì•¡ì„¸ìŠ¤ í‚¤, ì‹œí¬ë¦¿ í‚¤, ê¸°ë³¸ ë¦¬ì „ ë° ì¶œë ¥ í˜•ì‹ì„ ì…ë ¥í•©ë‹ˆë‹¤:

```text
AWS Access Key ID [None]: AKIAIOSFODNN7EXAMPLE
AWS Secret Access Key [None]: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
Default region name [None]: ap-northeast-2
Default output format [None]: json
```

#### 2.2 í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©

ë˜ëŠ” í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì—¬ ìê²© ì¦ëª…ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
# í™˜ê²½ ë³€ìˆ˜ë¡œ ìê²© ì¦ëª… ì„¤ì •
export AWS_ACCESS_KEY_ID="your-access-key"
export AWS_SECRET_ACCESS_KEY="your-secret-key"
export AWS_REGION="your-region"

# ì„¤ì • í™•ì¸
echo $AWS_REGION
```

#### 2.3 AWS IAM Identity Center(SSO) ì‚¬ìš©

AWS IAM Identity Center(ì´ì „ì˜ AWS SSO)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°:

```bash
# SSO ë¡œê·¸ì¸
aws sso login --profile your-sso-profile

# í”„ë¡œí•„ ì‚¬ìš© ì„¤ì •
export AWS_PROFILE=your-sso-profile
```

### 3. Terraform ë°±ì—”ë“œ êµ¬ì„± (ì„ íƒ ì‚¬í•­)

í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” Terraform ìƒíƒœë¥¼ ì›ê²© ë°±ì—”ë“œì— ì €ì¥í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. S3 ë²„í‚·ê³¼ DynamoDB í…Œì´ë¸”ì„ ìƒì„±í•˜ì—¬ ìƒíƒœ íŒŒì¼ì„ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê³  ì ê¸ˆ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
# S3 ë²„í‚· ìƒì„±
aws s3api create-bucket \
  --bucket your-terraform-state-bucket \
  --region your-region \
  --create-bucket-configuration LocationConstraint=your-region

# ë²„í‚· ë²„ì „ ê´€ë¦¬ í™œì„±í™”
aws s3api put-bucket-versioning \
  --bucket your-terraform-state-bucket \
  --versioning-configuration Status=Enabled

# DynamoDB í…Œì´ë¸” ìƒì„±
aws dynamodb create-table \
  --table-name terraform-state-lock \
  --attribute-definitions AttributeName=LockID,AttributeType=S \
  --key-schema AttributeName=LockID,KeyType=HASH \
  --billing-mode PAY_PER_REQUEST
```

ê·¸ëŸ° ë‹¤ìŒ ê° í™˜ê²½ ë””ë ‰í† ë¦¬ì˜ `versions.tf` ë˜ëŠ” `providers.tf` íŒŒì¼ì— ë°±ì—”ë“œ êµ¬ì„±ì„ ì¶”ê°€í•©ë‹ˆë‹¤:

```hcl
terraform {
  backend "s3" {
    bucket         = "your-terraform-state-bucket"
    key            = "env/dev/network/terraform.tfstate"
    region         = "your-region"
    dynamodb_table = "terraform-state-lock"
    encrypt        = true
  }
}
```

### 4. í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ ì„¤ì •

ê° í™˜ê²½ ë””ë ‰í† ë¦¬ì—ì„œ ì˜ˆì œ ë³€ìˆ˜ íŒŒì¼ì„ ë³µì‚¬í•˜ê³  í•„ìš”ì— ë”°ë¼ ìˆ˜ì •í•©ë‹ˆë‹¤. ì´ íŒŒì¼ë“¤ì€ Terraformì— í•„ìš”í•œ ë³€ìˆ˜ ê°’ì„ ì œê³µí•©ë‹ˆë‹¤.

```bash
# ì‘ì—… ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd ENV/DEV

# ECR ì„¤ì •
cd 00_ECR
cp an2-kkm.tfvars terraform.tfvars

# terraform.tfvars íŒŒì¼ í¸ì§‘
vi terraform.tfvars
```

`terraform.tfvars` íŒŒì¼ ì˜ˆì‹œ (ECR):

```hcl
# ECR ë¦¬í¬ì§€í† ë¦¬ ì„¤ì •
region = "ap-northeast-2"
name   = "eks-dev"

# ìƒì„±í•  ECR ë¦¬í¬ì§€í† ë¦¬ ëª©ë¡
ecr_repositories = [
  "app1",
  "app2",
  "app3"
]

# ë¦¬ì†ŒìŠ¤ íƒœê·¸
tags = {
  Environment = "dev"
  Project     = "eks-terraform"
  Terraform   = "true"
}
```

ë„¤íŠ¸ì›Œí¬ ì„¤ì •ì„ ìœ„í•œ ë³€ìˆ˜ íŒŒì¼ë„ ì¤€ë¹„í•©ë‹ˆë‹¤:

```bash
# ë„¤íŠ¸ì›Œí¬ ì„¤ì •
cd ../01_Network
cp terraform.tfvars.example terraform.tfvars

# terraform.tfvars íŒŒì¼ í¸ì§‘
vi terraform.tfvars
```

`terraform.tfvars` íŒŒì¼ ì˜ˆì‹œ (Network):

```hcl
# ê¸°ë³¸ ì„¤ì •
region = "ap-northeast-2"
name   = "eks-dev"

# VPC CIDR ë¸”ë¡
vpc_cidr = "10.0.0.0/16"

# ê°€ìš© ì˜ì—­
azs = ["ap-northeast-2a", "ap-northeast-2c"]

# ì„œë¸Œë„· CIDR ë¸”ë¡
public_subnets   = ["10.0.0.0/20", "10.0.16.0/20"]
private_subnets  = ["10.0.32.0/20", "10.0.48.0/20"]
database_subnets = ["10.0.64.0/20", "10.0.80.0/20"]
pod_subnets      = ["10.0.96.0/20", "10.0.112.0/20"]

# NAT ê²Œì´íŠ¸ì›¨ì´ ì„¤ì •
enable_nat_gateway = true
single_nat_gateway = true

# ë¦¬ì†ŒìŠ¤ íƒœê·¸
tags = {
  Environment = "dev"
  Project     = "eks-terraform"
  Terraform   = "true"
}
```

ë§ˆì°¬ê°€ì§€ë¡œ EKS ë° ê¸°íƒ€ êµ¬ì„± ìš”ì†Œì— ëŒ€í•œ ë³€ìˆ˜ íŒŒì¼ë„ ì„¤ì •í•©ë‹ˆë‹¤:

```bash
# EKS ì„¤ì •
cd ../02_EKS
cp terraform.tfvars.example terraform.tfvars
vi terraform.tfvars

# í•„ìš”ì— ë”°ë¼ ë‹¤ë¥¸ ë””ë ‰í† ë¦¬ì— ëŒ€í•´ì„œë„ ë™ì¼í•œ ì‘ì—… ìˆ˜í–‰
```

### 5. ìˆœì°¨ì  ë¦¬ì†ŒìŠ¤ ë°°í¬

ë¦¬ì†ŒìŠ¤ëŠ” ì˜ì¡´ì„±ì„ ê³ ë ¤í•˜ì—¬ ë‹¤ìŒ ìˆœì„œë¡œ ë°°í¬í•´ì•¼ í•©ë‹ˆë‹¤. ê° ë‹¨ê³„ì—ì„œëŠ” `make` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Terraform ì‘ì—…ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

#### 5.1 ECR ë¦¬í¬ì§€í† ë¦¬ ìƒì„±

```bash
cd ENV/DEV/00_ECR

# Terraform ì´ˆê¸°í™”
make init

# ë°°í¬ ê³„íš ê²€í† 
make plan

# ë¦¬ì†ŒìŠ¤ ë°°í¬
make apply
```

`make` ëª…ë ¹ì–´ê°€ ì‘ë™í•˜ì§€ ì•ŠëŠ” ê²½ìš° ì§ì ‘ Terraform ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
terraform init
terraform plan -var-file=terraform.tfvars -out=tfplan
terraform apply tfplan
```

#### 5.2 ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ êµ¬ì„±

```bash
cd ../01_Network

# Terraform ì´ˆê¸°í™”
make init

# ë°°í¬ ê³„íš ê²€í† 
make plan

# ë¦¬ì†ŒìŠ¤ ë°°í¬
make apply
```

ë°°í¬ê°€ ì™„ë£Œë˜ë©´ VPC ID, ì„œë¸Œë„· ID ë“±ì˜ ì¶œë ¥ ê°’ì„ í™•ì¸í•˜ê³  ê¸°ë¡í•´ ë‘¡ë‹ˆë‹¤. ì´ ê°’ë“¤ì€ ë‹¤ìŒ ë‹¨ê³„ì—ì„œ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### 5.3 EKS í´ëŸ¬ìŠ¤í„° ë°°í¬

```bash
cd ../02_EKS

# Terraform ì´ˆê¸°í™”
make init

# ë°°í¬ ê³„íš ê²€í† 
make plan

# ë¦¬ì†ŒìŠ¤ ë°°í¬
make apply
```

EKS í´ëŸ¬ìŠ¤í„° ë°°í¬ëŠ” ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤(ì•½ 15-20ë¶„). ë°°í¬ê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.

ë°°í¬ê°€ ì™„ë£Œë˜ë©´ í´ëŸ¬ìŠ¤í„° ì´ë¦„, ì—”ë“œí¬ì¸íŠ¸ URL ë“±ì˜ ì¶œë ¥ ê°’ì„ í™•ì¸í•˜ê³  ê¸°ë¡í•´ ë‘¡ë‹ˆë‹¤.

#### 5.4 Kubernetes ì›Œí¬ë¡œë“œ ë°°í¬

EKS í´ëŸ¬ìŠ¤í„°ê°€ ì¤€ë¹„ë˜ë©´ Kubernetes ì›Œí¬ë¡œë“œë¥¼ ë°°í¬í•©ë‹ˆë‹¤. ì›Œí¬ë¡œë“œëŠ” ë‹¤ìŒ ìˆœì„œë¡œ ë°°í¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤:

```bash
cd ../03_Workload

# ArgoCD ë°°í¬
cd ArgoCD
make init
make plan
make apply

# Karpenter ë°°í¬
cd ../Karpenter
make init
make plan
make apply

# Cluster Autoscaler ë°°í¬
cd ../cluster-autoscaler
make init
make plan
make apply
```

ê° ì›Œí¬ë¡œë“œ ë°°í¬ í›„ ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤:

```bash
# kubectl êµ¬ì„± ì—…ë°ì´íŠ¸ (í´ëŸ¬ìŠ¤í„° ì´ë¦„ê³¼ ë¦¬ì „ì„ ì ì ˆíˆ ë³€ê²½)
aws eks update-kubeconfig --name eks-dev --region ap-northeast-2

# ArgoCD ìƒíƒœ í™•ì¸
kubectl get pods -n argocd

# Karpenter ìƒíƒœ í™•ì¸
kubectl get pods -n karpenter

# Cluster Autoscaler ìƒíƒœ í™•ì¸
kubectl get pods -n kube-system | grep cluster-autoscaler
```

#### 5.5 S3 ë²„í‚· ìƒì„±

```bash
cd ../04_S3
make init
make plan
make apply
```

### 6. kubectl êµ¬ì„±

EKS í´ëŸ¬ìŠ¤í„°ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ kubectl êµ¬ì„±ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. ì´ ëª…ë ¹ì€ ë¡œì»¬ kubeconfig íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•˜ì—¬ EKS í´ëŸ¬ìŠ¤í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

```bash
# í´ëŸ¬ìŠ¤í„° ì´ë¦„ê³¼ ë¦¬ì „ì„ ì ì ˆíˆ ë³€ê²½
aws eks update-kubeconfig --name eks-dev --region ap-northeast-2

# kubeconfig í™•ì¸
kubectl config get-contexts
```

### 7. í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸

í´ëŸ¬ìŠ¤í„°ê°€ ì˜¬ë°”ë¥´ê²Œ ë°°í¬ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤:

```bash
# ë…¸ë“œ ìƒíƒœ í™•ì¸
kubectl get nodes

# ì‹œìŠ¤í…œ íŒŒë“œ ìƒíƒœ í™•ì¸
kubectl get pods --all-namespaces

# í´ëŸ¬ìŠ¤í„° ì •ë³´ í™•ì¸
kubectl cluster-info

# ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í™•ì¸
kubectl get namespaces
```

### 8. ì¶”ê°€ êµ¬ì„± (ì„ íƒ ì‚¬í•­)

#### 8.1 ëŒ€ì‹œë³´ë“œ ì ‘ê·¼

ArgoCD ëŒ€ì‹œë³´ë“œì— ì ‘ê·¼í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ í¬íŠ¸ í¬ì›Œë”©ì„ ì„¤ì •í•©ë‹ˆë‹¤:

```bash
kubectl port-forward svc/argocd-server -n argocd 8080:443
```

ê·¸ëŸ° ë‹¤ìŒ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ `https://localhost:8080`ìœ¼ë¡œ ì ‘ì†í•©ë‹ˆë‹¤.

ì´ˆê¸° ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ê°€ì ¸ì˜¤ë ¤ë©´:

```bash
kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d
```

#### 8.2 ë¡œê·¸ í™•ì¸

íŠ¹ì • íŒŒë“œì˜ ë¡œê·¸ë¥¼ í™•ì¸í•˜ë ¤ë©´:

```bash
# íŒŒë“œ ì´ë¦„ í™•ì¸
kubectl get pods -n <namespace>

# ë¡œê·¸ í™•ì¸
kubectl logs -f <pod-name> -n <namespace>
```

#### 8.3 í´ëŸ¬ìŠ¤í„° ìŠ¤ì¼€ì¼ë§ í…ŒìŠ¤íŠ¸

Karpenter ë˜ëŠ” Cluster Autoscalerê°€ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ë¦¬ì†ŒìŠ¤ ìš”ì²­ì´ ë§ì€ ì›Œí¬ë¡œë“œë¥¼ ë°°í¬í•©ë‹ˆë‹¤:

```bash
# í…ŒìŠ¤íŠ¸ ë””í”Œë¡œì´ë¨¼íŠ¸ ìƒì„±
cat <<EOF | kubectl apply -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: inflate
spec:
  replicas: 5
  selector:
    matchLabels:
      app: inflate
  template:
    metadata:
      labels:
        app: inflate
    spec:
      containers:
      - name: inflate
        image: public.ecr.aws/eks-distro/kubernetes/pause:3.2
        resources:
          requests:
            cpu: 1
            memory: 1Gi
EOF

# ë…¸ë“œ ìƒíƒœ ëª¨ë‹ˆí„°ë§
kubectl get nodes -w
```

### 9. ë¬¸ì œ í•´ê²° íŒ

#### 9.1 Terraform ì˜¤ë¥˜

Terraform ì ìš© ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

```bash
# ìì„¸í•œ ë¡œê·¸ í™•ì¸
TF_LOG=DEBUG terraform apply

# ìƒíƒœ í™•ì¸
terraform state list
```

#### 9.2 EKS í´ëŸ¬ìŠ¤í„° ì—°ê²° ë¬¸ì œ

EKS í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ëŠ” ê²½ìš°:

```bash
# AWS CLI ë²„ì „ í™•ì¸
aws --version

# IAM ìê²© ì¦ëª… í™•ì¸
aws sts get-caller-identity

# EKS í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸
aws eks describe-cluster --name eks-dev --region ap-northeast-2
```

#### 9.3 íŒŒë“œ ìƒíƒœ ë¬¸ì œ

íŒŒë“œê°€ `Pending` ë˜ëŠ” `CrashLoopBackOff` ìƒíƒœì¸ ê²½ìš°:

```bash
# íŒŒë“œ ì„¸ë¶€ ì •ë³´ í™•ì¸
kubectl describe pod <pod-name> -n <namespace>

# íŒŒë“œ ë¡œê·¸ í™•ì¸
kubectl logs <pod-name> -n <namespace>

# ë…¸ë“œ ë¦¬ì†ŒìŠ¤ í™•ì¸
kubectl describe node <node-name>
```

### 10. ì •ë¦¬ (ì„ íƒ ì‚¬í•­)

ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•˜ë ¤ë©´ ë°°í¬ ìˆœì„œì˜ ì—­ìˆœìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤:

```bash
# S3 ë²„í‚· ì‚­ì œ
cd ENV/DEV/04_S3
make destroy

# ì›Œí¬ë¡œë“œ ì‚­ì œ
cd ../03_Workload/cluster-autoscaler
make destroy
cd ../Karpenter
make destroy
cd ../ArgoCD
make destroy

# EKS í´ëŸ¬ìŠ¤í„° ì‚­ì œ
cd ../../02_EKS
make destroy

# ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ ì‚­ì œ
cd ../01_Network
make destroy

# ECR ë¦¬í¬ì§€í† ë¦¬ ì‚­ì œ
cd ../00_ECR
make destroy
```

> **âš ï¸ ì£¼ì˜**
>
> `make destroy` ëª…ë ¹ì€ ê´€ë ¨ ë¦¬ì†ŒìŠ¤ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤. í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ì‹ ì¤‘í•˜ê²Œ ì‚¬ìš©í•˜ì„¸ìš”.

## ğŸ’» ì‚¬ìš© ë°©ë²•

ì´ ì„¹ì…˜ì—ì„œëŠ” AWS EKS Terraform í”„ë¡œì íŠ¸ì˜ ì¼ë°˜ì ì¸ ì‚¬ìš© ì‚¬ë¡€ì™€ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤. ê° ì‚¬ìš© ì‚¬ë¡€ì— ëŒ€í•œ ë‹¨ê³„ë³„ ì§€ì¹¨ì„ í†µí•´ í”„ë¡œì íŠ¸ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì£¼ìš” ëª…ë ¹ì–´ ë° ì˜ˆì œ

ì´ ì„¹ì…˜ì—ì„œëŠ” AWS EKS Terraform í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•  ë•Œ ìì£¼ ì‚¬ìš©ë˜ëŠ” ëª…ë ¹ì–´ì™€ ê·¸ ìš©ë„ë¥¼ ì„¤ëª…í•˜ê³ , ì‹¤ì œ ì‚¬ìš© ì˜ˆì œì™€ ì½”ë“œ ìŠ¤ë‹ˆí«ì„ ì œê³µí•©ë‹ˆë‹¤.

#### Terraform ê¸°ë³¸ ëª…ë ¹ì–´

| ëª…ë ¹ì–´ | ì„¤ëª… | ì‚¬ìš© ì˜ˆì‹œ |
|:-----|:-----|:-----|
| `terraform init` | ì‘ì—… ë””ë ‰í† ë¦¬ë¥¼ ì´ˆê¸°í™”í•˜ê³  í•„ìš”í•œ í”ŒëŸ¬ê·¸ì¸ì„ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤. | `terraform init` ë˜ëŠ” `make init` |
| `terraform plan` | í˜„ì¬ ìƒíƒœì™€ êµ¬ì„± íŒŒì¼ì„ ë¹„êµí•˜ì—¬ ì‹¤í–‰ ê³„íšì„ ìƒì„±í•©ë‹ˆë‹¤. | `terraform plan -var-file=terraform.tfvars` ë˜ëŠ” `make plan` |
| `terraform apply` | ì‹¤í–‰ ê³„íšì„ ì ìš©í•˜ì—¬ ì¸í”„ë¼ë¥¼ ìƒì„± ë˜ëŠ” ë³€ê²½í•©ë‹ˆë‹¤. | `terraform apply tfplan` ë˜ëŠ” `make apply` |
| `terraform destroy` | ìƒì„±ëœ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤. | `terraform destroy -var-file=terraform.tfvars` ë˜ëŠ” `make destroy` |
| `terraform state list` | í˜„ì¬ ìƒíƒœì— ìˆëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ë‚˜ì—´í•©ë‹ˆë‹¤. | `terraform state list` |
| `terraform output` | ì¶œë ¥ ë³€ìˆ˜ì˜ ê°’ì„ í‘œì‹œí•©ë‹ˆë‹¤. | `terraform output vpc_id` |
| `terraform validate` | êµ¬ì„± íŒŒì¼ì˜ êµ¬ë¬¸ì„ ê²€ì¦í•©ë‹ˆë‹¤. | `terraform validate` |
| `terraform fmt` | êµ¬ì„± íŒŒì¼ì„ í‘œì¤€ í˜•ì‹ìœ¼ë¡œ ì¬êµ¬ì„±í•©ë‹ˆë‹¤. | `terraform fmt` |

#### Makefile ëª…ë ¹ì–´

í”„ë¡œì íŠ¸ì˜ ê° ë””ë ‰í† ë¦¬ì—ëŠ” Terraform ì‘ì—…ì„ ê°„ì†Œí™”í•˜ê¸° ìœ„í•œ `Makefile`ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ ì£¼ìš” `make` ëª…ë ¹ì–´ì…ë‹ˆë‹¤:

```bash
# Terraform ì´ˆê¸°í™”
make init

# ì‹¤í–‰ ê³„íš ìƒì„±
make plan

# ë³€ê²½ ì‚¬í•­ ì ìš©
make apply

# ë¦¬ì†ŒìŠ¤ ì‚­ì œ
make destroy

# ìƒíƒœ í™•ì¸
make state
```

#### AWS CLI ëª…ë ¹ì–´

##### EKS í´ëŸ¬ìŠ¤í„° ê´€ë¦¬

```bash
# EKS í´ëŸ¬ìŠ¤í„° ëª©ë¡ ì¡°íšŒ
aws eks list-clusters --region ap-northeast-2

# íŠ¹ì • í´ëŸ¬ìŠ¤í„° ì„¸ë¶€ ì •ë³´ ì¡°íšŒ
aws eks describe-cluster --name eks-dev --region ap-northeast-2

# kubectl êµ¬ì„± ì—…ë°ì´íŠ¸
aws eks update-kubeconfig --name eks-dev --region ap-northeast-2

# í´ëŸ¬ìŠ¤í„° ë²„ì „ ì—…ë°ì´íŠ¸ ìƒíƒœ í™•ì¸
aws eks describe-update --name eks-dev --update-id <update-id> --region ap-northeast-2

# í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œ ê·¸ë£¹ ëª©ë¡ ì¡°íšŒ
aws eks list-nodegroups --cluster-name eks-dev --region ap-northeast-2

# íŠ¹ì • ë…¸ë“œ ê·¸ë£¹ ì„¸ë¶€ ì •ë³´ ì¡°íšŒ
aws eks describe-nodegroup --cluster-name eks-dev --nodegroup-name eks-dev-node-group --region ap-northeast-2
```

##### ECR ê´€ë¦¬

```bash
# ECR ë¦¬í¬ì§€í† ë¦¬ ëª©ë¡ ì¡°íšŒ
aws ecr describe-repositories --region ap-northeast-2

# ECR ë¡œê·¸ì¸
aws ecr get-login-password --region ap-northeast-2 | docker login --username AWS --password-stdin <account-id>.dkr.ecr.ap-northeast-2.amazonaws.com

# ì´ë¯¸ì§€ íƒœê·¸ ì§€ì •
docker tag my-app:latest <account-id>.dkr.ecr.ap-northeast-2.amazonaws.com/my-app:latest

# ì´ë¯¸ì§€ í‘¸ì‹œ
docker push <account-id>.dkr.ecr.ap-northeast-2.amazonaws.com/my-app:latest

# ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ
aws ecr list-images --repository-name my-app --region ap-northeast-2
```

##### kubectl ëª…ë ¹ì–´

```bash
# ë…¸ë“œ ëª©ë¡ ì¡°íšŒ
kubectl get nodes

# íŒŒë“œ ëª©ë¡ ì¡°íšŒ (ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤)
kubectl get pods --all-namespaces

# íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ íŒŒë“œ ëª©ë¡ ì¡°íšŒ
kubectl get pods -n kube-system

# íŒŒë“œ ì„¸ë¶€ ì •ë³´ ì¡°íšŒ
kubectl describe pod <pod-name> -n <namespace>

# íŒŒë“œ ë¡œê·¸ ì¡°íšŒ
kubectl logs <pod-name> -n <namespace>

# íŒŒë“œ ë‚´ ëª…ë ¹ ì‹¤í–‰
kubectl exec -it <pod-name> -n <namespace> -- /bin/bash
```

ìì„¸í•œ ëª…ë ¹ì–´ ëª©ë¡ê³¼ ì˜ˆì œëŠ” [AWS CLI ë¬¸ì„œ](https://docs.aws.amazon.com/cli/latest/reference/eks/index.html), [Terraform ë¬¸ì„œ](https://www.terraform.io/docs/cli/commands/index.html), [kubectl ë¬¸ì„œ](https://kubernetes.io/docs/reference/kubectl/overview/)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### ì¼ë°˜ì ì¸ ì‚¬ìš© ì‚¬ë¡€

#### 1. ìƒˆë¡œìš´ EKS í´ëŸ¬ìŠ¤í„° ë°°í¬

ìƒˆë¡œìš´ EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ì²˜ìŒë¶€í„° ë°°í¬í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ì‚¬ìš© ì‚¬ë¡€ì…ë‹ˆë‹¤.

**ë‹¨ê³„:**

1. **í™˜ê²½ ë””ë ‰í† ë¦¬ ì„¤ì •**
   ```bash
   # ì‘ì—…í•  í™˜ê²½ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
   cd ENV/DEV
   ```

2. **ECR ë¦¬í¬ì§€í† ë¦¬ ìƒì„±**
   ```bash
   cd 00_ECR
   
   # terraform.tfvars íŒŒì¼ ì„¤ì •
   cp an2-kkm.tfvars terraform.tfvars
   
   # í•„ìš”ì— ë”°ë¼ ë³€ìˆ˜ ìˆ˜ì •
   vi terraform.tfvars
   
   # ë¦¬ì†ŒìŠ¤ ë°°í¬
   make init
   make plan
   make apply
   ```

3. **ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ êµ¬ì„±**
   ```bash
   cd ../01_Network
   
   # terraform.tfvars íŒŒì¼ ì„¤ì •
   cp terraform.tfvars.example terraform.tfvars
   
   # í•„ìš”ì— ë”°ë¼ ë³€ìˆ˜ ìˆ˜ì • (VPC CIDR, ì„œë¸Œë„· ë“±)
   vi terraform.tfvars
   
   # ë¦¬ì†ŒìŠ¤ ë°°í¬
   make init
   make plan
   make apply
   ```

4. **EKS í´ëŸ¬ìŠ¤í„° ë°°í¬**
   ```bash
   cd ../02_EKS
   
   # terraform.tfvars íŒŒì¼ ì„¤ì •
   cp terraform.tfvars.example terraform.tfvars
   
   # í•„ìš”ì— ë”°ë¼ ë³€ìˆ˜ ìˆ˜ì • (í´ëŸ¬ìŠ¤í„° ë²„ì „, ë…¸ë“œ ê·¸ë£¹ ë“±)
   vi terraform.tfvars
   
   # ë¦¬ì†ŒìŠ¤ ë°°í¬
   make init
   make plan
   make apply
   ```

5. **Kubernetes ì›Œí¬ë¡œë“œ ë°°í¬**
   ```bash
   cd ../03_Workload
   
   # ArgoCD ë°°í¬
   cd ArgoCD
   make init
   make plan
   make apply
   
   # Karpenter ë°°í¬
   cd ../Karpenter
   make init
   make plan
   make apply
   
   # ê¸°íƒ€ í•„ìš”í•œ ì›Œí¬ë¡œë“œ ë°°í¬
   ```

6. **S3 ë²„í‚· ìƒì„± (ì„ íƒ ì‚¬í•­)**
   ```bash
   cd ../../04_S3
   make init
   make plan
   make apply
   ```

7. **kubectl êµ¬ì„± ë° í´ëŸ¬ìŠ¤í„° ì ‘ê·¼**
   ```bash
   # kubectl êµ¬ì„± ì—…ë°ì´íŠ¸
   aws eks update-kubeconfig --name eks-dev --region ap-northeast-2
   
   # í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸
   kubectl get nodes
   kubectl get pods --all-namespaces
   ```

#### 2. ê¸°ì¡´ EKS í´ëŸ¬ìŠ¤í„° ì—…ê·¸ë ˆì´ë“œ

Kubernetes ë²„ì „ ì—…ê·¸ë ˆì´ë“œ ë˜ëŠ” ë…¸ë“œ ê·¸ë£¹ êµ¬ì„± ë³€ê²½ê³¼ ê°™ì€ í´ëŸ¬ìŠ¤í„° ì—…ê·¸ë ˆì´ë“œë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ë‹¨ê³„:**

1. **í˜„ì¬ í´ëŸ¬ìŠ¤í„° ìƒíƒœ ë°±ì—…**
   ```bash
   # í˜„ì¬ Kubernetes ë¦¬ì†ŒìŠ¤ ë°±ì—…
   kubectl get all --all-namespaces -o yaml > cluster-backup.yaml
   
   # Terraform ìƒíƒœ ë°±ì—… (S3 ë°±ì—”ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° í•„ìš” ì—†ìŒ)
   cd ENV/DEV/02_EKS
   terraform state pull > terraform.tfstate.backup
   ```

2. **ì—…ê·¸ë ˆì´ë“œ ê³„íš ìˆ˜ë¦½**
   ```bash
   # terraform.tfvars íŒŒì¼ì—ì„œ í´ëŸ¬ìŠ¤í„° ë²„ì „ ì—…ë°ì´íŠ¸
   vi terraform.tfvars
   
   # ë³€ê²½ ì‚¬í•­:
   # cluster_version = "1.27" -> cluster_version = "1.28"
   
   # ì—…ê·¸ë ˆì´ë“œ ê³„íš ê²€í† 
   make plan
   ```

3. **ì—…ê·¸ë ˆì´ë“œ ì ìš©**
   ```bash
   # ë³€ê²½ ì‚¬í•­ ì ìš©
   make apply
   
   # ì—…ê·¸ë ˆì´ë“œ ìƒíƒœ ëª¨ë‹ˆí„°ë§
   aws eks describe-update --name eks-dev --update-id <update-id> --region ap-northeast-2
   ```

4. **ë…¸ë“œ ê·¸ë£¹ ì—…ê·¸ë ˆì´ë“œ**
   ```bash
   # terraform.tfvars íŒŒì¼ì—ì„œ ë…¸ë“œ ê·¸ë£¹ êµ¬ì„± ì—…ë°ì´íŠ¸
   vi terraform.tfvars
   
   # ë³€ê²½ ì‚¬í•­:
   # instance_types = ["t3.medium"] -> instance_types = ["t3.large"]
   
   # ì—…ê·¸ë ˆì´ë“œ ê³„íš ê²€í†  ë° ì ìš©
   make plan
   make apply
   ```

5. **ì—…ê·¸ë ˆì´ë“œ ê²€ì¦**
   ```bash
   # í´ëŸ¬ìŠ¤í„° ë²„ì „ í™•ì¸
   kubectl version --short
   
   # ë…¸ë“œ ìƒíƒœ í™•ì¸
   kubectl get nodes
   
   # ì‹œìŠ¤í…œ íŒŒë“œ ìƒíƒœ í™•ì¸
   kubectl get pods -n kube-system
   ```

#### 3. ìƒˆë¡œìš´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ë¥¼ ìœ„í•œ ì¸í”„ë¼ ì¤€ë¹„

ìƒˆë¡œìš´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê¸° ìœ„í•œ í•„ìš”í•œ ì¸í”„ë¼ êµ¬ì„± ìš”ì†Œë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.

**ë‹¨ê³„:**

1. **í•„ìš”í•œ IAM ì—­í•  ë° ì •ì±… ìƒì„±**
   ```bash
   # IRSA ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ ì„œë¹„ìŠ¤ ê³„ì •ì— ëŒ€í•œ IAM ì—­í•  ìƒì„±
   cd ENV/DEV/02_EKS
   
   # terraform.tfvars íŒŒì¼ì— IRSA êµ¬ì„± ì¶”ê°€
   vi terraform.tfvars
   
   # ì˜ˆì‹œ êµ¬ì„±:
   # irsa_roles = {
   #   "app-name" = {
   #     namespace      = "app-namespace"
   #     service_account = "app-service-account"
   #     policy_arns    = ["arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess"]
   #   }
   # }
   
   # ë³€ê²½ ì‚¬í•­ ì ìš©
   make plan
   make apply
   ```

2. **í•„ìš”í•œ Kubernetes ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±**
   ```bash
   # ì• í”Œë¦¬ì¼€ì´ì…˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±
   kubectl create namespace app-namespace
   
   # ë¦¬ì†ŒìŠ¤ í• ë‹¹ëŸ‰ ì„¤ì • (ì„ íƒ ì‚¬í•­)
   kubectl apply -f - <<EOF
   apiVersion: v1
   kind: ResourceQuota
   metadata:
     name: app-quota
     namespace: app-namespace
   spec:
     hard:
       requests.cpu: "2"
       requests.memory: 4Gi
       limits.cpu: "4"
       limits.memory: 8Gi
   EOF
   ```

3. **í•„ìš”í•œ Kubernetes ì• ë“œì˜¨ ë°°í¬**
   ```bash
   # ì˜ˆ: AWS Load Balancer Controllerê°€ í•„ìš”í•œ ê²½ìš°
   cd ENV/DEV/03_Workload
   
   # AWS Load Balancer Controller ë°°í¬
   kubectl apply -f aws-load-balancer-controller.yaml
   
   # ìƒíƒœ í™•ì¸
   kubectl get pods -n kube-system | grep aws-load-balancer-controller
   ```

4. **ArgoCDë¥¼ í†µí•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ì„¤ì •**
   ```bash
   # ArgoCD Application ë¦¬ì†ŒìŠ¤ ìƒì„±
   kubectl apply -f - <<EOF
   apiVersion: argoproj.io/v1alpha1
   kind: Application
   metadata:
     name: my-application
     namespace: argocd
   spec:
     project: default
     source:
       repoURL: https://github.com/your-org/your-app-repo.git
       targetRevision: HEAD
       path: kubernetes
     destination:
       server: https://kubernetes.default.svc
       namespace: app-namespace
     syncPolicy:
       automated:
         prune: true
         selfHeal: true
   EOF
   ```

5. **í•„ìš”í•œ ìŠ¤í† ë¦¬ì§€ ë¦¬ì†ŒìŠ¤ í”„ë¡œë¹„ì €ë‹**
   ```bash
   # EBS ë³¼ë¥¨ì„ ìœ„í•œ StorageClass ìƒì„±
   kubectl apply -f - <<EOF
   apiVersion: storage.k8s.io/v1
   kind: StorageClass
   metadata:
     name: ebs-sc
   provisioner: ebs.csi.aws.com
   volumeBindingMode: WaitForFirstConsumer
   parameters:
     type: gp3
     encrypted: "true"
   EOF
   
   # PersistentVolumeClaim ìƒì„±
   kubectl apply -f - <<EOF
   apiVersion: v1
   kind: PersistentVolumeClaim
   metadata:
     name: app-data
     namespace: app-namespace
   spec:
     accessModes:
       - ReadWriteOnce
     storageClassName: ebs-sc
     resources:
       requests:
         storage: 10Gi
   EOF
   ```

#### 4. ë©€í‹° í™˜ê²½ ê´€ë¦¬ ë° í™˜ê²½ ê°„ ìŠ¹ê²©

ê°œë°œ(DEV)ì—ì„œ ìŠ¤í…Œì´ì§•(STG), í”„ë¡œë•ì…˜(PRD)ìœ¼ë¡œ ë³€ê²½ ì‚¬í•­ì„ ìŠ¹ê²©í•˜ëŠ” ì›Œí¬í”Œë¡œìš°ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

**ë‹¨ê³„:**

1. **ìƒˆë¡œìš´ í™˜ê²½ ë””ë ‰í† ë¦¬ ìƒì„±**
   ```bash
   # ìŠ¤í…Œì´ì§• í™˜ê²½ ë””ë ‰í† ë¦¬ ìƒì„±
   mkdir -p ENV/STG/{00_ECR,01_Network,02_EKS,03_Workload,04_S3}
   
   # ê°œë°œ í™˜ê²½ êµ¬ì„± íŒŒì¼ ë³µì‚¬
   cp -r ENV/DEV/00_ECR/* ENV/STG/00_ECR/
   cp -r ENV/DEV/01_Network/* ENV/STG/01_Network/
   cp -r ENV/DEV/02_EKS/* ENV/STG/02_EKS/
   cp -r ENV/DEV/03_Workload/* ENV/STG/03_Workload/
   cp -r ENV/DEV/04_S3/* ENV/STG/04_S3/
   ```

2. **í™˜ê²½ë³„ ë³€ìˆ˜ íŒŒì¼ ìˆ˜ì •**
   ```bash
   # ìŠ¤í…Œì´ì§• í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ ìˆ˜ì •
   cd ENV/STG/01_Network
   vi terraform.tfvars
   
   # ë³€ê²½ ì‚¬í•­:
   # name = "eks-dev" -> name = "eks-stg"
   # vpc_cidr = "10.0.0.0/16" -> vpc_cidr = "10.1.0.0/16"
   # tags = { Environment = "dev" } -> tags = { Environment = "stg" }
   
   # ë‹¤ë¥¸ ë””ë ‰í† ë¦¬ì— ëŒ€í•´ì„œë„ ë™ì¼í•œ ì‘ì—… ìˆ˜í–‰
   ```

3. **ê°œë°œ í™˜ê²½ì—ì„œ ë³€ê²½ ì‚¬í•­ í…ŒìŠ¤íŠ¸**
   ```bash
   cd ENV/DEV/02_EKS
   
   # ë³€ê²½ ì‚¬í•­ ì ìš© ë° í…ŒìŠ¤íŠ¸
   make plan
   make apply
   
   # ë³€ê²½ ì‚¬í•­ ê²€ì¦
   kubectl get pods --all-namespaces
   ```

4. **ìŠ¤í…Œì´ì§• í™˜ê²½ì— ë³€ê²½ ì‚¬í•­ ì ìš©**
   ```bash
   cd ../../STG/02_EKS
   
   # ë³€ê²½ ì‚¬í•­ ì ìš©
   make plan
   make apply
   
   # ë³€ê²½ ì‚¬í•­ ê²€ì¦
   aws eks update-kubeconfig --name eks-stg --region ap-northeast-2
   kubectl get pods --all-namespaces
   ```

5. **í”„ë¡œë•ì…˜ í™˜ê²½ì— ë³€ê²½ ì‚¬í•­ ì ìš©**
   ```bash
   cd ../../PRD/02_EKS
   
   # ë³€ê²½ ì‚¬í•­ ì ìš©
   make plan
   make apply
   
   # ë³€ê²½ ì‚¬í•­ ê²€ì¦
   aws eks update-kubeconfig --name eks-prd --region ap-northeast-2
   kubectl get pods --all-namespaces
   ```

#### 5. í´ëŸ¬ìŠ¤í„° ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹… ì„¤ì •

EKS í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹… ì†”ë£¨ì…˜ì„ ì„¤ì •í•©ë‹ˆë‹¤.

**ë‹¨ê³„:**

1. **CloudWatch Logs í™œì„±í™”**
   ```bash
   cd ENV/DEV/02_EKS
   
   # terraform.tfvars íŒŒì¼ì—ì„œ í´ëŸ¬ìŠ¤í„° ë¡œê¹… ì„¤ì • ì—…ë°ì´íŠ¸
   vi terraform.tfvars
   
   # ë³€ê²½ ì‚¬í•­:
   # cluster_enabled_log_types = ["api", "audit"] -> cluster_enabled_log_types = ["api", "audit", "authenticator", "controllerManager", "scheduler"]
   
   # ë³€ê²½ ì‚¬í•­ ì ìš©
   make plan
   make apply
   ```

2. **Prometheus ë° Grafana ë°°í¬**
   ```bash
   # Prometheus ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±
   kubectl create namespace prometheus
   
   # Helmì„ ì‚¬ìš©í•˜ì—¬ Prometheus ë°°í¬
   helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
   helm repo update
   helm install prometheus prometheus-community/kube-prometheus-stack \
     --namespace prometheus \
     --set grafana.adminPassword=admin \
     --set prometheus.prometheusSpec.storageSpec.volumeClaimTemplate.spec.storageClassName=ebs-sc \
     --set prometheus.prometheusSpec.storageSpec.volumeClaimTemplate.spec.resources.requests.storage=10Gi
   
   # ìƒíƒœ í™•ì¸
   kubectl get pods -n prometheus
   ```

3. **Fluent Bit ë°°í¬**
   ```bash
   # Fluent Bit ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±
   kubectl create namespace logging
   
   # AWS for Fluent Bit ë°°í¬
   kubectl apply -f https://raw.githubusercontent.com/aws-samples/amazon-cloudwatch-container-insights/latest/k8s-deployment-manifest-templates/deployment-mode/daemonset/container-insights-monitoring/fluent-bit/fluent-bit.yaml
   
   # ìƒíƒœ í™•ì¸
   kubectl get pods -n logging
   ```

4. **ëŒ€ì‹œë³´ë“œ ì ‘ê·¼**
   ```bash
   # Grafana ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ì„ ìœ„í•œ í¬íŠ¸ í¬ì›Œë”©
   kubectl port-forward svc/prometheus-grafana 3000:80 -n prometheus
   
   # ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:3000 ì ‘ì† (ê¸°ë³¸ ì‚¬ìš©ì ì´ë¦„: admin, ë¹„ë°€ë²ˆí˜¸: admin)
   ```

5. **CloudWatch ëŒ€ì‹œë³´ë“œ ìƒì„±**
   ```bash
   # AWS CLIë¥¼ ì‚¬ìš©í•˜ì—¬ CloudWatch ëŒ€ì‹œë³´ë“œ ìƒì„±
   aws cloudwatch put-dashboard \
     --dashboard-name EKS-Monitoring \
     --dashboard-body file://cloudwatch-dashboard.json
   ```

## ğŸŒ í™˜ê²½ë³„ ì„¤ì •

ì´ í”„ë¡œì íŠ¸ëŠ” ë‹¤ì–‘í•œ í™˜ê²½(DEV, STG, PRD ë“±)ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ê° í™˜ê²½ì— ëŒ€í•œ êµ¬ì„± ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

### í™˜ê²½ êµ¬ì¡° ì„¤ì •

í™˜ê²½ì„ ì¶”ê°€í•˜ë ¤ë©´ `ENV` ë””ë ‰í† ë¦¬ ì•„ë˜ì— í•´ë‹¹ í™˜ê²½ì— ëŒ€í•œ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•˜ë©´ ë©ë‹ˆë‹¤:

```bash
mkdir -p ENV/STG/{00_ECR,01_Network,02_EKS,03_Workload,04_S3}
mkdir -p ENV/PRD/{00_ECR,01_Network,02_EKS,03_Workload,04_S3}
```

### í™˜ê²½ë³„ ë³€ìˆ˜ íŒŒì¼ êµ¬ì„±

ê° í™˜ê²½ì— ëŒ€í•´ í™˜ê²½ë³„ ë³€ìˆ˜ íŒŒì¼ì„ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤. DEV í™˜ê²½ì˜ íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ í•„ìš”í•œ ë³€ê²½ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
# ìŠ¤í…Œì´ì§• í™˜ê²½ ì˜ˆì‹œ
cp -r ENV/DEV/00_ECR/* ENV/STG/00_ECR/
cp -r ENV/DEV/01_Network/* ENV/STG/01_Network/
cp -r ENV/DEV/02_EKS/* ENV/STG/02_EKS/
cp -r ENV/DEV/03_Workload/* ENV/STG/03_Workload/
cp -r ENV/DEV/04_S3/* ENV/STG/04_S3/

# í”„ë¡œë•ì…˜ í™˜ê²½ ì˜ˆì‹œ
cp -r ENV/DEV/00_ECR/* ENV/PRD/00_ECR/
cp -r ENV/DEV/01_Network/* ENV/PRD/01_Network/
cp -r ENV/DEV/02_EKS/* ENV/PRD/02_EKS/
cp -r ENV/DEV/03_Workload/* ENV/PRD/03_Workload/
cp -r ENV/DEV/04_S3/* ENV/PRD/04_S3/
```

### í™˜ê²½ë³„ ì£¼ìš” êµ¬ì„± ì°¨ì´

ê° í™˜ê²½ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì„± ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

#### 1. ë„¤íŠ¸ì›Œí¬ êµ¬ì„±

| íŒŒë¼ë¯¸í„° | DEV | STG | PRD |
|------|------|------|------|
| VPC CIDR | 10.0.0.0/16 | 10.1.0.0/16 | 10.2.0.0/16 |
| ê°€ìš© ì˜ì—­ | 2ê°œ | 2ê°œ | 3ê°œ |
| NAT ê²Œì´íŠ¸ì›¨ì´ | ë‹¨ì¼ | ë‹¨ì¼ | ê°€ìš© ì˜ì—­ë³„ |
| ì„œë¸Œë„· êµ¬ì„± | ê¸°ë³¸ | í™•ì¥ | ê³ ê°€ìš©ì„± |
| VPC ì—”ë“œí¬ì¸íŠ¸ | ìµœì†Œ í•„ìˆ˜ | í‘œì¤€ | ì „ì²´ |

#### 2. EKS í´ëŸ¬ìŠ¤í„° êµ¬ì„±

| íŒŒë¼ë¯¸í„° | DEV | STG | PRD |
|------|------|------|------|
| í´ëŸ¬ìŠ¤í„° ë²„ì „ | 1.27 | 1.27 | 1.27 |
| ë…¸ë“œ ê·¸ë£¹ í¬ê¸° | min: 2, max: 4 | min: 2, max: 6 | min: 3, max: 10 |
| ì¸ìŠ¤í„´ìŠ¤ íƒ€ì… | t3.medium | t3.large | m5.large |
| ìš©ëŸ‰ íƒ€ì… | Spot | Spot | On-Demand |
| ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë¡œê¹… | ìµœì†Œ | í‘œì¤€ | ì „ì²´ |
| í´ëŸ¬ìŠ¤í„° ì•”í˜¸í™” | ê¸°ë³¸ | ê³ ê¸‰ | ê³ ê¸‰ |

#### 3. ì›Œí¬ë¡œë“œ êµ¬ì„±

| íŒŒë¼ë¯¸í„° | DEV | STG | PRD |
|------|------|------|------|
| ArgoCD | ê¸°ë³¸ | ê³ ê°€ìš©ì„± | ê³ ê°€ìš©ì„± |
| Karpenter | ê¸°ë³¸ | í™•ì¥ | í™•ì¥ |
| ë¡œê¹… | ìµœì†Œí•œ | í‘œì¤€ | í™•ì¥ |
| ëª¨ë‹ˆí„°ë§ | ê¸°ë³¸ | í‘œì¤€ | í™•ì¥ |
| ë°±ì—… | ë¹„í™œì„±í™” | ì¼ì¼ | ì¼ì¼+ì£¼ê°„ |
| ì •ì±… ì ìš© | ëŠìŠ¨í•¨ | ì¤‘ê°„ | ì—„ê²©í•¨ |

### í™˜ê²½ë³„ ë³€ìˆ˜ íŒŒì¼ êµ¬ì¡° ë° ì„¤ì •

ê° í™˜ê²½ ë””ë ‰í† ë¦¬ì—ëŠ” í•´ë‹¹ í™˜ê²½ì— íŠ¹í™”ëœ ë³€ìˆ˜ íŒŒì¼ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ íŒŒì¼ì€ ì¼ë°˜ì ìœ¼ë¡œ `terraform.tfvars` ë˜ëŠ” íŠ¹ì • í™˜ê²½ ì´ë¦„ì„ í¬í•¨í•œ íŒŒì¼(ì˜ˆ: `dev.tfvars`)ë¡œ ëª…ëª…ë©ë‹ˆë‹¤.

#### ë³€ìˆ˜ íŒŒì¼ êµ¬ì¡°

ë³€ìˆ˜ íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì€ ì„¹ì…˜ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:

1. **ê¸°ë³¸ ì •ë³´**: ë¦¬ì „, í™˜ê²½ ì´ë¦„, í”„ë¡œì íŠ¸ ì´ë¦„ ë“±
2. **ë„¤íŠ¸ì›Œí¬ ì„¤ì •**: VPC CIDR, ì„œë¸Œë„· CIDR, ê°€ìš© ì˜ì—­ ë“±
3. **EKS í´ëŸ¬ìŠ¤í„° ì„¤ì •**: í´ëŸ¬ìŠ¤í„° ë²„ì „, ë…¸ë“œ ê·¸ë£¹ ì„¤ì • ë“±
4. **íƒœê·¸ ë° ë©”íƒ€ë°ì´í„°**: ë¦¬ì†ŒìŠ¤ì— ì ìš©í•  íƒœê·¸ ë° ë©”íƒ€ë°ì´í„°

#### í™˜ê²½ë³„ ë³€ìˆ˜ íŒŒì¼ ì˜ˆì‹œ

##### DEV í™˜ê²½ (Network)

```hcl
# ENV/DEV/01_Network/terraform.tfvars
region = "ap-northeast-2"
name   = "eks-dev"
env    = "dev"
pjt    = "eks-terraform"
costc  = "dev-infra"

vpc_cidr = "10.0.0.0/16"

azs = ["ap-northeast-2a", "ap-northeast-2c"]

public_subnets   = ["10.0.0.0/20", "10.0.16.0/20"]
private_subnets  = ["10.0.32.0/20", "10.0.48.0/20"]
database_subnets = ["10.0.64.0/20", "10.0.80.0/20"]
pod_subnets      = ["10.0.96.0/20", "10.0.112.0/20"]

enable_nat_gateway = true
single_nat_gateway = true

tags = {
  Environment = "dev"
  Project     = "eks-terraform"
  Terraform   = "true"
}
```

##### PRD í™˜ê²½ (Network)

```hcl
# ENV/PRD/01_Network/terraform.tfvars
region = "ap-northeast-2"
name   = "eks-prd"
env    = "prd"
pjt    = "eks-terraform"
costc  = "prd-infra"

vpc_cidr = "10.2.0.0/16"

azs = ["ap-northeast-2a", "ap-northeast-2b", "ap-northeast-2c"]

public_subnets   = ["10.2.0.0/24", "10.2.1.0/24", "10.2.2.0/24"]
private_subnets  = ["10.2.10.0/24", "10.2.11.0/24", "10.2.12.0/24"]
database_subnets = ["10.2.20.0/24", "10.2.21.0/24", "10.2.22.0/24"]
pod_subnets      = ["10.2.30.0/24", "10.2.31.0/24", "10.2.32.0/24"]

enable_nat_gateway = true
single_nat_gateway = false  # ê° AZë§ˆë‹¤ NAT ê²Œì´íŠ¸ì›¨ì´ ìƒì„±

tags = {
  Environment = "prd"
  Project     = "eks-terraform"
  Terraform   = "true"
}
```

#### EKS í´ëŸ¬ìŠ¤í„° í™˜ê²½ë³„ ì„¤ì • ì˜ˆì‹œ

##### DEV í™˜ê²½ (EKS)

```hcl
# ENV/DEV/02_EKS/terraform.tfvars
region = "ap-northeast-2"
name   = "eks-dev"
env    = "dev"
pjt    = "eks-terraform"
costc  = "dev-infra"

cluster_version = "1.27"

# ë…¸ë“œ ê·¸ë£¹ ì„¤ì •
node_groups = {
  default = {
    name             = "default"
    min_size         = 2
    max_size         = 4
    desired_size     = 2
    instance_types   = ["t3.medium"]
    capacity_type    = "SPOT"
    disk_size        = 50
  }
}

# í´ëŸ¬ìŠ¤í„° ë¡œê¹… ì„¤ì •
cluster_enabled_log_types = ["api", "audit"]

# í´ëŸ¬ìŠ¤í„° ì•”í˜¸í™” ì„¤ì •
cluster_encryption_config = {
  provider_key_arn = "arn:aws:kms:ap-northeast-2:123456789012:key/abcd1234-a123-456a-a12b-a123b4cd56ef"
  resources        = ["secrets"]
}

tags = {
  Environment = "dev"
  Project     = "eks-terraform"
  Terraform   = "true"
}
```

##### PRD í™˜ê²½ (EKS)

```hcl
# ENV/PRD/02_EKS/terraform.tfvars
region = "ap-northeast-2"
name   = "eks-prd"
env    = "prd"
pjt    = "eks-terraform"
costc  = "prd-infra"

cluster_version = "1.27"

# ë…¸ë“œ ê·¸ë£¹ ì„¤ì •
node_groups = {
  system = {
    name             = "system"
    min_size         = 3
    max_size         = 6
    desired_size     = 3
    instance_types   = ["m5.large"]
    capacity_type    = "ON_DEMAND"
    disk_size        = 100
    taints = {
      dedicated = {
        key    = "dedicated"
        value  = "system"
        effect = "NO_SCHEDULE"
      }
    }
  },
  application = {
    name             = "application"
    min_size         = 3
    max_size         = 10
    desired_size     = 3
    instance_types   = ["m5.large"]
    capacity_type    = "ON_DEMAND"
    disk_size        = 100
  }
}

# í´ëŸ¬ìŠ¤í„° ë¡œê¹… ì„¤ì •
cluster_enabled_log_types = ["api", "audit", "authenticator", "controllerManager", "scheduler"]

# í´ëŸ¬ìŠ¤í„° ì•”í˜¸í™” ì„¤ì •
cluster_encryption_config = {
  provider_key_arn = "arn:aws:kms:ap-northeast-2:123456789012:key/abcd1234-a123-456a-a12b-a123b4cd56ef"
  resources        = ["secrets"]
}

tags = {
  Environment = "prd"
  Project     = "eks-terraform"
  Terraform   = "true"
}
```

### í™˜ê²½ë³„ ë°°í¬ ë°©ë²•

ê° í™˜ê²½ì— ëŒ€í•´ ë™ì¼í•œ ë°°í¬ ì ˆì°¨ë¥¼ ë”°ë¥´ì§€ë§Œ, í•´ë‹¹ í™˜ê²½ì˜ ë””ë ‰í† ë¦¬ì—ì„œ ì‘ì—…í•©ë‹ˆë‹¤:

```bash
# ì˜ˆ: ìŠ¤í…Œì´ì§• í™˜ê²½ì˜ EKS í´ëŸ¬ìŠ¤í„° ë°°í¬
cd ENV/STG/02_EKS
make init
make plan
make apply
```

### í™˜ê²½ë³„ ê´€ë¦¬ ì „ëµ

í™˜ê²½ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì „ëµì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

#### 1. í™˜ê²½ë³„ ìƒíƒœ ê´€ë¦¬

ê° í™˜ê²½ì˜ Terraform ìƒíƒœë¥¼ ë³„ë„ë¡œ ê´€ë¦¬í•˜ì—¬ í™˜ê²½ ê°„ ê²©ë¦¬ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤:

```hcl
# ENV/DEV/02_EKS/providers.tf
terraform {
  backend "s3" {
    bucket         = "terraform-state-eks-dev"
    key            = "eks/terraform.tfstate"
    region         = "ap-northeast-2"
    dynamodb_table = "terraform-locks"
    encrypt        = true
  }
}

# ENV/STG/02_EKS/providers.tf
terraform {
  backend "s3" {
    bucket         = "terraform-state-eks-stg"
    key            = "eks/terraform.tfstate"
    region         = "ap-northeast-2"
    dynamodb_table = "terraform-locks"
    encrypt        = true
  }
}

# ENV/PRD/02_EKS/providers.tf
terraform {
  backend "s3" {
    bucket         = "terraform-state-eks-prd"
    key            = "eks/terraform.tfstate"
    region         = "ap-northeast-2"
    dynamodb_table = "terraform-locks"
    encrypt        = true
  }
}
```

#### 2. í™˜ê²½ë³„ íƒœê·¸ ë° ëª…ëª… ê·œì¹™

ë¦¬ì†ŒìŠ¤ ì‹ë³„ê³¼ ë¹„ìš© ì¶”ì ì„ ìœ„í•´ ì¼ê´€ëœ íƒœê·¸ ë° ëª…ëª… ê·œì¹™ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

```hcl
# ê³µí†µ íƒœê·¸ êµ¬ì¡°
tags = {
  Environment = var.env           # "dev", "stg", "prd"
  Project     = var.pjt           # í”„ë¡œì íŠ¸ ì´ë¦„
  CostCenter  = var.costc         # ë¹„ìš© ì„¼í„° ì½”ë“œ
  Terraform   = "true"            # Terraformìœ¼ë¡œ ê´€ë¦¬ë¨ì„ í‘œì‹œ
  GitRepo     = var.github_repo   # ì†ŒìŠ¤ ì½”ë“œ ì €ì¥ì†Œ
  GitPath     = var.github_path   # ì €ì¥ì†Œ ë‚´ ê²½ë¡œ
}

# ë¦¬ì†ŒìŠ¤ ëª…ëª… ê·œì¹™
name = "${var.pjt}-${var.env}-${var.resource_type}"
```

#### 3. í™˜ê²½ë³„ ë³€ìˆ˜ ê´€ë¦¬

ê³µí†µ ë³€ìˆ˜ì™€ í™˜ê²½ë³„ ë³€ìˆ˜ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤:

1. **ê³µí†µ ë³€ìˆ˜**: ëª¨ë“  í™˜ê²½ì—ì„œ ê³µìœ ë˜ëŠ” ë³€ìˆ˜ëŠ” ëª¨ë“ˆ ë‚´ì—ì„œ ê¸°ë³¸ê°’ìœ¼ë¡œ ì •ì˜
2. **í™˜ê²½ë³„ ë³€ìˆ˜**: ê° í™˜ê²½ì˜ `terraform.tfvars` íŒŒì¼ì—ì„œ ì¬ì •ì˜
3. **ë¯¼ê°í•œ ë³€ìˆ˜**: AWS Secrets Manager ë˜ëŠ” í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•´ ê´€ë¦¬

#### 4. í™˜ê²½ ê°„ ìŠ¹ê²© ì „ëµ

ì½”ë“œì™€ êµ¬ì„±ì´ ê°œë°œì—ì„œ í”„ë¡œë•ì…˜ìœ¼ë¡œ ì´ë™í•˜ëŠ” ê³¼ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤:

1. **ê°œë°œ(DEV)**: ìƒˆë¡œìš´ ê¸°ëŠ¥ ë° ë³€ê²½ ì‚¬í•­ í…ŒìŠ¤íŠ¸
2. **ìŠ¤í…Œì´ì§•(STG)**: í”„ë¡œë•ì…˜ê³¼ ìœ ì‚¬í•œ í™˜ê²½ì—ì„œ í†µí•© í…ŒìŠ¤íŠ¸
3. **í”„ë¡œë•ì…˜(PRD)**: ìµœì¢… ì‚¬ìš©ìì—ê²Œ ì„œë¹„ìŠ¤ ì œê³µ

ìŠ¹ê²© í”„ë¡œì„¸ìŠ¤:

```bash
# 1. DEV í™˜ê²½ì—ì„œ ë³€ê²½ ì‚¬í•­ í…ŒìŠ¤íŠ¸
cd ENV/DEV/02_EKS
make plan
make apply

# 2. ë³€ê²½ ì‚¬í•­ì„ STG í™˜ê²½ì— ì ìš©
cd ../../STG/02_EKS
# í•„ìš”í•œ ê²½ìš° terraform.tfvars íŒŒì¼ ìˆ˜ì •
vi terraform.tfvars
make plan
make apply

# 3. ë³€ê²½ ì‚¬í•­ì„ PRD í™˜ê²½ì— ì ìš©
cd ../../PRD/02_EKS
# í•„ìš”í•œ ê²½ìš° terraform.tfvars íŒŒì¼ ìˆ˜ì •
vi terraform.tfvars
make plan
make apply
```

#### 5. í™˜ê²½ë³„ ì ‘ê·¼ ì œì–´

ê° í™˜ê²½ì— ëŒ€í•œ ì ‘ê·¼ì„ ì œí•œí•˜ì—¬ ë³´ì•ˆì„ ê°•í™”í•©ë‹ˆë‹¤:

1. **DEV**: ê°œë°œì íŒ€ì— ê´‘ë²”ìœ„í•œ ì ‘ê·¼ ê¶Œí•œ ë¶€ì—¬
2. **STG**: ì œí•œëœ ê°œë°œì ë° QA íŒ€ì— ì ‘ê·¼ ê¶Œí•œ ë¶€ì—¬
3. **PRD**: ìš´ì˜ íŒ€ì—ë§Œ ì œí•œëœ ì ‘ê·¼ ê¶Œí•œ ë¶€ì—¬

IAM ì •ì±… ì˜ˆì‹œ:

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": ["eks:*"],
      "Resource": "arn:aws:eks:ap-northeast-2:123456789012:cluster/eks-dev-*"
    },
    {
      "Effect": "Deny",
      "Action": ["eks:*"],
      "Resource": [
        "arn:aws:eks:ap-northeast-2:123456789012:cluster/eks-stg-*",
        "arn:aws:eks:ap-northeast-2:123456789012:cluster/eks-prd-*"
      ]
    }
  ]
}
```

## ğŸ”§ ë¬¸ì œ í•´ê²°

ì´ ì„¹ì…˜ì—ì„œëŠ” AWS EKS Terraform í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì¼ë°˜ì ì¸ ë¬¸ì œì™€ í•´ê²° ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ë˜í•œ ë””ë²„ê¹… íŒê³¼ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸(FAQ)ë„ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

## ì¼ë°˜ì ì¸ ë¬¸ì œì™€ í•´ê²° ë°©ë²•

### Terraform ê´€ë ¨ ë¬¸ì œ

#### 1. Terraform ì´ˆê¸°í™” ì‹¤íŒ¨

**ë¬¸ì œ**: `terraform init` ë˜ëŠ” `make init` ëª…ë ¹ì´ ì‹¤íŒ¨í•˜ê³  í”„ë¡œë°”ì´ë” ë˜ëŠ” ëª¨ë“ˆì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ì„¸ìš”.
- í”„ë¡ì‹œ ì„¤ì •ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•˜ì„¸ìš”.
- Terraform ë²„ì „ì´ ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš” (`terraform version`).
- AWS í”„ë¡œí•„ì´ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. Makefileì˜ `PROFILE_NAME` ë³€ìˆ˜ë¥¼ í™•ì¸í•˜ê³  í•„ìš”í•œ ê²½ìš° ìˆ˜ì •í•˜ì„¸ìš”.
- ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ Terraform ìºì‹œë¥¼ ì •ë¦¬í•´ ë³´ì„¸ìš”:
  ```bash
  make clean
  make init
  ```

#### 2. Terraform ê³„íš/ì ìš© ì‹¤íŒ¨

**ë¬¸ì œ**: `terraform plan` ë˜ëŠ” `terraform apply` ëª…ë ¹ì´ ì˜¤ë¥˜ì™€ í•¨ê»˜ ì‹¤íŒ¨í•©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì£¼ì˜ ê¹Šê²Œ ì½ê³  ë¬¸ì œë¥¼ íŒŒì•…í•˜ì„¸ìš”.
- AWS ìê²© ì¦ëª…ì´ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš” (`aws sts get-caller-identity`).
- í•„ìš”í•œ IAM ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
- ë³€ìˆ˜ íŒŒì¼(`env/<í™˜ê²½>.tfvars`)ì´ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
- ê²°ê³¼ ë¡œê·¸ íŒŒì¼ì„ í™•ì¸í•˜ì„¸ìš” (`results/plan-<í™˜ê²½>-output-<íƒ€ì„ìŠ¤íƒ¬í”„>.log` ë˜ëŠ” `results/apply-<í™˜ê²½>-output-<íƒ€ì„ìŠ¤íƒ¬í”„>.log`).
- ìì„¸í•œ ë¡œê·¸ë¥¼ í™•ì¸í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì„¸ìš”:
  ```bash
  TF_LOG=DEBUG AWS_PROFILE=<í”„ë¡œí•„ëª…> terraform apply -var-file=env/<í™˜ê²½>.tfvars
  ```

#### 3. Terraform ìƒíƒœ ì ê¸ˆ ë¬¸ì œ

**ë¬¸ì œ**: ë‹¤ë¥¸ Terraform ì‘ì—…ì´ ì‹¤í–‰ ì¤‘ì´ë¼ëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- ë‹¤ë¥¸ Terraform ì‘ì—…ì´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ì„¸ìš”.
- ì´ì „ ì‘ì—…ì´ ë¹„ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œëœ ê²½ìš° DynamoDBì—ì„œ ì ê¸ˆì„ ìˆ˜ë™ìœ¼ë¡œ í•´ì œí•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
  ```bash
  aws dynamodb delete-item \
    --table-name terraform-state-lock \
    --key '{"LockID": {"S": "your-lock-id"}}'
  ```
- ë¡œì»¬ ìƒíƒœ íŒŒì¼ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° `.terraform.tfstate.lock.info` íŒŒì¼ì„ ì‚­ì œí•˜ì„¸ìš”.

### AWS ê´€ë ¨ ë¬¸ì œ

#### 1. AWS ìê²© ì¦ëª… ë¬¸ì œ

**ë¬¸ì œ**: AWS ìê²© ì¦ëª…ì´ ì—†ê±°ë‚˜ ë§Œë£Œë˜ì—ˆë‹¤ëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- AWS CLIê°€ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws configure list
  ```
- ìê²© ì¦ëª…ì´ ë§Œë£Œëœ ê²½ìš° ê°±ì‹ í•˜ì„¸ìš”:
  ```bash
  aws configure
  ```
- IAM Identity Center(SSO)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ì„¸ìš”:
  ```bash
  aws sso login --profile <í”„ë¡œí•„ëª…>
  ```
- í™˜ê²½ ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  echo $AWS_ACCESS_KEY_ID
  echo $AWS_SECRET_ACCESS_KEY
  echo $AWS_REGION
  ```
- Makefileì—ì„œ ì‚¬ìš©í•˜ëŠ” í”„ë¡œí•„ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•˜ì„¸ìš”. í•„ìš”í•œ ê²½ìš° Makefileì˜ `PROFILE_NAME` ë³€ìˆ˜ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”.

#### 2. ì„œë¹„ìŠ¤ í• ë‹¹ëŸ‰ ì´ˆê³¼

**ë¬¸ì œ**: AWS ì„œë¹„ìŠ¤ í• ë‹¹ëŸ‰ì„ ì´ˆê³¼í–ˆë‹¤ëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- AWS ì½˜ì†”ì—ì„œ Service Quotas ì„œë¹„ìŠ¤ë¥¼ í™•ì¸í•˜ì—¬ í˜„ì¬ ì‚¬ìš©ëŸ‰ê³¼ í•œë„ë¥¼ í™•ì¸í•˜ì„¸ìš”.
- í•„ìš”í•œ ê²½ìš° í• ë‹¹ëŸ‰ ì¦ê°€ë¥¼ ìš”ì²­í•˜ì„¸ìš”.
- ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•˜ê±°ë‚˜ ë¶ˆí•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•˜ì—¬ ì‚¬ìš©ëŸ‰ì„ ì¤„ì´ì„¸ìš”.

#### 3. VPC ë¦¬ì†ŒìŠ¤ ì œí•œ

**ë¬¸ì œ**: VPC, ì„œë¸Œë„·, ë³´ì•ˆ ê·¸ë£¹ ë“±ì˜ ë„¤íŠ¸ì›Œí¬ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- ë¦¬ì „ë³„ VPC ë¦¬ì†ŒìŠ¤ ì œí•œì„ í™•ì¸í•˜ì„¸ìš”.
- ë¶ˆí•„ìš”í•œ VPC ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•˜ì„¸ìš”.
- í•„ìš”í•œ ê²½ìš° í• ë‹¹ëŸ‰ ì¦ê°€ë¥¼ ìš”ì²­í•˜ì„¸ìš”.

### EKS ê´€ë ¨ ë¬¸ì œ

#### 1. EKS í´ëŸ¬ìŠ¤í„° ìƒì„± ì‹¤íŒ¨

**ë¬¸ì œ**: EKS í´ëŸ¬ìŠ¤í„° ìƒì„±ì´ ì‹¤íŒ¨í•˜ê³  ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- IAM ê¶Œí•œì´ ì¶©ë¶„í•œì§€ í™•ì¸í•˜ì„¸ìš”.
- VPC ë° ì„œë¸Œë„· êµ¬ì„±ì´ EKS ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
- ì„œë¸Œë„·ì— ì˜¬ë°”ë¥¸ íƒœê·¸ê°€ ì§€ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws ec2 describe-subnets --subnet-ids <ì„œë¸Œë„·ID> --query "Subnets[].Tags"
  ```
- CloudTrail ë¡œê·¸ë¥¼ í™•ì¸í•˜ì—¬ ìì„¸í•œ ì˜¤ë¥˜ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.
- ê²°ê³¼ ë¡œê·¸ íŒŒì¼ì„ í™•ì¸í•˜ì„¸ìš” (`results/apply-<í™˜ê²½>-output-<íƒ€ì„ìŠ¤íƒ¬í”„>.log`).

#### 2. ë…¸ë“œ ê·¸ë£¹ ìƒì„± ì‹¤íŒ¨

**ë¬¸ì œ**: EKS ë…¸ë“œ ê·¸ë£¹ ìƒì„±ì´ ì‹¤íŒ¨í•˜ê³  ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- IAM ì—­í•  ë° ì •ì±…ì´ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
- ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì´ ì„ íƒí•œ ë¦¬ì „ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œì§€ í™•ì¸í•˜ì„¸ìš”.
- AMI IDê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•˜ì„¸ìš”.
- ë³´ì•ˆ ê·¸ë£¹ ê·œì¹™ì´ ë…¸ë“œì™€ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ê°„ì˜ í†µì‹ ì„ í—ˆìš©í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
- CloudFormation ìŠ¤íƒ ì´ë²¤íŠ¸ë¥¼ í™•ì¸í•˜ì—¬ ìì„¸í•œ ì˜¤ë¥˜ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws cloudformation describe-stack-events --stack-name <ìŠ¤íƒëª…>
  ```

#### 3. kubectl ì—°ê²° ë¬¸ì œ

**ë¬¸ì œ**: kubectlì„ ì‚¬ìš©í•˜ì—¬ EKS í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- kubeconfigê°€ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws eks update-kubeconfig --name <í´ëŸ¬ìŠ¤í„°ëª…> --region <ë¦¬ì „> --profile <í”„ë¡œí•„ëª…>
  ```
- AWS CLI ë²„ì „ì´ ìµœì‹ ì¸ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws --version
  ```
- IAM ìê²© ì¦ëª…ì´ í´ëŸ¬ìŠ¤í„°ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws sts get-caller-identity --profile <í”„ë¡œí•„ëª…>
  ```
- aws-iam-authenticatorê°€ ì„¤ì¹˜ë˜ì–´ ìˆê³  PATHì— ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws-iam-authenticator version
  ```

## ë””ë²„ê¹… íŒê³¼ ë¡œê·¸ í™•ì¸ ë°©ë²•

### Terraform ë””ë²„ê¹…

#### 1. ìì„¸í•œ ë¡œê·¸ í™œì„±í™”

Terraform ì‘ì—…ì˜ ìì„¸í•œ ë¡œê·¸ë¥¼ í™•ì¸í•˜ë ¤ë©´ `TF_LOG` í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì„¸ìš”:

```bash
# ê°€ì¥ ìì„¸í•œ ë¡œê·¸ ìˆ˜ì¤€
TF_LOG=TRACE AWS_PROFILE=<í”„ë¡œí•„ëª…> terraform apply -var-file=env/<í™˜ê²½>.tfvars

# ë””ë²„ê·¸ ìˆ˜ì¤€ ë¡œê·¸
TF_LOG=DEBUG AWS_PROFILE=<í”„ë¡œí•„ëª…> terraform apply -var-file=env/<í™˜ê²½>.tfvars

# ë¡œê·¸ë¥¼ íŒŒì¼ì— ì €ì¥
TF_LOG=DEBUG TF_LOG_PATH=./terraform.log AWS_PROFILE=<í”„ë¡œí•„ëª…> terraform apply -var-file=env/<í™˜ê²½>.tfvars
```

#### 2. Terraform ìƒíƒœ ê²€ì‚¬

í˜„ì¬ Terraform ìƒíƒœë¥¼ ê²€ì‚¬í•˜ì—¬ ë¬¸ì œë¥¼ ì§„ë‹¨í•˜ì„¸ìš”:

```bash
# ìƒíƒœì— ìˆëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ ë‚˜ì—´
AWS_PROFILE=<í”„ë¡œí•„ëª…> terraform state list

# íŠ¹ì • ë¦¬ì†ŒìŠ¤ì˜ ìƒíƒœ í™•ì¸
AWS_PROFILE=<í”„ë¡œí•„ëª…> terraform state show 'aws_eks_cluster.this'

# ìƒíƒœ íŒŒì¼ ê²€ì‚¬
AWS_PROFILE=<í”„ë¡œí•„ëª…> terraform show
```

#### 3. Terraform ê³„íš íŒŒì¼ ì €ì¥ ë° ê²€ì‚¬

ê³„íš íŒŒì¼ì„ ì €ì¥í•˜ê³  ê²€ì‚¬í•˜ì—¬ ì˜ˆìƒ ë³€ê²½ ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”:

```bash
# ê³„íš ì €ì¥
AWS_PROFILE=<í”„ë¡œí•„ëª…> terraform plan -var-file=env/<í™˜ê²½>.tfvars -out=tfplan

# ê³„íš ê²€ì‚¬
terraform show tfplan

# JSON í˜•ì‹ìœ¼ë¡œ ê³„íš ê²€ì‚¬
terraform show -json tfplan | jq
```

### AWS ë””ë²„ê¹…

#### 1. AWS CLIë¥¼ ì‚¬ìš©í•œ ë¦¬ì†ŒìŠ¤ ê²€ì‚¬

AWS CLIë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ì†ŒìŠ¤ ìƒíƒœë¥¼ í™•ì¸í•˜ì„¸ìš”:

```bash
# EKS í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸
aws eks describe-cluster --name <í´ëŸ¬ìŠ¤í„°ëª…> --profile <í”„ë¡œí•„ëª…>

# EC2 ì¸ìŠ¤í„´ìŠ¤ í™•ì¸
aws ec2 describe-instances --filters "Name=tag:Name,Values=eks-node*" --profile <í”„ë¡œí•„ëª…>

# VPC ë° ì„œë¸Œë„· í™•ì¸
aws ec2 describe-vpcs --profile <í”„ë¡œí•„ëª…>
aws ec2 describe-subnets --filters "Name=vpc-id,Values=<VPC-ID>" --profile <í”„ë¡œí•„ëª…>
```

#### 2. CloudTrail ë¡œê·¸ í™•ì¸

AWS CloudTrailì„ ì‚¬ìš©í•˜ì—¬ API í˜¸ì¶œ ë° ì˜¤ë¥˜ë¥¼ í™•ì¸í•˜ì„¸ìš”:

```bash
# ìµœê·¼ ì´ë²¤íŠ¸ í™•ì¸
aws cloudtrail lookup-events --max-results 10 --profile <í”„ë¡œí•„ëª…>

# íŠ¹ì • ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì´ë²¤íŠ¸ í™•ì¸
aws cloudtrail lookup-events --lookup-attributes AttributeKey=ResourceName,AttributeValue=<ë¦¬ì†ŒìŠ¤ëª…> --profile <í”„ë¡œí•„ëª…>
```

#### 3. CloudWatch ë¡œê·¸ í™•ì¸

CloudWatch Logsë¥¼ ì‚¬ìš©í•˜ì—¬ EKS ë° ê¸°íƒ€ ì„œë¹„ìŠ¤ì˜ ë¡œê·¸ë¥¼ í™•ì¸í•˜ì„¸ìš”:

```bash
# ë¡œê·¸ ê·¸ë£¹ ë‚˜ì—´
aws logs describe-log-groups --profile <í”„ë¡œí•„ëª…>

# ë¡œê·¸ ìŠ¤íŠ¸ë¦¼ ë‚˜ì—´
aws logs describe-log-streams --log-group-name <ë¡œê·¸ê·¸ë£¹ëª…> --profile <í”„ë¡œí•„ëª…>

# ë¡œê·¸ ì´ë²¤íŠ¸ í™•ì¸
aws logs get-log-events --log-group-name <ë¡œê·¸ê·¸ë£¹ëª…> --log-stream-name <ë¡œê·¸ìŠ¤íŠ¸ë¦¼ëª…> --profile <í”„ë¡œí•„ëª…>
```

### Kubernetes ë””ë²„ê¹…

#### 1. í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸

í´ëŸ¬ìŠ¤í„° ìƒíƒœë¥¼ í™•ì¸í•˜ì—¬ ë¬¸ì œë¥¼ ì§„ë‹¨í•˜ì„¸ìš”:

```bash
# ë…¸ë“œ ìƒíƒœ í™•ì¸
kubectl get nodes
kubectl describe nodes

# ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í™•ì¸
kubectl get namespaces

# ëª¨ë“  ë¦¬ì†ŒìŠ¤ í™•ì¸
kubectl get all --all-namespaces
```

#### 2. íŒŒë“œ ë¡œê·¸ ë° ì´ë²¤íŠ¸ í™•ì¸

íŒŒë“œ ë¡œê·¸ ë° ì´ë²¤íŠ¸ë¥¼ í™•ì¸í•˜ì—¬ ë¬¸ì œë¥¼ ì§„ë‹¨í•˜ì„¸ìš”:

```bash
# íŒŒë“œ ë¡œê·¸ í™•ì¸
kubectl logs <íŒŒë“œëª…> -n <ë„¤ì„ìŠ¤í˜ì´ìŠ¤>

# ì´ì „ ì»¨í…Œì´ë„ˆì˜ ë¡œê·¸ í™•ì¸
kubectl logs <íŒŒë“œëª…> -n <ë„¤ì„ìŠ¤í˜ì´ìŠ¤> --previous

# íŒŒë“œ ì´ë²¤íŠ¸ í™•ì¸
kubectl describe pod <íŒŒë“œëª…> -n <ë„¤ì„ìŠ¤í˜ì´ìŠ¤>

# ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°
kubectl logs -f <íŒŒë“œëª…> -n <ë„¤ì„ìŠ¤í˜ì´ìŠ¤>
```

#### 3. ë„¤íŠ¸ì›Œí¬ ì—°ê²° í…ŒìŠ¤íŠ¸

ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë¬¸ì œë¥¼ ì§„ë‹¨í•˜ì„¸ìš”:

```bash
# ì„ì‹œ ë””ë²„ê¹… íŒŒë“œ ìƒì„±
kubectl run debug --image=busybox --rm -it -- sh

# ë„¤íŠ¸ì›Œí¬ ì—°ê²° í…ŒìŠ¤íŠ¸
ping <ì„œë¹„ìŠ¤ëª…>
wget -O- http://<ì„œë¹„ìŠ¤ëª…>:<í¬íŠ¸>
nc -zv <ì„œë¹„ìŠ¤ëª…> <í¬íŠ¸>
```

#### 4. kube-system ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í™•ì¸

ì‹œìŠ¤í…œ êµ¬ì„± ìš”ì†Œì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ì„¸ìš”:

```bash
# kube-system íŒŒë“œ í™•ì¸
kubectl get pods -n kube-system

# CoreDNS ë¡œê·¸ í™•ì¸
kubectl logs -l k8s-app=kube-dns -n kube-system

# kube-proxy ë¡œê·¸ í™•ì¸
kubectl logs -l k8s-app=kube-proxy -n kube-system
```

## ìì£¼ ë¬»ëŠ” ì§ˆë¬¸(FAQ)

### ì¼ë°˜ì ì¸ ì§ˆë¬¸

#### Q: ì´ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ìµœì†Œ AWS ê¶Œí•œì€ ë¬´ì—‡ì¸ê°€ìš”?
A: ìµœì†Œí•œ EKS, EC2, IAM, VPC, S3, CloudWatch ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [ì‚¬ì „ ìš”êµ¬ì‚¬í•­](#ì‚¬ì „-ìš”êµ¬ì‚¬í•­) ì„¹ì…˜ì˜ IAM ê¶Œí•œ ì„¤ì •ì„ ì°¸ì¡°í•˜ì„¸ìš”.

#### Q: í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì´ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ê¶Œì¥ ì‚¬í•­ì€ ë¬´ì—‡ì¸ê°€ìš”?
A: í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ë‹¤ìŒì„ ê¶Œì¥í•©ë‹ˆë‹¤:
- ì›ê²© Terraform ë°±ì—”ë“œ(S3 + DynamoDB) ì‚¬ìš©
- ìµœì†Œ 3ê°œì˜ ê°€ìš© ì˜ì—­ì— ê±¸ì³ ê³ ê°€ìš©ì„± êµ¬ì„±
- ì ì ˆí•œ ë…¸ë“œ í¬ê¸° ë° ìë™ í™•ì¥ ì„¤ì •
- ë³´ì•ˆ ê°•í™”(KMS ì•”í˜¸í™”, í”„ë¼ì´ë¹— ì—”ë“œí¬ì¸íŠ¸, ë„¤íŠ¸ì›Œí¬ ì •ì±… ë“±)
- ì •ê¸°ì ì¸ ë°±ì—… ë° ì¬í•´ ë³µêµ¬ ê³„íš

#### Q: ì—¬ëŸ¬ í™˜ê²½(ê°œë°œ, ìŠ¤í…Œì´ì§•, í”„ë¡œë•ì…˜)ì„ ì–´ë–»ê²Œ ê´€ë¦¬í•´ì•¼ í•˜ë‚˜ìš”?
A: ENV ë””ë ‰í† ë¦¬ ì•„ë˜ì— ê° í™˜ê²½ì— ëŒ€í•œ ë³„ë„ì˜ ë””ë ‰í† ë¦¬(DEV, STG, PRD ë“±)ë¥¼ ìƒì„±í•˜ê³ , í™˜ê²½ë³„ ë³€ìˆ˜ íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ êµ¬ì„±ì„ ê´€ë¦¬í•˜ì„¸ìš”. ê° í™˜ê²½ì— ëŒ€í•´ ë³„ë„ì˜ Terraform ìƒíƒœ íŒŒì¼ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

### Terraform ê´€ë ¨ ì§ˆë¬¸

#### Q: Terraform ìƒíƒœ íŒŒì¼ì„ ì–´ë–»ê²Œ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•´ì•¼ í•˜ë‚˜ìš”?
A: ë‹¤ìŒ ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ Terraform ìƒíƒœ íŒŒì¼ì„ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ì„¸ìš”:
- S3 ë²„í‚·ì— ì›ê²©ìœ¼ë¡œ ì €ì¥
- ë²„ì „ ê´€ë¦¬ í™œì„±í™”
- ì„œë²„ ì¸¡ ì•”í˜¸í™” ì‚¬ìš©
- DynamoDBë¥¼ ì‚¬ìš©í•œ ìƒíƒœ ì ê¸ˆ êµ¬í˜„
- ì•¡ì„¸ìŠ¤ ì œí•œ ë° ë¡œê¹… í™œì„±í™”

#### Q: Terraform ëª¨ë“ˆì„ ì–´ë–»ê²Œ ì—…ë°ì´íŠ¸í•´ì•¼ í•˜ë‚˜ìš”?
A: ëª¨ë“ˆì„ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¥´ì„¸ìš”:
1. ë³€ê²½ ì‚¬í•­ì„ í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ë¨¼ì € í…ŒìŠ¤íŠ¸
2. `terraform init -upgrade` ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë“ˆ ì—…ë°ì´íŠ¸
3. `terraform plan`ì„ ì‹¤í–‰í•˜ì—¬ ë³€ê²½ ì‚¬í•­ í™•ì¸
4. ë³€ê²½ ì‚¬í•­ì´ ì•ˆì „í•œ ê²½ìš° `terraform apply` ì‹¤í–‰

#### Q: Terraform ì‘ì—…ì´ ì¤‘ê°„ì— ì‹¤íŒ¨í•˜ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?
A: ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¥´ì„¸ìš”:
1. ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í™•ì¸í•˜ê³  ë¬¸ì œ í•´ê²°
2. í•„ìš”í•œ ê²½ìš° ìˆ˜ë™ìœ¼ë¡œ ë¶ˆì™„ì „í•œ ë¦¬ì†ŒìŠ¤ ì •ë¦¬
3. ìƒíƒœ íŒŒì¼ì´ ì†ìƒëœ ê²½ìš° ë°±ì—…ì—ì„œ ë³µì›
4. ë¬¸ì œê°€ í•´ê²°ë˜ë©´ `terraform plan` ë° `terraform apply` ë‹¤ì‹œ ì‹¤í–‰

### EKS ê´€ë ¨ ì§ˆë¬¸

#### Q: EKS í´ëŸ¬ìŠ¤í„° ë²„ì „ì„ ì–´ë–»ê²Œ ì—…ê·¸ë ˆì´ë“œí•´ì•¼ í•˜ë‚˜ìš”?
A: EKS í´ëŸ¬ìŠ¤í„° ë²„ì „ì„ ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¥´ì„¸ìš”:
1. Terraform ë³€ìˆ˜ íŒŒì¼(`env/<í™˜ê²½>.tfvars`)ì—ì„œ `cluster_version` ê°’ì„ ì—…ë°ì´íŠ¸
2. `make plan`ì„ ì‹¤í–‰í•˜ì—¬ ë³€ê²½ ì‚¬í•­ í™•ì¸
3. `make apply`ë¥¼ ì‹¤í–‰í•˜ì—¬ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì—…ê·¸ë ˆì´ë“œ
4. ë…¸ë“œ ê·¸ë£¹ì„ ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ ìƒˆ ë…¸ë“œ ê·¸ë£¹ì„ ìƒì„±í•˜ê³  ì›Œí¬ë¡œë“œë¥¼ ë§ˆì´ê·¸ë ˆì´ì…˜í•œ í›„ ì´ì „ ë…¸ë“œ ê·¸ë£¹ ì‚­ì œ

#### Q: EKS í´ëŸ¬ìŠ¤í„°ì— ìƒˆ ë…¸ë“œ ê·¸ë£¹ì„ ì–´ë–»ê²Œ ì¶”ê°€í•˜ë‚˜ìš”?
A: ìƒˆ ë…¸ë“œ ê·¸ë£¹ì„ ì¶”ê°€í•˜ë ¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¥´ì„¸ìš”:
1. Terraform ë³€ìˆ˜ íŒŒì¼(`env/<í™˜ê²½>.tfvars`)ì— ìƒˆ ë…¸ë“œ ê·¸ë£¹ êµ¬ì„± ì¶”ê°€
2. `make plan`ì„ ì‹¤í–‰í•˜ì—¬ ë³€ê²½ ì‚¬í•­ í™•ì¸
3. `make apply`ë¥¼ ì‹¤í–‰í•˜ì—¬ ìƒˆ ë…¸ë“œ ê·¸ë£¹ ìƒì„±
4. í•„ìš”í•œ ê²½ìš° ì›Œí¬ë¡œë“œë¥¼ ìƒˆ ë…¸ë“œ ê·¸ë£¹ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜

#### Q: EKS í´ëŸ¬ìŠ¤í„°ì— ìƒˆ ì• ë“œì˜¨ì„ ì–´ë–»ê²Œ ì¶”ê°€í•˜ë‚˜ìš”?
A: ìƒˆ ì• ë“œì˜¨ì„ ì¶”ê°€í•˜ë ¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¥´ì„¸ìš”:
1. Terraform ë³€ìˆ˜ íŒŒì¼(`env/<í™˜ê²½>.tfvars`)ì— ìƒˆ ì• ë“œì˜¨ êµ¬ì„± ì¶”ê°€
2. `make plan`ì„ ì‹¤í–‰í•˜ì—¬ ë³€ê²½ ì‚¬í•­ í™•ì¸
3. `make apply`ë¥¼ ì‹¤í–‰í•˜ì—¬ ìƒˆ ì• ë“œì˜¨ ë°°í¬
4. ì• ë“œì˜¨ ìƒíƒœ í™•ì¸: `kubectl get pods -n <ì• ë“œì˜¨-ë„¤ì„ìŠ¤í˜ì´ìŠ¤>`

### Kubernetes ê´€ë ¨ ì§ˆë¬¸

#### Q: kubectlì´ "Unable to connect to the server" ì˜¤ë¥˜ë¥¼ í‘œì‹œí•˜ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?
A: ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:
1. kubeconfigê°€ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸: `aws eks update-kubeconfig --name <í´ëŸ¬ìŠ¤í„°ëª…> --region <ë¦¬ì „> --profile <í”„ë¡œí•„ëª…>`
2. AWS ìê²© ì¦ëª…ì´ ìœ íš¨í•œì§€ í™•ì¸: `aws sts get-caller-identity --profile <í”„ë¡œí•„ëª…>`
3. VPN ë˜ëŠ” í”„ë¡ì‹œ ì„¤ì •ì´ ì—°ê²°ì„ ë°©í•´í•˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸
4. í´ëŸ¬ìŠ¤í„° API ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸: `aws eks describe-cluster --name <í´ëŸ¬ìŠ¤í„°ëª…> --profile <í”„ë¡œí•„ëª…>`

#### Q: íŒŒë“œê°€ ImagePullBackOff ì˜¤ë¥˜ë¥¼ í‘œì‹œí•˜ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?
A: ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:
1. ì´ë¯¸ì§€ ì´ë¦„ê³¼ íƒœê·¸ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
2. í”„ë¼ì´ë¹— ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì´ë¯¸ì§€ í’€ ì‹œí¬ë¦¿ì´ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
3. ë…¸ë“œê°€ ì¸í„°ë„·ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸
4. ECRì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë…¸ë“œ IAM ì—­í• ì— ECR ì•¡ì„¸ìŠ¤ ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸

#### Q: Kubernetes ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•  ìˆ˜ ì—†ê³  "Terminating" ìƒíƒœë¡œ ë©ˆì¶° ìˆìœ¼ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?
A: ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ ê°•ì œë¡œ ì‚­ì œí•˜ì„¸ìš”:
```bash
kubectl delete pod <íŒŒë“œëª…> -n <ë„¤ì„ìŠ¤í˜ì´ìŠ¤> --grace-period=0 --force
```
ë˜ëŠ” íŒŒì´ë„ë¼ì´ì €ë¥¼ ì œê±°í•˜ì„¸ìš”:
```bash
kubectl patch pod <íŒŒë“œëª…> -n <ë„¤ì„ìŠ¤í˜ì´ìŠ¤> -p '{"metadata":{"finalizers":[]}}' --type=merge
```

#### Q: EKS í´ëŸ¬ìŠ¤í„°ì˜ DNS ë¬¸ì œë¥¼ ì–´ë–»ê²Œ í•´ê²°í•˜ë‚˜ìš”?
A: ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:
1. CoreDNS íŒŒë“œê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸: `kubectl get pods -n kube-system -l k8s-app=kube-dns`
2. CoreDNS ë¡œê·¸ í™•ì¸: `kubectl logs -l k8s-app=kube-dns -n kube-system`
3. DNS êµ¬ì„± í™•ì¸: `kubectl get configmap coredns -n kube-system -o yaml`
4. í…ŒìŠ¤íŠ¸ íŒŒë“œë¥¼ ìƒì„±í•˜ì—¬ DNS í™•ì¸ í…ŒìŠ¤íŠ¸:
   ```bash
   kubectl run dnsutils --image=tutum/dnsutils --rm -it -- bash
   # íŒŒë“œ ë‚´ì—ì„œ
   nslookup kubernetes.default.svc.cluster.local
   ```

### ì¼ë°˜ì ì¸ ë¬¸ì œì™€ í•´ê²° ë°©ë²•

#### Terraform ê´€ë ¨ ë¬¸ì œ

##### 1. Terraform ì´ˆê¸°í™” ì‹¤íŒ¨

**ë¬¸ì œ**: `terraform init` ë˜ëŠ” `make init` ëª…ë ¹ì´ ì‹¤íŒ¨í•˜ê³  í”„ë¡œë°”ì´ë” ë˜ëŠ” ëª¨ë“ˆì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ì„¸ìš”.
- í”„ë¡ì‹œ ì„¤ì •ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•˜ì„¸ìš”.
- Terraform ë²„ì „ì´ ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš” (`terraform version`).
- ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ Terraform ìºì‹œë¥¼ ì •ë¦¬í•´ ë³´ì„¸ìš”:
  ```bash
  rm -rf .terraform
  terraform init
  # ë˜ëŠ”
  make clean
  make init
  ```

##### 2. Terraform ê³„íš/ì ìš© ì‹¤íŒ¨

**ë¬¸ì œ**: `terraform plan` ë˜ëŠ” `terraform apply` ëª…ë ¹ì´ ì˜¤ë¥˜ì™€ í•¨ê»˜ ì‹¤íŒ¨í•©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì£¼ì˜ ê¹Šê²Œ ì½ê³  ë¬¸ì œë¥¼ íŒŒì•…í•˜ì„¸ìš”.
- AWS ìê²© ì¦ëª…ì´ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš” (`aws sts get-caller-identity`).
- í•„ìš”í•œ IAM ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
- ë³€ìˆ˜ íŒŒì¼(`terraform.tfvars` ë˜ëŠ” `env/<í™˜ê²½>.tfvars`)ì´ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
- ìì„¸í•œ ë¡œê·¸ë¥¼ í™•ì¸í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì„¸ìš”:
  ```bash
  TF_LOG=DEBUG terraform apply -var-file=env/<í™˜ê²½>.tfvars
  ```

##### 3. Terraform ìƒíƒœ ì ê¸ˆ ë¬¸ì œ

**ë¬¸ì œ**: ë‹¤ë¥¸ Terraform ì‘ì—…ì´ ì‹¤í–‰ ì¤‘ì´ë¼ëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- ë‹¤ë¥¸ Terraform ì‘ì—…ì´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ì„¸ìš”.
- ì´ì „ ì‘ì—…ì´ ë¹„ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œëœ ê²½ìš° DynamoDBì—ì„œ ì ê¸ˆì„ ìˆ˜ë™ìœ¼ë¡œ í•´ì œí•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
  ```bash
  aws dynamodb delete-item \
    --table-name terraform-state-lock \
    --key '{"LockID": {"S": "your-lock-id"}}'
  ```
- ë¡œì»¬ ìƒíƒœ íŒŒì¼ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° `.terraform.tfstate.lock.info` íŒŒì¼ì„ ì‚­ì œí•˜ì„¸ìš”.

#### AWS ê´€ë ¨ ë¬¸ì œ

##### 1. AWS ìê²© ì¦ëª… ë¬¸ì œ

**ë¬¸ì œ**: AWS ìê²© ì¦ëª…ì´ ì—†ê±°ë‚˜ ë§Œë£Œë˜ì—ˆë‹¤ëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- AWS CLIê°€ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws configure list
  ```
- ìê²© ì¦ëª…ì´ ë§Œë£Œëœ ê²½ìš° ê°±ì‹ í•˜ì„¸ìš”:
  ```bash
  aws configure
  ```
- IAM Identity Center(SSO)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ì„¸ìš”:
  ```bash
  aws sso login --profile your-profile
  ```
- í™˜ê²½ ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  echo $AWS_ACCESS_KEY_ID
  echo $AWS_SECRET_ACCESS_KEY
  echo $AWS_REGION
  ```
- Makefileì—ì„œ ì‚¬ìš©í•˜ëŠ” í”„ë¡œí•„ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•˜ì„¸ìš”. í•„ìš”í•œ ê²½ìš° Makefileì˜ `PROFILE_NAME` ë³€ìˆ˜ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”.

##### 2. ì„œë¹„ìŠ¤ í• ë‹¹ëŸ‰ ì´ˆê³¼

**ë¬¸ì œ**: AWS ì„œë¹„ìŠ¤ í• ë‹¹ëŸ‰ì„ ì´ˆê³¼í–ˆë‹¤ëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- AWS ì½˜ì†”ì—ì„œ Service Quotas ì„œë¹„ìŠ¤ë¥¼ í™•ì¸í•˜ì—¬ í˜„ì¬ ì‚¬ìš©ëŸ‰ê³¼ í•œë„ë¥¼ í™•ì¸í•˜ì„¸ìš”.
- í•„ìš”í•œ ê²½ìš° í• ë‹¹ëŸ‰ ì¦ê°€ë¥¼ ìš”ì²­í•˜ì„¸ìš”.
- ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•˜ê±°ë‚˜ ë¶ˆí•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•˜ì—¬ ì‚¬ìš©ëŸ‰ì„ ì¤„ì´ì„¸ìš”.

#### EKS ê´€ë ¨ ë¬¸ì œ

##### 1. EKS í´ëŸ¬ìŠ¤í„° ìƒì„± ì‹¤íŒ¨

**ë¬¸ì œ**: EKS í´ëŸ¬ìŠ¤í„° ìƒì„±ì´ ì‹¤íŒ¨í•˜ê³  ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- IAM ê¶Œí•œì´ ì¶©ë¶„í•œì§€ í™•ì¸í•˜ì„¸ìš”.
- VPC ë° ì„œë¸Œë„· êµ¬ì„±ì´ EKS ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
- ì„œë¸Œë„·ì— ì˜¬ë°”ë¥¸ íƒœê·¸ê°€ ì§€ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws ec2 describe-subnets --subnet-ids subnet-id --query "Subnets[].Tags"
  ```
- CloudTrail ë¡œê·¸ë¥¼ í™•ì¸í•˜ì—¬ ìì„¸í•œ ì˜¤ë¥˜ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.
- ê²°ê³¼ ë¡œê·¸ íŒŒì¼ì„ í™•ì¸í•˜ì„¸ìš” (`results/apply-<í™˜ê²½>-output-<íƒ€ì„ìŠ¤íƒ¬í”„>.log`).

##### 2. kubectl ì—°ê²° ë¬¸ì œ

**ë¬¸ì œ**: kubectlì„ ì‚¬ìš©í•˜ì—¬ EKS í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- kubeconfigê°€ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws eks update-kubeconfig --name your-cluster-name --region your-region
  ```
- AWS CLI ë²„ì „ì´ ìµœì‹ ì¸ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws --version
  ```
- IAM ìê²© ì¦ëª…ì´ í´ëŸ¬ìŠ¤í„°ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws sts get-caller-identity
  ```

### ë””ë²„ê¹… íŒê³¼ ë¡œê·¸ í™•ì¸ ë°©ë²•

#### Terraform ë””ë²„ê¹…

##### 1. ìì„¸í•œ ë¡œê·¸ í™œì„±í™”

Terraform ì‘ì—…ì˜ ìì„¸í•œ ë¡œê·¸ë¥¼ í™•ì¸í•˜ë ¤ë©´ `TF_LOG` í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì„¸ìš”:

```bash
# ê°€ì¥ ìì„¸í•œ ë¡œê·¸ ìˆ˜ì¤€
TF_LOG=TRACE terraform apply -var-file=env/<í™˜ê²½>.tfvars

# ë””ë²„ê·¸ ìˆ˜ì¤€ ë¡œê·¸
TF_LOG=DEBUG terraform apply -var-file=env/<í™˜ê²½>.tfvars

# ë¡œê·¸ë¥¼ íŒŒì¼ì— ì €ì¥
TF_LOG=DEBUG TF_LOG_PATH=./terraform.log terraform apply -var-file=env/<í™˜ê²½>.tfvars
```

##### 2. Terraform ìƒíƒœ ê²€ì‚¬

í˜„ì¬ Terraform ìƒíƒœë¥¼ ê²€ì‚¬í•˜ì—¬ ë¬¸ì œë¥¼ ì§„ë‹¨í•˜ì„¸ìš”:

```bash
# ìƒíƒœì— ìˆëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ ë‚˜ì—´
terraform state list

# íŠ¹ì • ë¦¬ì†ŒìŠ¤ì˜ ìƒíƒœ í™•ì¸
terraform state show 'aws_eks_cluster.this'

# ìƒíƒœ íŒŒì¼ ê²€ì‚¬
terraform show
```

#### AWS ë””ë²„ê¹…

##### 1. AWS CLIë¥¼ ì‚¬ìš©í•œ ë¦¬ì†ŒìŠ¤ ê²€ì‚¬

AWS CLIë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ì†ŒìŠ¤ ìƒíƒœë¥¼ í™•ì¸í•˜ì„¸ìš”:

```bash
# EKS í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸
aws eks describe-cluster --name cluster-name

# EC2 ì¸ìŠ¤í„´ìŠ¤ í™•ì¸
aws ec2 describe-instances --filters "Name=tag:Name,Values=eks-node*"

# VPC ë° ì„œë¸Œë„· í™•ì¸
aws ec2 describe-vpcs
aws ec2 describe-subnets --filters "Name=vpc-id,Values=vpc-id"
```

#### Kubernetes ë””ë²„ê¹…

##### 1. í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸

í´ëŸ¬ìŠ¤í„° ìƒíƒœë¥¼ í™•ì¸í•˜ì—¬ ë¬¸ì œë¥¼ ì§„ë‹¨í•˜ì„¸ìš”:

```bash
# ë…¸ë“œ ìƒíƒœ í™•ì¸
kubectl get nodes
kubectl describe nodes

# ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í™•ì¸
kubectl get namespaces

# ëª¨ë“  ë¦¬ì†ŒìŠ¤ í™•ì¸
kubectl get all --all-namespaces
```

##### 2. íŒŒë“œ ë¡œê·¸ ë° ì´ë²¤íŠ¸ í™•ì¸

íŒŒë“œ ë¡œê·¸ ë° ì´ë²¤íŠ¸ë¥¼ í™•ì¸í•˜ì—¬ ë¬¸ì œë¥¼ ì§„ë‹¨í•˜ì„¸ìš”:

```bash
# íŒŒë“œ ë¡œê·¸ í™•ì¸
kubectl logs pod-name -n namespace

# ì´ì „ ì»¨í…Œì´ë„ˆì˜ ë¡œê·¸ í™•ì¸
kubectl logs pod-name -n namespace --previous

# íŒŒë“œ ì´ë²¤íŠ¸ í™•ì¸
kubectl describe pod pod-name -n namespace

# ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°
kubectl logs -f pod-name -n namespace
```

### ìì£¼ ë¬»ëŠ” ì§ˆë¬¸(FAQ)

#### ì¼ë°˜ì ì¸ ì§ˆë¬¸

##### Q: ì´ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ìµœì†Œ AWS ê¶Œí•œì€ ë¬´ì—‡ì¸ê°€ìš”?
A: ìµœì†Œí•œ EKS, EC2, IAM, VPC, S3, CloudWatch ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [ì‚¬ì „ ìš”êµ¬ì‚¬í•­](#ì‚¬ì „-ìš”êµ¬ì‚¬í•­) ì„¹ì…˜ì˜ IAM ê¶Œí•œ ì„¤ì •ì„ ì°¸ì¡°í•˜ì„¸ìš”.

##### Q: í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì´ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ê¶Œì¥ ì‚¬í•­ì€ ë¬´ì—‡ì¸ê°€ìš”?
A: í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ë‹¤ìŒì„ ê¶Œì¥í•©ë‹ˆë‹¤:
- ì›ê²© Terraform ë°±ì—”ë“œ(S3 + DynamoDB) ì‚¬ìš©
- ìµœì†Œ 3ê°œì˜ ê°€ìš© ì˜ì—­ì— ê±¸ì³ ê³ ê°€ìš©ì„± êµ¬ì„±
- ì ì ˆí•œ ë…¸ë“œ í¬ê¸° ë° ìë™ í™•ì¥ ì„¤ì •
- ë³´ì•ˆ ê°•í™”(KMS ì•”í˜¸í™”, í”„ë¼ì´ë¹— ì—”ë“œí¬ì¸íŠ¸, ë„¤íŠ¸ì›Œí¬ ì •ì±… ë“±)
- ì •ê¸°ì ì¸ ë°±ì—… ë° ì¬í•´ ë³µêµ¬ ê³„íš

#### EKS ê´€ë ¨ ì§ˆë¬¸

##### Q: EKS í´ëŸ¬ìŠ¤í„° ë²„ì „ì„ ì–´ë–»ê²Œ ì—…ê·¸ë ˆì´ë“œí•´ì•¼ í•˜ë‚˜ìš”?
A: EKS í´ëŸ¬ìŠ¤í„° ë²„ì „ì„ ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¥´ì„¸ìš”:
1. Terraform ë³€ìˆ˜ íŒŒì¼ì—ì„œ `cluster_version` ê°’ì„ ì—…ë°ì´íŠ¸
2. `terraform plan`ì„ ì‹¤í–‰í•˜ì—¬ ë³€ê²½ ì‚¬í•­ í™•ì¸
3. `terraform apply`ë¥¼ ì‹¤í–‰í•˜ì—¬ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì—…ê·¸ë ˆì´ë“œ
4. ë…¸ë“œ ê·¸ë£¹ì„ ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ ìƒˆ ë…¸ë“œ ê·¸ë£¹ì„ ìƒì„±í•˜ê³  ì›Œí¬ë¡œë“œë¥¼ ë§ˆì´ê·¸ë ˆì´ì…˜í•œ í›„ ì´ì „ ë…¸ë“œ ê·¸ë£¹ ì‚­ì œ

##### Q: Kubernetes ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•  ìˆ˜ ì—†ê³  "Terminating" ìƒíƒœë¡œ ë©ˆì¶° ìˆìœ¼ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?
A: ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ ê°•ì œë¡œ ì‚­ì œí•˜ì„¸ìš”:
```bash
kubectl delete pod pod-name -n namespace --grace-period=0 --force
```
ë˜ëŠ” íŒŒì´ë„ë¼ì´ì €ë¥¼ ì œê±°í•˜ì„¸ìš”:
```bash
kubectl patch pod pod-name -n namespace -p '{"metadata":{"finalizers":[]}}' --type=merge
```

### ì¼ë°˜ì ì¸ ë¬¸ì œì™€ í•´ê²° ë°©ë²•

#### Terraform ê´€ë ¨ ë¬¸ì œ

##### 1. Terraform ì´ˆê¸°í™” ì‹¤íŒ¨

**ë¬¸ì œ**: `terraform init` ëª…ë ¹ì´ ì‹¤íŒ¨í•˜ê³  í”„ë¡œë°”ì´ë” ë˜ëŠ” ëª¨ë“ˆì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ì„¸ìš”.
- í”„ë¡ì‹œ ì„¤ì •ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•˜ì„¸ìš”.
- Terraform ë²„ì „ì´ ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
- ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ Terraform ìºì‹œë¥¼ ì •ë¦¬í•´ ë³´ì„¸ìš”:
  ```bash
  rm -rf .terraform
  terraform init
  ```

##### 2. Terraform ê³„íš/ì ìš© ì‹¤íŒ¨

**ë¬¸ì œ**: `terraform plan` ë˜ëŠ” `terraform apply` ëª…ë ¹ì´ ì˜¤ë¥˜ì™€ í•¨ê»˜ ì‹¤íŒ¨í•©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì£¼ì˜ ê¹Šê²Œ ì½ê³  ë¬¸ì œë¥¼ íŒŒì•…í•˜ì„¸ìš”.
- AWS ìê²© ì¦ëª…ì´ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
- í•„ìš”í•œ IAM ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
- ë³€ìˆ˜ íŒŒì¼(`terraform.tfvars`)ì´ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
- ìì„¸í•œ ë¡œê·¸ë¥¼ í™•ì¸í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì„¸ìš”:
  ```bash
  TF_LOG=DEBUG terraform apply
  ```

##### 3. Terraform ìƒíƒœ ì ê¸ˆ ë¬¸ì œ

**ë¬¸ì œ**: ë‹¤ë¥¸ Terraform ì‘ì—…ì´ ì‹¤í–‰ ì¤‘ì´ë¼ëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- ë‹¤ë¥¸ Terraform ì‘ì—…ì´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ì„¸ìš”.
- ì´ì „ ì‘ì—…ì´ ë¹„ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œëœ ê²½ìš° DynamoDBì—ì„œ ì ê¸ˆì„ ìˆ˜ë™ìœ¼ë¡œ í•´ì œí•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
  ```bash
  aws dynamodb delete-item \
    --table-name terraform-state-lock \
    --key '{"LockID": {"S": "your-lock-id"}}'
  ```
- ë¡œì»¬ ìƒíƒœ íŒŒì¼ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° `.terraform.tfstate.lock.info` íŒŒì¼ì„ ì‚­ì œí•˜ì„¸ìš”.

#### AWS ê´€ë ¨ ë¬¸ì œ

##### 1. AWS ìê²© ì¦ëª… ë¬¸ì œ

**ë¬¸ì œ**: AWS ìê²© ì¦ëª…ì´ ì—†ê±°ë‚˜ ë§Œë£Œë˜ì—ˆë‹¤ëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- AWS CLIê°€ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws configure list
  ```
- ìê²© ì¦ëª…ì´ ë§Œë£Œëœ ê²½ìš° ê°±ì‹ í•˜ì„¸ìš”:
  ```bash
  aws configure
  ```
- IAM Identity Center(SSO)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ì„¸ìš”:
  ```bash
  aws sso login --profile your-profile
  ```

##### 2. ì„œë¹„ìŠ¤ í• ë‹¹ëŸ‰ ì´ˆê³¼

**ë¬¸ì œ**: AWS ì„œë¹„ìŠ¤ í• ë‹¹ëŸ‰ì„ ì´ˆê³¼í–ˆë‹¤ëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- AWS ì½˜ì†”ì—ì„œ Service Quotas ì„œë¹„ìŠ¤ë¥¼ í™•ì¸í•˜ì—¬ í˜„ì¬ ì‚¬ìš©ëŸ‰ê³¼ í•œë„ë¥¼ í™•ì¸í•˜ì„¸ìš”.
- í•„ìš”í•œ ê²½ìš° í• ë‹¹ëŸ‰ ì¦ê°€ë¥¼ ìš”ì²­í•˜ì„¸ìš”.
- ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•˜ê±°ë‚˜ ë¶ˆí•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•˜ì—¬ ì‚¬ìš©ëŸ‰ì„ ì¤„ì´ì„¸ìš”.

#### EKS ê´€ë ¨ ë¬¸ì œ

##### 1. EKS í´ëŸ¬ìŠ¤í„° ìƒì„± ì‹¤íŒ¨

**ë¬¸ì œ**: EKS í´ëŸ¬ìŠ¤í„° ìƒì„±ì´ ì‹¤íŒ¨í•˜ê³  ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- IAM ê¶Œí•œì´ ì¶©ë¶„í•œì§€ í™•ì¸í•˜ì„¸ìš”.
- VPC ë° ì„œë¸Œë„· êµ¬ì„±ì´ EKS ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
- ì„œë¸Œë„·ì— ì˜¬ë°”ë¥¸ íƒœê·¸ê°€ ì§€ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws ec2 describe-subnets --subnet-ids subnet-id --query "Subnets[].Tags"
  ```
- CloudTrail ë¡œê·¸ë¥¼ í™•ì¸í•˜ì—¬ ìì„¸í•œ ì˜¤ë¥˜ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.

##### 2. kubectl ì—°ê²° ë¬¸ì œ

**ë¬¸ì œ**: kubectlì„ ì‚¬ìš©í•˜ì—¬ EKS í´ëŸ¬ìŠ¤í„°ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**:
- kubeconfigê°€ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws eks update-kubeconfig --name your-cluster-name --region your-region
  ```
- AWS CLI ë²„ì „ì´ ìµœì‹ ì¸ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws --version
  ```
- IAM ìê²© ì¦ëª…ì´ í´ëŸ¬ìŠ¤í„°ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
  ```bash
  aws sts get-caller-identity
  ```

### ë””ë²„ê¹… íŒê³¼ ë¡œê·¸ í™•ì¸ ë°©ë²•

#### Terraform ë””ë²„ê¹…

ìì„¸í•œ ë¡œê·¸ë¥¼ í™œì„±í™”í•˜ë ¤ë©´ `TF_LOG` í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì„¸ìš”:

```bash
# ê°€ì¥ ìì„¸í•œ ë¡œê·¸ ìˆ˜ì¤€
TF_LOG=TRACE terraform apply

# ë””ë²„ê·¸ ìˆ˜ì¤€ ë¡œê·¸
TF_LOG=DEBUG terraform apply

# ë¡œê·¸ë¥¼ íŒŒì¼ì— ì €ì¥
TF_LOG=DEBUG TF_LOG_PATH=./terraform.log terraform apply
```

í˜„ì¬ Terraform ìƒíƒœë¥¼ ê²€ì‚¬í•˜ì—¬ ë¬¸ì œë¥¼ ì§„ë‹¨í•˜ì„¸ìš”:

```bash
# ìƒíƒœì— ìˆëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ ë‚˜ì—´
terraform state list

# íŠ¹ì • ë¦¬ì†ŒìŠ¤ì˜ ìƒíƒœ í™•ì¸
terraform state show 'aws_eks_cluster.this'
```

#### Kubernetes ë””ë²„ê¹…

í´ëŸ¬ìŠ¤í„° ìƒíƒœë¥¼ í™•ì¸í•˜ì—¬ ë¬¸ì œë¥¼ ì§„ë‹¨í•˜ì„¸ìš”:

```bash
# ë…¸ë“œ ìƒíƒœ í™•ì¸
kubectl get nodes
kubectl describe nodes

# ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í™•ì¸
kubectl get namespaces

# ëª¨ë“  ë¦¬ì†ŒìŠ¤ í™•ì¸
kubectl get all --all-namespaces
```

íŒŒë“œ ë¡œê·¸ ë° ì´ë²¤íŠ¸ë¥¼ í™•ì¸í•˜ì—¬ ë¬¸ì œë¥¼ ì§„ë‹¨í•˜ì„¸ìš”:

```bash
# íŒŒë“œ ë¡œê·¸ í™•ì¸
kubectl logs pod-name -n namespace

# ì´ì „ ì»¨í…Œì´ë„ˆì˜ ë¡œê·¸ í™•ì¸
kubectl logs pod-name -n namespace --previous

# íŒŒë“œ ì´ë²¤íŠ¸ í™•ì¸
kubectl describe pod pod-name -n namespace
```

### ìì£¼ ë¬»ëŠ” ì§ˆë¬¸(FAQ)

#### Q: ì´ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ìµœì†Œ AWS ê¶Œí•œì€ ë¬´ì—‡ì¸ê°€ìš”?
A: ìµœì†Œí•œ EKS, EC2, IAM, VPC, S3, CloudWatch ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [ì‚¬ì „ ìš”êµ¬ì‚¬í•­](#ì‚¬ì „-ìš”êµ¬ì‚¬í•­) ì„¹ì…˜ì˜ IAM ê¶Œí•œ ì„¤ì •ì„ ì°¸ì¡°í•˜ì„¸ìš”.

#### Q: í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì´ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ê¶Œì¥ ì‚¬í•­ì€ ë¬´ì—‡ì¸ê°€ìš”?
A: í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ë‹¤ìŒì„ ê¶Œì¥í•©ë‹ˆë‹¤:
- ì›ê²© Terraform ë°±ì—”ë“œ(S3 + DynamoDB) ì‚¬ìš©
- ìµœì†Œ 3ê°œì˜ ê°€ìš© ì˜ì—­ì— ê±¸ì³ ê³ ê°€ìš©ì„± êµ¬ì„±
- ì ì ˆí•œ ë…¸ë“œ í¬ê¸° ë° ìë™ í™•ì¥ ì„¤ì •
- ë³´ì•ˆ ê°•í™”(KMS ì•”í˜¸í™”, í”„ë¼ì´ë¹— ì—”ë“œí¬ì¸íŠ¸, ë„¤íŠ¸ì›Œí¬ ì •ì±… ë“±)
- ì •ê¸°ì ì¸ ë°±ì—… ë° ì¬í•´ ë³µêµ¬ ê³„íš

#### Q: EKS í´ëŸ¬ìŠ¤í„° ë²„ì „ì„ ì–´ë–»ê²Œ ì—…ê·¸ë ˆì´ë“œí•´ì•¼ í•˜ë‚˜ìš”?
A: EKS í´ëŸ¬ìŠ¤í„° ë²„ì „ì„ ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¥´ì„¸ìš”:
1. Terraform ë³€ìˆ˜ íŒŒì¼ì—ì„œ `cluster_version` ê°’ì„ ì—…ë°ì´íŠ¸
2. `terraform plan`ì„ ì‹¤í–‰í•˜ì—¬ ë³€ê²½ ì‚¬í•­ í™•ì¸
3. `terraform apply`ë¥¼ ì‹¤í–‰í•˜ì—¬ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì—…ê·¸ë ˆì´ë“œ
4. ë…¸ë“œ ê·¸ë£¹ì„ ì—…ê·¸ë ˆì´ë“œí•˜ë ¤ë©´ ìƒˆ ë…¸ë“œ ê·¸ë£¹ì„ ìƒì„±í•˜ê³  ì›Œí¬ë¡œë“œë¥¼ ë§ˆì´ê·¸ë ˆì´ì…˜í•œ í›„ ì´ì „ ë…¸ë“œ ê·¸ë£¹ ì‚­ì œ

#### Q: íŒŒë“œê°€ ImagePullBackOff ì˜¤ë¥˜ë¥¼ í‘œì‹œí•˜ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?
A: ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:
1. ì´ë¯¸ì§€ ì´ë¦„ê³¼ íƒœê·¸ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
2. í”„ë¼ì´ë¹— ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì´ë¯¸ì§€ í’€ ì‹œí¬ë¦¿ì´ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
3. ë…¸ë“œê°€ ì¸í„°ë„·ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸
4. ECRì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë…¸ë“œ IAM ì—­í• ì— ECR ì•¡ì„¸ìŠ¤ ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸

> **ì°¸ê³ **: ë” ìì„¸í•œ ë¬¸ì œ í•´ê²° ì •ë³´ì™€ ì¶”ê°€ FAQëŠ” [troubleshooting_guide.md](troubleshooting_guide.md) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸ¤ ê¸°ì—¬ ë°©ë²•

ì´ í”„ë¡œì íŠ¸ì— ê¸°ì—¬í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ë‹¤ìŒ ê°€ì´ë“œë¼ì¸ì„ ë”°ë¼ íš¨ê³¼ì ìœ¼ë¡œ ê¸°ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ê¸°ì—¬ í”„ë¡œì„¸ìŠ¤ ê°œìš”

1. **ì´ìŠˆ í™•ì¸**: ê¸°ì¡´ ì´ìŠˆë¥¼ í™•ì¸í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ì´ìŠˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤
2. **í¬í¬ ë° ë¸Œëœì¹˜**: ë¦¬í¬ì§€í† ë¦¬ë¥¼ í¬í¬í•˜ê³  ê¸°ëŠ¥ ë¸Œëœì¹˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
3. **ê°œë°œ**: ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤
4. **Pull Request**: ë³€ê²½ ì‚¬í•­ì„ ì œì¶œí•©ë‹ˆë‹¤
5. **ë¦¬ë·°**: ì½”ë“œ ë¦¬ë·°ë¥¼ ë°›ê³  í”¼ë“œë°±ì„ ë°˜ì˜í•©ë‹ˆë‹¤
6. **ë³‘í•©**: ìŠ¹ì¸ í›„ ë©”ì¸ ë¸Œëœì¹˜ì— ë³‘í•©ë©ë‹ˆë‹¤

### Pull Request ì›Œí¬í”Œë¡œìš°

#### 1. ë¦¬í¬ì§€í† ë¦¬ í¬í¬ ë° í´ë¡ 

```bash
# GitHubì—ì„œ ë¦¬í¬ì§€í† ë¦¬ë¥¼ í¬í¬í•œ í›„
git clone https://github.com/your-username/aws-eks-terraform.git
cd aws-eks-terraform

# ì›ë³¸ ë¦¬í¬ì§€í† ë¦¬ë¥¼ upstreamìœ¼ë¡œ ì¶”ê°€
git remote add upstream https://github.com/original-owner/aws-eks-terraform.git
```

#### 2. ê¸°ëŠ¥ ë¸Œëœì¹˜ ìƒì„±

```bash
# ìµœì‹  main ë¸Œëœì¹˜ë¡œ ì—…ë°ì´íŠ¸
git checkout main
git pull upstream main

# ê¸°ëŠ¥ ë¸Œëœì¹˜ ìƒì„± (ë¸Œëœì¹˜ ëª…ëª… ê·œì¹™ ì°¸ì¡°)
git checkout -b feature/add-new-module
# ë˜ëŠ”
git checkout -b fix/security-group-issue
# ë˜ëŠ”
git checkout -b docs/update-readme
```

#### 3. ë³€ê²½ ì‚¬í•­ ì»¤ë°‹

```bash
# ë³€ê²½ëœ íŒŒì¼ ìŠ¤í…Œì´ì§•
git add .

# ì˜ë¯¸ ìˆëŠ” ì»¤ë°‹ ë©”ì‹œì§€ ì‘ì„± (ì»¤ë°‹ ë©”ì‹œì§€ ê·œì¹™ ì°¸ì¡°)
git commit -m "feat: add support for EFS CSI driver"

# ë˜ëŠ” ë” ìì„¸í•œ ì»¤ë°‹ ë©”ì‹œì§€
git commit -m "feat: add support for EFS CSI driver

- Add EFS CSI driver module
- Update documentation for EFS configuration
- Add example terraform.tfvars for EFS

Closes #123"
```

#### 4. Pull Request ìƒì„±

```bash
# ë³€ê²½ ì‚¬í•­ì„ í¬í¬ëœ ë¦¬í¬ì§€í† ë¦¬ì— í‘¸ì‹œ
git push origin feature/add-new-module
```

GitHubì—ì„œ Pull Requestë¥¼ ìƒì„±í•  ë•Œ:

- **ì œëª©**: ëª…í™•í•˜ê³  ê°„ê²°í•œ ì œëª© ì‘ì„±
- **ì„¤ëª…**: ë³€ê²½ ì‚¬í•­ì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª… í¬í•¨
- **ì²´í¬ë¦¬ìŠ¤íŠ¸**: PR í…œí”Œë¦¿ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì™„ë£Œ
- **ë¼ë²¨**: ì ì ˆí•œ ë¼ë²¨ ì¶”ê°€ (feature, bugfix, documentation ë“±)
- **ë¦¬ë·°ì–´**: ê´€ë ¨ íŒ€ ë©¤ë²„ë¥¼ ë¦¬ë·°ì–´ë¡œ ì§€ì •

#### 5. ì½”ë“œ ë¦¬ë·° ë° í”¼ë“œë°± ë°˜ì˜

```bash
# í”¼ë“œë°± ë°˜ì˜ í›„ ì¶”ê°€ ì»¤ë°‹
git add .
git commit -m "fix: address code review feedback"
git push origin feature/add-new-module
```

### ë¸Œëœì¹˜ ëª…ëª… ê·œì¹™

ë¸Œëœì¹˜ ì´ë¦„ì€ ë‹¤ìŒ íŒ¨í„´ì„ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤:

- `feature/description`: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
- `fix/description`: ë²„ê·¸ ìˆ˜ì •
- `docs/description`: ë¬¸ì„œ ì—…ë°ì´íŠ¸
- `refactor/description`: ì½”ë“œ ë¦¬íŒ©í† ë§
- `test/description`: í…ŒìŠ¤íŠ¸ ì¶”ê°€ ë˜ëŠ” ìˆ˜ì •
- `chore/description`: ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ ë˜ëŠ” ë„êµ¬ ë³€ê²½

**ì˜ˆì‹œ:**
- `feature/add-karpenter-support`
- `fix/security-group-rules`
- `docs/update-installation-guide`
- `refactor/eks-module-structure`

### ì»¤ë°‹ ë©”ì‹œì§€ ê·œì¹™

[Conventional Commits](https://www.conventionalcommits.org/) í˜•ì‹ì„ ë”°ë¦…ë‹ˆë‹¤:

```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

**íƒ€ì…:**
- `feat`: ìƒˆë¡œìš´ ê¸°ëŠ¥
- `fix`: ë²„ê·¸ ìˆ˜ì •
- `docs`: ë¬¸ì„œ ë³€ê²½
- `style`: ì½”ë“œ ìŠ¤íƒ€ì¼ ë³€ê²½ (í¬ë§·íŒ…, ì„¸ë¯¸ì½œë¡  ëˆ„ë½ ë“±)
- `refactor`: ì½”ë“œ ë¦¬íŒ©í† ë§
- `test`: í…ŒìŠ¤íŠ¸ ì¶”ê°€ ë˜ëŠ” ìˆ˜ì •
- `chore`: ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ ë˜ëŠ” ë„êµ¬ ë³€ê²½

**ì˜ˆì‹œ:**
```
feat(eks): add support for Fargate profiles

fix(network): resolve NAT gateway configuration issue

docs(readme): update installation instructions

refactor(modules): restructure kubernetes_addons module
```

### ì´ìŠˆ ë³´ê³  ë°©ë²•

#### ë²„ê·¸ ë¦¬í¬íŠ¸

ë²„ê·¸ë¥¼ ë°œê²¬í–ˆë‹¤ë©´ ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•˜ì—¬ ì´ìŠˆë¥¼ ìƒì„±í•´ ì£¼ì„¸ìš”:

**ì´ìŠˆ ì œëª©:** `[BUG] ê°„ë‹¨í•œ ë²„ê·¸ ì„¤ëª…`

**ì´ìŠˆ ë‚´ìš©:**
```markdown
## ë²„ê·¸ ì„¤ëª…
ë²„ê·¸ì— ëŒ€í•œ ëª…í™•í•˜ê³  ê°„ê²°í•œ ì„¤ëª…

## ì¬í˜„ ë‹¨ê³„
1. '...'ë¡œ ì´ë™
2. '...'ë¥¼ í´ë¦­
3. '...'ê¹Œì§€ ìŠ¤í¬ë¡¤
4. ì˜¤ë¥˜ í™•ì¸

## ì˜ˆìƒ ë™ì‘
ì˜ˆìƒí–ˆë˜ ë™ì‘ì— ëŒ€í•œ ëª…í™•í•˜ê³  ê°„ê²°í•œ ì„¤ëª…

## ì‹¤ì œ ë™ì‘
ì‹¤ì œë¡œ ë°œìƒí•œ ë™ì‘ì— ëŒ€í•œ ì„¤ëª…

## ìŠ¤í¬ë¦°ìƒ·
í•´ë‹¹í•˜ëŠ” ê²½ìš° ìŠ¤í¬ë¦°ìƒ· ì¶”ê°€

## í™˜ê²½ ì •ë³´
- OS: [ì˜ˆ: Ubuntu 20.04]
- Terraform ë²„ì „: [ì˜ˆ: 1.5.0]
- AWS CLI ë²„ì „: [ì˜ˆ: 2.11.0]
- kubectl ë²„ì „: [ì˜ˆ: 1.27.0]

## ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸
ë¬¸ì œì— ëŒ€í•œ ê¸°íƒ€ ì»¨í…ìŠ¤íŠ¸ ì¶”ê°€

## ë¡œê·¸
ê´€ë ¨ ë¡œê·¸ë‚˜ ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ìˆë‹¤ë©´ í¬í•¨
```

#### ê¸°ëŠ¥ ìš”ì²­

ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì œì•ˆí•˜ë ¤ë©´:

**ì´ìŠˆ ì œëª©:** `[FEATURE] ê¸°ëŠ¥ ìš”ì²­ ì œëª©`

**ì´ìŠˆ ë‚´ìš©:**
```markdown
## ê¸°ëŠ¥ ì„¤ëª…
ì›í•˜ëŠ” ê¸°ëŠ¥ì— ëŒ€í•œ ëª…í™•í•˜ê³  ê°„ê²°í•œ ì„¤ëª…

## ë™ê¸°
ì´ ê¸°ëŠ¥ì´ í•„ìš”í•œ ì´ìœ ì™€ í•´ê²°í•˜ë ¤ëŠ” ë¬¸ì œ

## ì œì•ˆëœ í•´ê²°ì±…
ì›í•˜ëŠ” ë™ì‘ì— ëŒ€í•œ ëª…í™•í•˜ê³  ê°„ê²°í•œ ì„¤ëª…

## ëŒ€ì•ˆ ê³ ë ¤ì‚¬í•­
ê³ ë ¤í•œ ëŒ€ì•ˆ ì†”ë£¨ì…˜ì´ë‚˜ ê¸°ëŠ¥ì— ëŒ€í•œ ì„¤ëª…

## ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸
ê¸°ëŠ¥ ìš”ì²­ì— ëŒ€í•œ ê¸°íƒ€ ì»¨í…ìŠ¤íŠ¸ë‚˜ ìŠ¤í¬ë¦°ìƒ· ì¶”ê°€
```

#### ì§ˆë¬¸ ë˜ëŠ” ë„ì›€ ìš”ì²­

**ì´ìŠˆ ì œëª©:** `[QUESTION] ì§ˆë¬¸ ë‚´ìš©`

**ì´ìŠˆ ë‚´ìš©:**
```markdown
## ì§ˆë¬¸
ëª…í™•í•˜ê³  êµ¬ì²´ì ì¸ ì§ˆë¬¸

## ì»¨í…ìŠ¤íŠ¸
ì§ˆë¬¸ê³¼ ê´€ë ¨ëœ ë°°ê²½ ì •ë³´

## ì‹œë„í•œ ê²ƒ
ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‹œë„í•œ ë°©ë²•ë“¤

## í™˜ê²½ ì •ë³´
- OS: [ì˜ˆ: Ubuntu 20.04]
- Terraform ë²„ì „: [ì˜ˆ: 1.5.0]
- ê´€ë ¨ ëª¨ë“ˆ: [ì˜ˆ: eks-cluster, network]
```

### ê°œë°œ í™˜ê²½ ì„¤ì • ê°€ì´ë“œ

#### 1. ê°œë°œ ë„êµ¬ ì„¤ì¹˜

í”„ë¡œì íŠ¸ ê°œë°œì„ ìœ„í•´ ë‹¤ìŒ ë„êµ¬ë“¤ì´ í•„ìš”í•©ë‹ˆë‹¤:

```bash
# Terraform ì„¤ì¹˜ (1.5.0 ì´ìƒ)
curl -fsSL https://apt.releases.hashicorp.com/gpg | sudo apt-key add -
sudo apt-add-repository "deb [arch=amd64] https://apt.releases.hashicorp.com $(lsb_release -cs) main"
sudo apt-get update && sudo apt-get install terraform

# AWS CLI ì„¤ì¹˜ (2.11.0 ì´ìƒ)
curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
unzip awscliv2.zip
sudo ./aws/install

# kubectl ì„¤ì¹˜ (1.27.0 ì´ìƒ)
curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl

# Helm ì„¤ì¹˜ (3.12.0 ì´ìƒ)
curl https://baltocdn.com/helm/signing.asc | gpg --dearmor | sudo tee /usr/share/keyrings/helm.gpg > /dev/null
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/helm.gpg] https://baltocdn.com/helm/stable/debian/ all main" | sudo tee /etc/apt/sources.list.d/helm-stable-debian.list
sudo apt-get update
sudo apt-get install helm

# ê¸°íƒ€ ìœ ìš©í•œ ë„êµ¬ë“¤
sudo apt-get install jq git make
```

#### 2. ê°œë°œ í™˜ê²½ êµ¬ì„±

```bash
# í”„ë¡œì íŠ¸ í´ë¡ 
git clone https://github.com/your-username/aws-eks-terraform.git
cd aws-eks-terraform

# AWS ìê²© ì¦ëª… êµ¬ì„±
aws configure

# ê°œë°œìš© í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
export TF_LOG=INFO  # Terraform ë¡œê·¸ ë ˆë²¨ ì„¤ì •
export AWS_REGION=ap-northeast-2  # ê¸°ë³¸ AWS ë¦¬ì „ ì„¤ì •
```

#### 3. ì½”ë“œ í’ˆì§ˆ ë„êµ¬ ì„¤ì •

##### Terraform í¬ë§·íŒ… ë° ê²€ì¦

```bash
# Terraform ì½”ë“œ í¬ë§·íŒ…
terraform fmt -recursive

# Terraform êµ¬ì„± ê²€ì¦
terraform validate

# Terraform ë³´ì•ˆ ìŠ¤ìº” (tfsec ì„¤ì¹˜ í•„ìš”)
tfsec .
```

##### Pre-commit í›… ì„¤ì •

```bash
# pre-commit ì„¤ì¹˜
pip install pre-commit

# pre-commit í›… ì„¤ì¹˜
pre-commit install

# ëª¨ë“  íŒŒì¼ì— ëŒ€í•´ pre-commit ì‹¤í–‰
pre-commit run --all-files
```

`.pre-commit-config.yaml` íŒŒì¼ ì˜ˆì‹œ:

```yaml
repos:
  - repo: https://github.com/antonbabenko/pre-commit-terraform
    rev: v1.81.0
    hooks:
      - id: terraform_fmt
      - id: terraform_validate
      - id: terraform_docs
      - id: terraform_tflint
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.4.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
      - id: check-yaml
      - id: check-added-large-files
```

#### 4. í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì„±

```bash
# í…ŒìŠ¤íŠ¸ìš© AWS ê³„ì • ì„¤ì • (ê°œë°œ/í…ŒìŠ¤íŠ¸ ì „ìš© ê³„ì • ê¶Œì¥)
export AWS_PROFILE=dev-test

# í…ŒìŠ¤íŠ¸ìš© ë¦¬ì†ŒìŠ¤ ë°°í¬
cd ENV/DEV

# ECR í…ŒìŠ¤íŠ¸
cd 00_ECR
make init
make plan
# ì‹¤ì œ ë°°í¬ëŠ” ì‹ ì¤‘í•˜ê²Œ ê²°ì •
# make apply
```

#### 5. ë¬¸ì„œ ì‘ì„± ë„êµ¬

```bash
# terraform-docs ì„¤ì¹˜ (ëª¨ë“ˆ ë¬¸ì„œ ìë™ ìƒì„±)
curl -sSLo ./terraform-docs.tar.gz https://terraform-docs.io/dl/v0.16.0/terraform-docs-v0.16.0-$(uname)-amd64.tar.gz
tar -xzf terraform-docs.tar.gz
chmod +x terraform-docs
sudo mv terraform-docs /usr/local/bin/terraform-docs

# ëª¨ë“ˆ ë¬¸ì„œ ìƒì„±
terraform-docs markdown table --output-file README.md modules/eks-cluster/
```

### ì½”ë“œ ìŠ¤íƒ€ì¼ ë° í‘œì¤€

ì´ í”„ë¡œì íŠ¸ëŠ” ì¼ê´€ëœ ì½”ë“œ í’ˆì§ˆê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì—„ê²©í•œ ì½”ë“œ ìŠ¤íƒ€ì¼ê³¼ í‘œì¤€ì„ ë”°ë¦…ë‹ˆë‹¤. ëª¨ë“  ê¸°ì—¬ìëŠ” ë‹¤ìŒ ê°€ì´ë“œë¼ì¸ì„ ì¤€ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤.

#### Terraform ì½”ë“œ ìŠ¤íƒ€ì¼ ê°€ì´ë“œë¼ì¸

##### 1. íŒŒì¼ êµ¬ì¡° ë° ëª…ëª… ê·œì¹™

**íŒŒì¼ ëª…ëª… ê·œì¹™:**
```
01_main_resource.tf      # ì£¼ìš” ë¦¬ì†ŒìŠ¤ (ë²ˆí˜¸ ìˆœì„œë¡œ ë°°ì¹˜)
02_secondary_resource.tf # ë³´ì¡° ë¦¬ì†ŒìŠ¤
data.tf                  # ë°ì´í„° ì†ŒìŠ¤
locals.tf                # ë¡œì»¬ ê°’
variables.tf             # ì…ë ¥ ë³€ìˆ˜
outputs.tf               # ì¶œë ¥ ê°’
versions.tf              # í”„ë¡œë°”ì´ë” ë° ë²„ì „ ì œì•½
```

**ë””ë ‰í† ë¦¬ êµ¬ì¡°:**
```
modules/
â”œâ”€â”€ module-name/
â”‚   â”œâ”€â”€ main.tf          # ì£¼ìš” ë¦¬ì†ŒìŠ¤ ì •ì˜
â”‚   â”œâ”€â”€ variables.tf     # ì…ë ¥ ë³€ìˆ˜
â”‚   â”œâ”€â”€ outputs.tf       # ì¶œë ¥ ê°’
â”‚   â”œâ”€â”€ versions.tf      # í”„ë¡œë°”ì´ë” ë²„ì „
â”‚   â”œâ”€â”€ README.md        # ëª¨ë“ˆ ë¬¸ì„œ
â”‚   â””â”€â”€ examples/        # ì‚¬ìš© ì˜ˆì œ
â”‚       â””â”€â”€ basic/
â”‚           â”œâ”€â”€ main.tf
â”‚           â””â”€â”€ variables.tf
```

##### 2. ì½”ë“œ í¬ë§·íŒ… ê·œì¹™

**ë“¤ì—¬ì“°ê¸° ë° ê³µë°±:**
```hcl
# ì˜¬ë°”ë¥¸ ì˜ˆì‹œ
resource "aws_instance" "example" {
  ami           = var.ami_id
  instance_type = var.instance_type
  
  tags = {
    Name        = var.instance_name
    Environment = var.environment
  }
}

# ì˜ëª»ëœ ì˜ˆì‹œ - ì¼ê´€ë˜ì§€ ì•Šì€ ë“¤ì—¬ì“°ê¸°
resource "aws_instance" "example" {
ami           = var.ami_id
    instance_type = var.instance_type
  tags = {
Name        = var.instance_name
    Environment = var.environment
  }
}
```

**ë¸”ë¡ êµ¬ì¡°:**
```hcl
# ì˜¬ë°”ë¥¸ ì˜ˆì‹œ - ë…¼ë¦¬ì  ê·¸ë£¹í™”
resource "aws_security_group" "eks_cluster" {
  name_prefix = "${var.cluster_name}-cluster-"
  vpc_id      = var.vpc_id
  description = "Security group for EKS cluster control plane"

  # ì¸ë°”ìš´ë“œ ê·œì¹™
  ingress {
    from_port   = 443
    to_port     = 443
    protocol    = "tcp"
    cidr_blocks = var.allowed_cidr_blocks
  }

  # ì•„ì›ƒë°”ìš´ë“œ ê·œì¹™
  egress {
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = ["0.0.0.0/0"]
  }

  tags = merge(var.tags, {
    Name = "${var.cluster_name}-cluster-sg"
    Type = "cluster"
  })
}
```

##### 3. ë³€ìˆ˜ ë° ì¶œë ¥ ì •ì˜ ê·œì¹™

**ë³€ìˆ˜ ì •ì˜:**
```hcl
# variables.tf
variable "cluster_name" {
  description = "Name of the EKS cluster"
  type        = string
  validation {
    condition     = can(regex("^[a-zA-Z][a-zA-Z0-9-]*$", var.cluster_name))
    error_message = "Cluster name must start with a letter and contain only alphanumeric characters and hyphens."
  }
}

variable "node_groups" {
  description = "Map of EKS managed node group definitions"
  type = map(object({
    instance_types = list(string)
    capacity_type  = string
    min_size      = number
    max_size      = number
    desired_size  = number
    disk_size     = number
    ami_type      = string
    labels        = map(string)
    taints = list(object({
      key    = string
      value  = string
      effect = string
    }))
  }))
  default = {}
}

variable "tags" {
  description = "A map of tags to add to all resources"
  type        = map(string)
  default     = {}
}
```

**ì¶œë ¥ ì •ì˜:**
```hcl
# outputs.tf
output "cluster_id" {
  description = "The ID of the EKS cluster"
  value       = aws_eks_cluster.this.id
}

output "cluster_endpoint" {
  description = "Endpoint for EKS control plane"
  value       = aws_eks_cluster.this.endpoint
}

output "cluster_security_group_id" {
  description = "Security group ID attached to the EKS cluster"
  value       = aws_eks_cluster.this.vpc_config[0].cluster_security_group_id
}

output "node_groups" {
  description = "Map of attribute maps for all EKS managed node groups created"
  value       = aws_eks_node_group.this
  sensitive   = true
}
```

#### ë„¤ì´ë° ì»¨ë²¤ì…˜ ë° ëª¨ë“ˆ êµ¬ì¡° í‘œì¤€

##### 1. ë¦¬ì†ŒìŠ¤ ëª…ëª… ê·œì¹™

**AWS ë¦¬ì†ŒìŠ¤ ëª…ëª…:**
```hcl
# íŒ¨í„´: {project}-{environment}-{resource-type}-{purpose}
# ì˜ˆì‹œ:
resource "aws_vpc" "main" {
  # ë¦¬ì†ŒìŠ¤ ì´ë¦„: eks-dev-vpc
  tags = {
    Name = "${var.project_name}-${var.environment}-vpc"
  }
}

resource "aws_subnet" "private" {
  # ë¦¬ì†ŒìŠ¤ ì´ë¦„: eks-dev-subnet-private-1a
  tags = {
    Name = "${var.project_name}-${var.environment}-subnet-private-${substr(each.value, -2, 2)}"
  }
}

resource "aws_security_group" "eks_cluster" {
  # ë¦¬ì†ŒìŠ¤ ì´ë¦„: eks-dev-sg-cluster
  name = "${var.project_name}-${var.environment}-sg-cluster"
}
```

**Terraform ë¦¬ì†ŒìŠ¤ ë° ë°ì´í„° ì†ŒìŠ¤ ëª…ëª…:**
```hcl
# ë¦¬ì†ŒìŠ¤ ëª…ëª… - ë‹¨ìˆ˜í˜• ì‚¬ìš©
resource "aws_instance" "web" {}           # ì˜¬ë°”ë¦„
resource "aws_instance" "web_servers" {}  # ì˜ëª»ë¨

# ë°ì´í„° ì†ŒìŠ¤ ëª…ëª… - ëª…í™•í•œ ëª©ì  í‘œì‹œ
data "aws_ami" "amazon_linux" {}
data "aws_availability_zones" "available" {}
data "aws_caller_identity" "current" {}

# ë¡œì»¬ ê°’ ëª…ëª… - ìŠ¤ë„¤ì´í¬ ì¼€ì´ìŠ¤ ì‚¬ìš©
locals {
  cluster_name = "${var.project_name}-${var.environment}"
  common_tags = {
    Project     = var.project_name
    Environment = var.environment
    ManagedBy   = "terraform"
  }
}
```

##### 2. ëª¨ë“ˆ êµ¬ì¡° í‘œì¤€

**ëª¨ë“ˆ ë””ë ‰í† ë¦¬ êµ¬ì¡°:**
```
modules/eks-cluster/
â”œâ”€â”€ README.md                    # ëª¨ë“ˆ ë¬¸ì„œ
â”œâ”€â”€ main.tf                      # ì£¼ìš” ë¦¬ì†ŒìŠ¤
â”œâ”€â”€ variables.tf                 # ì…ë ¥ ë³€ìˆ˜
â”œâ”€â”€ outputs.tf                   # ì¶œë ¥ ê°’
â”œâ”€â”€ versions.tf                  # í”„ë¡œë°”ì´ë” ë²„ì „
â”œâ”€â”€ locals.tf                    # ë¡œì»¬ ê°’ (í•„ìš”ì‹œ)
â”œâ”€â”€ data.tf                      # ë°ì´í„° ì†ŒìŠ¤ (í•„ìš”ì‹œ)
â”œâ”€â”€ examples/                    # ì‚¬ìš© ì˜ˆì œ
â”‚   â”œâ”€â”€ basic/
â”‚   â”‚   â”œâ”€â”€ main.tf
â”‚   â”‚   â”œâ”€â”€ variables.tf
â”‚   â”‚   â””â”€â”€ outputs.tf
â”‚   â””â”€â”€ advanced/
â”‚       â”œâ”€â”€ main.tf
â”‚       â”œâ”€â”€ variables.tf
â”‚       â””â”€â”€ outputs.tf
â””â”€â”€ modules/                     # ì„œë¸Œëª¨ë“ˆ (í•„ìš”ì‹œ)
    â””â”€â”€ node-group/
        â”œâ”€â”€ main.tf
        â”œâ”€â”€ variables.tf
        â””â”€â”€ outputs.tf
```

**ëª¨ë“ˆ ë²„ì „ ê´€ë¦¬:**
```hcl
# ëª¨ë“ˆ í˜¸ì¶œ ì‹œ ë²„ì „ ì§€ì •
module "eks_cluster" {
  source = "./modules/eks-cluster"
  # ë˜ëŠ” Git íƒœê·¸ ì‚¬ìš©
  # source = "git::https://github.com/org/repo.git//modules/eks-cluster?ref=v1.0.0"
  
  cluster_name = var.cluster_name
  vpc_id       = module.network.vpc_id
  subnet_ids   = module.network.private_subnet_ids
  
  tags = local.common_tags
}
```

##### 3. ë³€ìˆ˜ ë° ì¶œë ¥ ëª…ëª… í‘œì¤€

**ë³€ìˆ˜ ëª…ëª… ê·œì¹™:**
```hcl
# ìŠ¤ë„¤ì´í¬ ì¼€ì´ìŠ¤ ì‚¬ìš©
variable "cluster_name" {}           # ì˜¬ë°”ë¦„
variable "clusterName" {}            # ì˜ëª»ë¨
variable "cluster-name" {}           # ì˜ëª»ë¨

# ëª…í™•í•˜ê³  ì„¤ëª…ì ì¸ ì´ë¦„ ì‚¬ìš©
variable "enable_cluster_encryption" {}  # ì˜¬ë°”ë¦„
variable "encrypt" {}                    # ì˜ëª»ë¨ - ë„ˆë¬´ ëª¨í˜¸í•¨

# ë³µìˆ˜í˜•ì€ ë¦¬ìŠ¤íŠ¸ë‚˜ ë§µì—ë§Œ ì‚¬ìš©
variable "availability_zones" {
  type = list(string)
}

variable "node_groups" {
  type = map(object({...}))
}
```

**ì¶œë ¥ ëª…ëª… ê·œì¹™:**
```hcl
# ëª…í™•í•˜ê³  ì¼ê´€ëœ ëª…ëª…
output "cluster_id" {}
output "cluster_endpoint" {}
output "cluster_security_group_id" {}

# ë¯¼ê°í•œ ì •ë³´ëŠ” sensitive í‘œì‹œ
output "cluster_certificate_authority_data" {
  value     = aws_eks_cluster.this.certificate_authority[0].data
  sensitive = true
}
```

#### í…ŒìŠ¤íŠ¸ ë° ë¬¸ì„œí™” ìš”êµ¬ì‚¬í•­

##### 1. í…ŒìŠ¤íŠ¸ ìš”êµ¬ì‚¬í•­

**Terraform ê²€ì¦:**
```bash
# ëª¨ë“  ëª¨ë“ˆì— ëŒ€í•´ ë‹¤ìŒ ê²€ì‚¬ ìˆ˜í–‰
terraform fmt -check -recursive    # í¬ë§·íŒ… ê²€ì‚¬
terraform validate                 # êµ¬ë¬¸ ê²€ì¦
terraform plan                     # ê³„íš ê²€ì¦
```

**ë³´ì•ˆ ìŠ¤ìº”:**
```bash
# tfsecì„ ì‚¬ìš©í•œ ë³´ì•ˆ ìŠ¤ìº”
tfsec .

# Checkovë¥¼ ì‚¬ìš©í•œ ì •ì±… ê²€ì‚¬
checkov -d .

# Terrascanì„ ì‚¬ìš©í•œ ê·œì • ì¤€ìˆ˜ ê²€ì‚¬
terrascan scan -t terraform
```

**í†µí•© í…ŒìŠ¤íŠ¸:**
```bash
# Terratestë¥¼ ì‚¬ìš©í•œ í†µí•© í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ
# test/eks_cluster_test.go
package test

import (
    "testing"
    "github.com/gruntwork-io/terratest/modules/terraform"
    "github.com/stretchr/testify/assert"
)

func TestEKSCluster(t *testing.T) {
    terraformOptions := &terraform.Options{
        TerraformDir: "../examples/basic",
        Vars: map[string]interface{}{
            "cluster_name": "test-cluster",
            "region":       "us-west-2",
        },
    }

    defer terraform.Destroy(t, terraformOptions)
    terraform.InitAndApply(t, terraformOptions)

    clusterName := terraform.Output(t, terraformOptions, "cluster_name")
    assert.Equal(t, "test-cluster", clusterName)
}
```

##### 2. ë¬¸ì„œí™” ìš”êµ¬ì‚¬í•­

**ëª¨ë“ˆ README.md êµ¬ì¡°:**
```markdown
# Module Name

Brief description of what this module does.

## Usage

```hcl
module "example" {
  source = "./modules/module-name"
  
  # Required variables
  cluster_name = "my-cluster"
  vpc_id       = "vpc-12345"
  
  # Optional variables
  tags = {
    Environment = "dev"
  }
}
```

## Requirements

| Name | Version |
|------|---------||
| terraform | >= 1.5.0 |
| aws | >= 5.0 |

## Providers

| Name | Version |
|------|---------||
| aws | >= 5.0 |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| cluster_name | Name of the EKS cluster | `string` | n/a | yes |
| vpc_id | ID of the VPC | `string` | n/a | yes |

## Outputs

| Name | Description |
|------|-----------|
| cluster_id | The ID of the EKS cluster |
| cluster_endpoint | Endpoint for EKS control plane |

## Examples

- [Basic Example](examples/basic)
- [Advanced Example](examples/advanced)
```

**ì½”ë“œ ì£¼ì„ ê·œì¹™:**
```hcl
# ë³µì¡í•œ ë¡œì§ì— ëŒ€í•œ ì„¤ëª… ì£¼ì„
locals {
  # EKS í´ëŸ¬ìŠ¤í„°ì— í•„ìš”í•œ IAM ì—­í•  ARN ëª©ë¡ì„ ìƒì„±
  # ê¸°ë³¸ ì—­í• ê³¼ ì¶”ê°€ ì—­í• ì„ ë³‘í•©í•˜ì—¬ ì¤‘ë³µ ì œê±°
  cluster_iam_role_arns = distinct(concat(
    [aws_iam_role.cluster.arn],
    var.additional_iam_role_arns
  ))
}

# ì¡°ê±´ë¶€ ë¦¬ì†ŒìŠ¤ ìƒì„±ì— ëŒ€í•œ ì„¤ëª…
resource "aws_kms_key" "eks" {
  # KMS ì•”í˜¸í™”ê°€ í™œì„±í™”ëœ ê²½ìš°ì—ë§Œ í‚¤ ìƒì„±
  count = var.enable_cluster_encryption ? 1 : 0
  
  description = "EKS cluster encryption key for ${var.cluster_name}"
  
  tags = merge(var.tags, {
    Name = "${var.cluster_name}-eks-encryption-key"
  })
}
```

#### ë³´ì•ˆ ë° ëª¨ë²” ì‚¬ë¡€ ê°€ì´ë“œë¼ì¸

##### 1. ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€

**IAM ê¶Œí•œ ìµœì†Œí™”:**
```hcl
# ìµœì†Œ ê¶Œí•œ ì›ì¹™ ì ìš©
resource "aws_iam_role_policy" "eks_cluster" {
  name = "${var.cluster_name}-cluster-policy"
  role = aws_iam_role.cluster.id

  policy = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Effect = "Allow"
        Action = [
          "ec2:DescribeAccountAttributes",
          "ec2:DescribeAddresses",
          "ec2:DescribeInternetGateways"
        ]
        Resource = "*"
      }
    ]
  })
}

# ì™€ì¼ë“œì¹´ë“œ ê¶Œí•œ ì‚¬ìš© ê¸ˆì§€
# ì˜ëª»ëœ ì˜ˆì‹œ:
# "Action": "*"
# "Resource": "*"
```

**ë¯¼ê°í•œ ë°ì´í„° ë³´í˜¸:**
```hcl
# ë¯¼ê°í•œ ì¶œë ¥ì€ sensitive í‘œì‹œ
output "cluster_token" {
  description = "Token for accessing the EKS cluster"
  value       = data.aws_eks_cluster_auth.this.token
  sensitive   = true
}

# í•˜ë“œì½”ë”©ëœ ë¹„ë°€ ì •ë³´ ê¸ˆì§€
# ì˜ëª»ëœ ì˜ˆì‹œ:
# password = "hardcoded-password"

# ì˜¬ë°”ë¥¸ ì˜ˆì‹œ:
# password = var.database_password
# ë˜ëŠ”
# password = random_password.this.result
```

**ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ:**
```hcl
# ë³´ì•ˆ ê·¸ë£¹ ê·œì¹™ ìµœì†Œí™”
resource "aws_security_group_rule" "cluster_ingress" {
  type              = "ingress"
  from_port         = 443
  to_port           = 443
  protocol          = "tcp"
  cidr_blocks       = var.allowed_cidr_blocks  # íŠ¹ì • CIDRë§Œ í—ˆìš©
  security_group_id = aws_security_group.cluster.id
  
  # 0.0.0.0/0 ì‚¬ìš© ê¸ˆì§€ (í•„ìš”í•œ ê²½ìš° ëª…ì‹œì  ìŠ¹ì¸ í•„ìš”)
}

# í”„ë¼ì´ë¹— ì„œë¸Œë„· ì‚¬ìš© ê¶Œì¥
resource "aws_eks_node_group" "this" {
  subnet_ids = var.private_subnet_ids  # í¼ë¸”ë¦­ ì„œë¸Œë„· ëŒ€ì‹  í”„ë¼ì´ë¹— ì„œë¸Œë„· ì‚¬ìš©
}
```

##### 2. ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ ëª¨ë²” ì‚¬ë¡€

**íƒœê·¸ ê´€ë¦¬:**
```hcl
# ëª¨ë“  ë¦¬ì†ŒìŠ¤ì— ì¼ê´€ëœ íƒœê·¸ ì ìš©
locals {
  common_tags = merge(var.tags, {
    ManagedBy   = "terraform"
    Project     = var.project_name
    Environment = var.environment
    Module      = "eks-cluster"
  })
}

resource "aws_eks_cluster" "this" {
  name = var.cluster_name
  
  tags = local.common_tags
}
```

**ë¦¬ì†ŒìŠ¤ ìƒëª…ì£¼ê¸° ê´€ë¦¬:**
```hcl
# ì¤‘ìš”í•œ ë¦¬ì†ŒìŠ¤ëŠ” ì‚­ì œ ë°©ì§€
resource "aws_eks_cluster" "this" {
  name = var.cluster_name
  
  lifecycle {
    prevent_destroy = true
    ignore_changes = [
      # ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ëŠ” ì†ì„± ë¬´ì‹œ
      version,
    ]
  }
}

# ì˜ì¡´ì„± ëª…ì‹œì  ì„ ì–¸
resource "aws_eks_node_group" "this" {
  depends_on = [
    aws_iam_role_policy_attachment.node_group_AmazonEKSWorkerNodePolicy,
    aws_iam_role_policy_attachment.node_group_AmazonEKS_CNI_Policy,
    aws_iam_role_policy_attachment.node_group_AmazonEC2ContainerRegistryReadOnly,
  ]
}
```

##### 3. ì„±ëŠ¥ ë° ë¹„ìš© ìµœì í™”

**ë¦¬ì†ŒìŠ¤ í¬ê¸° ìµœì í™”:**
```hcl
# í™˜ê²½ë³„ ì¸ìŠ¤í„´ìŠ¤ í¬ê¸° ì¡°ì •
variable "node_instance_types" {
  description = "List of instance types for EKS node groups"
  type        = list(string)
  default     = ["t3.medium"]
  
  validation {
    condition = alltrue([
      for instance_type in var.node_instance_types :
      can(regex("^[tm][0-9]", instance_type))
    ])
    error_message = "Only t and m instance families are allowed for cost optimization."
  }
}

# Spot ì¸ìŠ¤í„´ìŠ¤ í™œìš© (ê°œë°œ í™˜ê²½)
resource "aws_eks_node_group" "spot" {
  count = var.environment == "dev" ? 1 : 0
  
  capacity_type = "SPOT"
  instance_types = var.spot_instance_types
}
```

**ìë™ í™•ì¥ êµ¬ì„±:**
```hcl
# ì ì ˆí•œ ìŠ¤ì¼€ì¼ë§ ì •ì±… ì„¤ì •
resource "aws_eks_node_group" "this" {
  scaling_config {
    desired_size = var.node_desired_size
    max_size     = var.node_max_size
    min_size     = var.node_min_size
  }
  
  # ì—…ë°ì´íŠ¸ êµ¬ì„±ìœ¼ë¡œ ë‹¤ìš´íƒ€ì„ ìµœì†Œí™”
  update_config {
    max_unavailable_percentage = 25
  }
}
```

##### 4. ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ ë„êµ¬

**í•„ìˆ˜ ê²€ì‚¬ ë„êµ¬:**
```bash
# 1. Terraform ê¸°ë³¸ ê²€ì‚¬
terraform fmt -check -recursive
terraform validate
terraform plan

# 2. ë³´ì•ˆ ìŠ¤ìº”
tfsec --format json --out tfsec-report.json .
checkov -d . --framework terraform --output json --output-file checkov-report.json

# 3. ì •ì  ë¶„ì„
tflint --config .tflint.hcl
terrascan scan -t terraform -o json > terrascan-report.json

# 4. ë¬¸ì„œ ê²€ì¦
terraform-docs markdown table --output-file README.md .
```

**CI/CD íŒŒì´í”„ë¼ì¸ í†µí•©:**
```yaml
# .github/workflows/terraform.yml
name: Terraform CI/CD

on:
  pull_request:
    branches: [main]
  push:
    branches: [main]

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Terraform
        uses: hashicorp/setup-terraform@v2
        with:
          terraform_version: 1.5.0
      
      - name: Terraform Format Check
        run: terraform fmt -check -recursive
      
      - name: Terraform Validate
        run: terraform validate
      
      - name: Run tfsec
        uses: aquasecurity/tfsec-action@v1.0.0
        with:
          format: sarif
          output: tfsec.sarif
      
      - name: Run Checkov
        uses: bridgecrewio/checkov-action@master
        with:
          directory: .
          framework: terraform
```

ì´ëŸ¬í•œ ì½”ë“œ ìŠ¤íƒ€ì¼ê³¼ í‘œì¤€ì„ ì¤€ìˆ˜í•¨ìœ¼ë¡œì¨ í”„ë¡œì íŠ¸ì˜ ì¼ê´€ì„±, ë³´ì•ˆì„±, ìœ ì§€ë³´ìˆ˜ì„±ì„ ë³´ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  ê¸°ì—¬ìëŠ” ì´ ê°€ì´ë“œë¼ì¸ì„ ìˆ™ì§€í•˜ê³  ì¤€ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤.

### ì½”ë“œ ë¦¬ë·° ê°€ì´ë“œë¼ì¸

#### ë¦¬ë·°ì–´ë¥¼ ìœ„í•œ ê°€ì´ë“œë¼ì¸

1. **ê¸°ëŠ¥ì„±**: ì½”ë“œê°€ ì˜ë„í•œ ëŒ€ë¡œ ì‘ë™í•˜ëŠ”ê°€?
2. **ë³´ì•ˆ**: ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€ë¥¼ ë”°ë¥´ê³  ìˆëŠ”ê°€?
3. **ì„±ëŠ¥**: ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì´ ìµœì í™”ë˜ì–´ ìˆëŠ”ê°€?
4. **ê°€ë…ì„±**: ì½”ë“œê°€ ì´í•´í•˜ê¸° ì‰¬ìš´ê°€?
5. **ë¬¸ì„œí™”**: ì ì ˆí•œ ì£¼ì„ê³¼ ë¬¸ì„œê°€ ìˆëŠ”ê°€?
6. **í…ŒìŠ¤íŠ¸**: ë³€ê²½ ì‚¬í•­ì´ í…ŒìŠ¤íŠ¸ë˜ì—ˆëŠ”ê°€?

#### ì‘ì„±ìë¥¼ ìœ„í•œ ê°€ì´ë“œë¼ì¸

1. **ìì²´ ë¦¬ë·°**: PR ì œì¶œ ì „ ìì‹ ì˜ ì½”ë“œë¥¼ ë¨¼ì € ë¦¬ë·°
2. **ì‘ì€ PR**: ê°€ëŠ¥í•œ í•œ ì‘ê³  ì§‘ì¤‘ëœ ë³€ê²½ ì‚¬í•­ìœ¼ë¡œ PR ì‘ì„±
3. **ëª…í™•í•œ ì„¤ëª…**: PR ì„¤ëª…ì— ë³€ê²½ ì´ìœ ì™€ ë°©ë²•ì„ ëª…í™•íˆ ê¸°ìˆ 
4. **í…ŒìŠ¤íŠ¸**: ë³€ê²½ ì‚¬í•­ì— ëŒ€í•œ ì ì ˆí•œ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰
5. **ë¬¸ì„œ ì—…ë°ì´íŠ¸**: í•„ìš”ì‹œ ê´€ë ¨ ë¬¸ì„œ ì—…ë°ì´íŠ¸

### ë¦´ë¦¬ìŠ¤ í”„ë¡œì„¸ìŠ¤

#### ë²„ì „ ê´€ë¦¬

ì´ í”„ë¡œì íŠ¸ëŠ” [Semantic Versioning](https://semver.org/)ì„ ë”°ë¦…ë‹ˆë‹¤:

- **MAJOR**: í˜¸í™˜ë˜ì§€ ì•ŠëŠ” API ë³€ê²½
- **MINOR**: í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ ì§€í•˜ë©´ì„œ ê¸°ëŠ¥ ì¶”ê°€
- **PATCH**: í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ ì§€í•˜ë©´ì„œ ë²„ê·¸ ìˆ˜ì •

#### ë¦´ë¦¬ìŠ¤ ë‹¨ê³„

1. **ê¸°ëŠ¥ ì™„ë£Œ**: ëª¨ë“  ê¸°ëŠ¥ì´ ê°œë°œë˜ê³  í…ŒìŠ¤íŠ¸ë¨
2. **ë¬¸ì„œ ì—…ë°ì´íŠ¸**: CHANGELOG.md ë° ê´€ë ¨ ë¬¸ì„œ ì—…ë°ì´íŠ¸
3. **íƒœê·¸ ìƒì„±**: Git íƒœê·¸ë¡œ ë²„ì „ í‘œì‹œ
4. **ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸**: GitHub ë¦´ë¦¬ìŠ¤ í˜ì´ì§€ì— ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸ ì‘ì„±

### ì»¤ë®¤ë‹ˆí‹° ê°€ì´ë“œë¼ì¸

#### í–‰ë™ ê°•ë ¹

- **ì¡´ì¤‘**: ëª¨ë“  ê¸°ì—¬ìë¥¼ ì¡´ì¤‘í•˜ê³  í¬ìš©ì ì¸ í™˜ê²½ ì¡°ì„±
- **ê±´ì„¤ì  í”¼ë“œë°±**: ê±´ì„¤ì ì´ê³  ë„ì›€ì´ ë˜ëŠ” í”¼ë“œë°± ì œê³µ
- **í˜‘ë ¥**: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ í˜‘ë ¥ì  ì ‘ê·¼
- **í•™ìŠµ**: ì‹¤ìˆ˜ë¥¼ í†µí•œ í•™ìŠµ ê¸°íšŒë¡œ í™œìš©

#### ì†Œí†µ ì±„ë„

- **GitHub Issues**: ë²„ê·¸ ë¦¬í¬íŠ¸, ê¸°ëŠ¥ ìš”ì²­, ì§ˆë¬¸
- **GitHub Discussions**: ì¼ë°˜ì ì¸ í† ë¡ , ì•„ì´ë””ì–´ ê³µìœ 
- **Pull Request**: ì½”ë“œ ë¦¬ë·° ë° ê¸°ìˆ ì  í† ë¡ 

### ê¸°ì—¬ ì¸ì •

ëª¨ë“  ê¸°ì—¬ìëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì¸ì •ë°›ìŠµë‹ˆë‹¤:

- **Contributors ì„¹ì…˜**: README.mdì˜ ê¸°ì—¬ì ëª©ë¡ì— ì¶”ê°€
- **ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸**: ì£¼ìš” ê¸°ì—¬ì— ëŒ€í•œ ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸ ì–¸ê¸‰
- **GitHub ê¸°ì—¬ ê·¸ë˜í”„**: GitHub í”„ë¡œí•„ì˜ ê¸°ì—¬ í™œë™ ë°˜ì˜

### ë„ì›€ì´ í•„ìš”í•œ ê²½ìš°

ê¸°ì—¬ ê³¼ì •ì—ì„œ ë„ì›€ì´ í•„ìš”í•˜ë©´:

1. **GitHub Issues**: ì§ˆë¬¸ ì´ìŠˆ ìƒì„±
2. **GitHub Discussions**: ì¼ë°˜ì ì¸ í† ë¡  ì°¸ì—¬
3. **ê¸°ì¡´ ì´ìŠˆ ê²€ìƒ‰**: ìœ ì‚¬í•œ ì§ˆë¬¸ì´ë‚˜ ë¬¸ì œê°€ ìˆëŠ”ì§€ í™•ì¸

ê¸°ì—¬í•´ ì£¼ì…”ì„œ ë‹¤ì‹œ í•œ ë²ˆ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤! ğŸ‰

## ğŸ“„ ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” Apache License 2.0 í•˜ì— ë°°í¬ë©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

---

<div align="center">
  <a href="#aws-eks-terraform">ğŸ” ë§¨ ìœ„ë¡œ ëŒì•„ê°€ê¸°</a>
</div>

### ë¼ì´ì„¼ìŠ¤ ê°œìš”

**Apache License 2.0**ì€ ë‹¤ìŒê³¼ ê°™ì€ ê¶Œí•œì„ ì œê³µí•©ë‹ˆë‹¤:

- âœ… **ìƒì—…ì  ì‚¬ìš©**: ìƒì—…ì  ëª©ì ìœ¼ë¡œ ììœ ë¡­ê²Œ ì‚¬ìš© ê°€ëŠ¥
- âœ… **ìˆ˜ì •**: ì†ŒìŠ¤ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê³  ê°œì„  ê°€ëŠ¥
- âœ… **ë°°í¬**: ì›ë³¸ ë˜ëŠ” ìˆ˜ì •ëœ ë²„ì „ì„ ììœ ë¡­ê²Œ ë°°í¬ ê°€ëŠ¥
- âœ… **íŠ¹í—ˆ ì‚¬ìš©**: ê¸°ì—¬ìì˜ íŠ¹í—ˆ ê¶Œë¦¬ì— ëŒ€í•œ ëª…ì‹œì  í—ˆê°€ í¬í•¨
- âœ… **ê°œì¸ ì‚¬ìš©**: ê°œì¸ì  ëª©ì ìœ¼ë¡œ ììœ ë¡­ê²Œ ì‚¬ìš© ê°€ëŠ¥

### ì‚¬ìš© ì¡°ê±´

ì´ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•  ë•Œ ë‹¤ìŒ ì¡°ê±´ì„ ì¤€ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤:

- **ë¼ì´ì„¼ìŠ¤ ë° ì €ì‘ê¶Œ ê³ ì§€ í¬í•¨**: ë°°í¬ ì‹œ ì›ë³¸ ë¼ì´ì„¼ìŠ¤ì™€ ì €ì‘ê¶Œ ê³ ì§€ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤
- **ë³€ê²½ ì‚¬í•­ ëª…ì‹œ**: ì›ë³¸ íŒŒì¼ì„ ìˆ˜ì •í•œ ê²½ìš° ë³€ê²½ ì‚¬í•­ì„ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤
- **ìƒí‘œê¶Œ ì œí•œ**: ë¼ì´ì„¼ì„œì˜ ìƒí‘œ, ì„œë¹„ìŠ¤ ë§ˆí¬ ë“±ì„ ë¬´ë‹¨ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤

### ë©´ì±… ì¡°í•­

ì´ ì†Œí”„íŠ¸ì›¨ì–´ëŠ” "ìˆëŠ” ê·¸ëŒ€ë¡œ" ì œê³µë˜ë©°, ëª…ì‹œì ì´ê±°ë‚˜ ë¬µì‹œì ì¸ ì–´ë– í•œ ë³´ì¦ë„ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì‚¬ìš©ìœ¼ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ëª¨ë“  ìœ„í—˜ì€ ì‚¬ìš©ìê°€ ë¶€ë‹´í•©ë‹ˆë‹¤.

### ì˜¤í”ˆì†ŒìŠ¤ ì»´í¬ë„ŒíŠ¸ ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì˜¤í”ˆì†ŒìŠ¤ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤:

#### Terraform ëª¨ë“ˆ

| ì»´í¬ë„ŒíŠ¸ | ë¼ì´ì„¼ìŠ¤ | ì„¤ëª… |
|----------|----------|------|
| [terraform-aws-modules/eks](https://github.com/terraform-aws-modules/terraform-aws-eks) | Apache 2.0 | AWS EKS í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ë¥¼ ìœ„í•œ Terraform ëª¨ë“ˆ |
| [terraform-aws-modules/vpc](https://github.com/terraform-aws-modules/terraform-aws-vpc) | Apache 2.0 | AWS VPC ê´€ë¦¬ë¥¼ ìœ„í•œ Terraform ëª¨ë“ˆ |
| [terraform-aws-modules/kms](https://github.com/terraform-aws-modules/terraform-aws-kms) | Apache 2.0 | AWS KMS ê´€ë¦¬ë¥¼ ìœ„í•œ Terraform ëª¨ë“ˆ |
| [terraform-aws-modules/iam](https://github.com/terraform-aws-modules/terraform-aws-iam) | Apache 2.0 | AWS IAM ê´€ë¦¬ë¥¼ ìœ„í•œ Terraform ëª¨ë“ˆ |

#### Kubernetes ì• ë“œì˜¨

| ì»´í¬ë„ŒíŠ¸ | ë¼ì´ì„¼ìŠ¤ | ì„¤ëª… |
|----------|----------|------|
| [ArgoCD](https://github.com/argoproj/argo-cd) | Apache 2.0 | GitOps ì§€ì†ì  ë°°í¬ ë„êµ¬ |
| [Karpenter](https://github.com/aws/karpenter) | Apache 2.0 | Kubernetes í´ëŸ¬ìŠ¤í„° ìë™ í™•ì¥ ë„êµ¬ |
| [AWS Load Balancer Controller](https://github.com/kubernetes-sigs/aws-load-balancer-controller) | Apache 2.0 | AWS ë¡œë“œ ë°¸ëŸ°ì„œ í†µí•© ì»¨íŠ¸ë¡¤ëŸ¬ |
| [External DNS](https://github.com/kubernetes-sigs/external-dns) | Apache 2.0 | Kubernetes ì„œë¹„ìŠ¤ë¥¼ ìœ„í•œ DNS ê´€ë¦¬ ë„êµ¬ |
| [Cert Manager](https://github.com/cert-manager/cert-manager) | Apache 2.0 | Kubernetesìš© X.509 ì¸ì¦ì„œ ê´€ë¦¬ ë„êµ¬ |
| [Kyverno](https://github.com/kyverno/kyverno) | Apache 2.0 | Kubernetesìš© ì •ì±… ì—”ì§„ |
| [Metrics Server](https://github.com/kubernetes-sigs/metrics-server) | Apache 2.0 | Kubernetes ë¦¬ì†ŒìŠ¤ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ë„êµ¬ |

#### AWS ì„œë¹„ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒ AWS ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©°, ê° ì„œë¹„ìŠ¤ëŠ” AWS ì„œë¹„ìŠ¤ ì•½ê´€ì— ë”°ë¼ ì œê³µë©ë‹ˆë‹¤:

- Amazon EKS (Elastic Kubernetes Service)
- Amazon EC2 (Elastic Compute Cloud)
- Amazon VPC (Virtual Private Cloud)
- Amazon S3 (Simple Storage Service)
- Amazon ECR (Elastic Container Registry)
- AWS IAM (Identity and Access Management)
- AWS KMS (Key Management Service)
- Amazon CloudWatch
- AWS Route53
- AWS Certificate Manager (ACM)
- Amazon EFS (Elastic File System)

### ê¸°ì—¬ì ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ì— ê¸°ì—¬í•˜ëŠ” ëª¨ë“  ì½”ë“œëŠ” Apache License 2.0 í•˜ì— ë¼ì´ì„¼ìŠ¤ë©ë‹ˆë‹¤. ê¸°ì—¬ë¥¼ ì œì¶œí•¨ìœ¼ë¡œì¨ ê·€í•˜ëŠ” ë‹¤ìŒì— ë™ì˜í•©ë‹ˆë‹¤:

1. ê·€í•˜ì˜ ê¸°ì—¬ê°€ Apache License 2.0 í•˜ì— ë¼ì´ì„¼ìŠ¤ë¨
2. ê·€í•˜ê°€ í•´ë‹¹ ê¸°ì—¬ì— ëŒ€í•œ ì €ì‘ê¶Œì„ ì†Œìœ í•˜ê±°ë‚˜ ê¸°ì—¬í•  ê¶Œí•œì„ ê°€ì§€ê³  ìˆìŒ
3. ê·€í•˜ì˜ ê¸°ì—¬ê°€ ì œ3ìì˜ ì§€ì  ì¬ì‚°ê¶Œì„ ì¹¨í•´í•˜ì§€ ì•ŠìŒ

### ë¼ì´ì„¼ìŠ¤ ì „ë¬¸

Apache License 2.0ì˜ ì „ë¬¸ì€ ë‹¤ìŒ ìœ„ì¹˜ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- í”„ë¡œì íŠ¸ ë£¨íŠ¸ì˜ [LICENSE](LICENSE) íŒŒì¼
- [Apache Software Foundation ì›¹ì‚¬ì´íŠ¸](https://www.apache.org/licenses/LICENSE-2.0)

### ë¬¸ì˜ì‚¬í•­

ë¼ì´ì„¼ìŠ¤ì™€ ê´€ë ¨ëœ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ í”„ë¡œì íŠ¸ ì´ìŠˆë¥¼ í†µí•´ ì—°ë½í•´ ì£¼ì„¸ìš”.

---

**ì°¸ê³ **: ì´ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì— ë¼ì´ì„¼ìŠ¤ ì¡°ê±´ì„ ì¶©ë¶„íˆ ê²€í† í•˜ê³  ì´í•´í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. ë²•ì  ì¡°ì–¸ì´ í•„ìš”í•œ ê²½ìš° ì „ë¬¸ê°€ì™€ ìƒë‹´í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.